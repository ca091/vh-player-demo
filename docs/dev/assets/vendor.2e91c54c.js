function t(t,e){return e.forEach((function(e){e&&"string"!=typeof e&&!Array.isArray(e)&&Object.keys(e).forEach((function(i){if("default"!==i&&!(i in t)){var r=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:function(){return e[i]}})}}))})),Object.freeze(t)}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function i(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function r(t){if(t.__esModule)return t;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(t).forEach((function(i){var r=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(e,i,r.get?r:{enumerable:!0,get:function(){return t[i]}})})),e}var n={},a={},s={};Object.defineProperty(s,"__esModule",{value:!0});s.ContentRect=function(t){if("getBBox"in t){var e=t.getBBox();return Object.freeze({height:e.height,left:0,top:0,width:e.width})}var i=window.getComputedStyle(t);return Object.freeze({height:parseFloat(i.height||"0"),left:parseFloat(i.paddingLeft||"0"),top:parseFloat(i.paddingTop||"0"),width:parseFloat(i.width||"0")})},Object.defineProperty(a,"__esModule",{value:!0});var o=s,u=function(){function t(t){this.target=t,this.$$broadcastWidth=this.$$broadcastHeight=0}return Object.defineProperty(t.prototype,"broadcastWidth",{get:function(){return this.$$broadcastWidth},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"broadcastHeight",{get:function(){return this.$$broadcastHeight},enumerable:!0,configurable:!0}),t.prototype.isActive=function(){var t=o.ContentRect(this.target);return!!t&&(t.width!==this.broadcastWidth||t.height!==this.broadcastHeight)},t}();a.ResizeObservation=u;var p={};Object.defineProperty(p,"__esModule",{value:!0});var c=s,l=function(t){this.target=t,this.contentRect=c.ContentRect(t)};p.ResizeObserverEntry=l,Object.defineProperty(n,"__esModule",{value:!0});var d=a,f=p,h=[],g=function(){function t(t){this.$$observationTargets=[],this.$$activeTargets=[],this.$$skippedTargets=[];var e=function(t){if(void 0===t)return"Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.";if("function"!=typeof t)return"Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function."}(t);if(e)throw TypeError(e);this.$$callback=t}return t.prototype.observe=function(t){var e,i=y("observe",t);if(i)throw TypeError(i);b(this.$$observationTargets,t)>=0||(this.$$observationTargets.push(new d.ResizeObservation(t)),e=this,h.indexOf(e)<0&&(h.push(e),k()))},t.prototype.unobserve=function(t){var e=y("unobserve",t);if(e)throw TypeError(e);var i=b(this.$$observationTargets,t);i<0||(this.$$observationTargets.splice(i,1),0===this.$$observationTargets.length&&m(this))},t.prototype.disconnect=function(){this.$$observationTargets=[],this.$$activeTargets=[],m(this)},t}();function m(t){var e=h.indexOf(t);e>=0&&(h.splice(e,1),P())}function y(t,e){return void 0===e?"Failed to execute '"+t+"' on 'ResizeObserver': 1 argument required, but only 0 present.":e&&e.nodeType===window.Node.ELEMENT_NODE?void 0:"Failed to execute '"+t+"' on 'ResizeObserver': parameter 1 is not of type 'Element'."}function b(t,e){for(var i=0;i<t.length;i+=1)if(t[i].target===e)return i;return-1}n.ResizeObserver=g;var v,w,S,T=function(t){h.forEach((function(e){e.$$activeTargets=[],e.$$skippedTargets=[],e.$$observationTargets.forEach((function(i){i.isActive()&&(A(i.target)>t?e.$$activeTargets.push(i):e.$$skippedTargets.push(i))}))}))},_=function(){var t=1/0;return h.forEach((function(e){if(e.$$activeTargets.length){var i=[];e.$$activeTargets.forEach((function(e){var r=new f.ResizeObserverEntry(e.target);i.push(r),e.$$broadcastWidth=r.contentRect.width,e.$$broadcastHeight=r.contentRect.height;var n=A(e.target);n<t&&(t=n)})),e.$$callback(i,e),e.$$activeTargets=[]}})),t},A=function(t){for(var e=0;t.parentNode;)t=t.parentNode,e+=1;return e},E=function(){var t,e=0;for(T(e);h.some((function(t){return!!t.$$activeTargets.length}));)e=_(),T(e);h.some((function(t){return!!t.$$skippedTargets.length}))&&(t=new window.ErrorEvent("ResizeLoopError",{message:"ResizeObserver loop completed with undelivered notifications."}),window.dispatchEvent(t))},k=function(){v||O()},O=function(){v=window.requestAnimationFrame((function(){E(),O()}))},P=function(){v&&!h.some((function(t){return!!t.$$observationTargets.length}))&&(window.cancelAnimationFrame(v),v=void 0)},x=n.install=function(){return window.ResizeObserver=g},U={exports:{}};
/*!@license
 * UAParser.js v0.7.28
 * Lightweight JavaScript-based User-Agent string parser
 * https://github.com/faisalman/ua-parser-js
 *
 * Copyright Â© 2012-2021 Faisal Salman <f@faisalman.com>
 * Licensed under MIT License
 */
w=U,S=U.exports,function(t,e){var i="function",r="object",n="string",a="model",s="name",o="type",u="vendor",p="version",c="architecture",l="console",d="mobile",f="tablet",h="smarttv",g="wearable",m="embedded",y={extend:function(t,e){var i={};for(var r in t)e[r]&&e[r].length%2==0?i[r]=e[r].concat(t[r]):i[r]=t[r];return i},has:function(t,e){return typeof t===n&&-1!==e.toLowerCase().indexOf(t.toLowerCase())},lowerize:function(t){return t.toLowerCase()},major:function(t){return typeof t===n?t.replace(/[^\d\.]/g,"").split(".")[0]:e},trim:function(t,e){return t=t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),void 0===e?t:t.substring(0,255)}},b={rgx:function(t,n){for(var a,s,o,u,p,c,l=0;l<n.length&&!p;){var d=n[l],f=n[l+1];for(a=s=0;a<d.length&&!p;)if(p=d[a++].exec(t))for(o=0;o<f.length;o++)c=p[++s],typeof(u=f[o])===r&&u.length>0?2==u.length?typeof u[1]==i?this[u[0]]=u[1].call(this,c):this[u[0]]=u[1]:3==u.length?typeof u[1]!==i||u[1].exec&&u[1].test?this[u[0]]=c?c.replace(u[1],u[2]):e:this[u[0]]=c?u[1].call(this,c,u[2]):e:4==u.length&&(this[u[0]]=c?u[3].call(this,c.replace(u[1],u[2])):e):this[u]=c||e;l+=2}},str:function(t,i){for(var n in i)if(typeof i[n]===r&&i[n].length>0){for(var a=0;a<i[n].length;a++)if(y.has(i[n][a],t))return"?"===n?e:n}else if(y.has(i[n],t))return"?"===n?e:n;return t}},v={browser:{oldSafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}},oldEdge:{version:{.1:"12.",21:"13.",31:"14.",39:"15.",41:"16.",42:"17.",44:"18."}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},T={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[p,[s,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[p,[s,"Edge"]],[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]{3,6})\b.+version\/([\w\.-]+)/i,/(opera)(?:.+version\/|[\/\s]+)([\w\.]+)/i],[s,p],[/opios[\/\s]+([\w\.]+)/i],[p,[s,"Opera Mini"]],[/\sopr\/([\w\.]+)/i],[p,[s,"Opera"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim)(?:browser)?[\/\s]?([\w\.]*)/i,/(ba?idubrowser)[\/\s]?([\w\.]+)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i,/(rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([\w\.]+)/i,/(weibo)__([\d\.]+)/i],[s,p],[/(?:[\s\/]uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[p,[s,"UCBrowser"]],[/(?:windowswechat)?\sqbcore\/([\w\.]+)\b.*(?:windowswechat)?/i],[p,[s,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[p,[s,"WeChat"]],[/konqueror\/([\w\.]+)/i],[p,[s,"Konqueror"]],[/trident.+rv[:\s]([\w\.]{1,9})\b.+like\sgecko/i],[p,[s,"IE"]],[/yabrowser\/([\w\.]+)/i],[p,[s,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[s,/(.+)/,"$1 Secure Browser"],p],[/focus\/([\w\.]+)/i],[p,[s,"Firefox Focus"]],[/opt\/([\w\.]+)/i],[p,[s,"Opera Touch"]],[/coc_coc_browser\/([\w\.]+)/i],[p,[s,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[p,[s,"Dolphin"]],[/coast\/([\w\.]+)/i],[p,[s,"Opera Coast"]],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[p,[s,"MIUI Browser"]],[/fxios\/([\w\.-]+)/i],[p,[s,"Firefox"]],[/(qihu|qhbrowser|qihoobrowser|360browser)/i],[[s,"360 Browser"]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[s,/(.+)/,"$1 Browser"],p],[/(comodo_dragon)\/([\w\.]+)/i],[[s,/_/g," "],p],[/\s(electron)\/([\w\.]+)\ssafari/i,/(tesla)(?:\sqtcarbrowser|\/(20[12]\d\.[\w\.-]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/\s]?([\w\.]+)/i],[s,p],[/(MetaSr)[\/\s]?([\w\.]+)/i,/(LBBROWSER)/i],[s],[/;fbav\/([\w\.]+);/i],[p,[s,"Facebook"]],[/FBAN\/FBIOS|FB_IAB\/FB4A/i],[[s,"Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/\s]([\w\.-]+)/i],[s,p],[/\bgsa\/([\w\.]+)\s.*safari\//i],[p,[s,"GSA"]],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[p,[s,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[s,"Chrome WebView"],p],[/droid.+\sversion\/([\w\.]+)\b.+(?:mobile\ssafari|safari)/i],[p,[s,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[s,p],[/version\/([\w\.]+)\s.*mobile\/\w+\s(safari)/i],[p,[s,"Mobile Safari"]],[/version\/([\w\.]+)\s.*(mobile\s?safari|safari)/i],[p,s],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[s,[p,b.str,v.browser.oldSafari.version]],[/(webkit|khtml)\/([\w\.]+)/i],[s,p],[/(navigator|netscape)\/([\w\.-]+)/i],[[s,"Netscape"],p],[/ile\svr;\srv:([\w\.]+)\).+firefox/i],[p,[s,"Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(firefox)\/([\w\.]+)\s[\w\s\-]+\/[\w\.]+$/i,/(mozilla)\/([\w\.]+)\s.+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[s,p]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[c,"amd64"]],[/(ia32(?=;))/i],[[c,y.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[c,"ia32"]],[/\b(aarch64|armv?8e?l?)\b/i],[[c,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[c,"armhf"]],[/windows\s(ce|mobile);\sppc;/i],[[c,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[c,/ower/,"",y.lowerize]],[/(sun4\w)[;\)]/i],[[c,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?:64|(?=v(?:[1-7]|[5-7]1)l?|;|eabi))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[c,y.lowerize]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus\s10)/i],[a,[u,"Samsung"],[o,f]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy\snexus)/i,/\ssamsung[\s-]([\w-]+)/i,/sec-(sgh\w+)/i],[a,[u,"Samsung"],[o,d]],[/\((ip(?:hone|od)[\s\w]*);/i],[a,[u,"Apple"],[o,d]],[/\((ipad);[\w\s\),;-]+apple/i,/applecoremedia\/[\w\.]+\s\((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[a,[u,"Apple"],[o,f]],[/\b((?:agr|ags[23]|bah2?|sht?)-a?[lw]\d{2})/i],[a,[u,"Huawei"],[o,f]],[/d\/huawei([\w\s-]+)[;\)]/i,/\b(nexus\s6p|vog-[at]?l\d\d|ane-[at]?l[x\d]\d|eml-a?l\d\da?|lya-[at]?l\d[\dc]|clt-a?l\d\di?|ele-l\d\d)/i,/\b(\w{2,4}-[atu][ln][01259][019])[;\)\s]/i],[a,[u,"Huawei"],[o,d]],[/\b(poco[\s\w]+)(?:\sbuild|\))/i,/\b;\s(\w+)\sbuild\/hm\1/i,/\b(hm[\s\-_]?note?[\s_]?(?:\d\w)?)\sbuild/i,/\b(redmi[\s\-_]?(?:note|k)?[\w\s_]+)(?:\sbuild|\))/i,/\b(mi[\s\-_]?(?:a\d|one|one[\s_]plus|note lte)?[\s_]?(?:\d?\w?)[\s_]?(?:plus)?)\sbuild/i],[[a,/_/g," "],[u,"Xiaomi"],[o,d]],[/\b(mi[\s\-_]?(?:pad)(?:[\w\s_]+))(?:\sbuild|\))/i],[[a,/_/g," "],[u,"Xiaomi"],[o,f]],[/;\s(\w+)\sbuild.+\soppo/i,/\s(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007)\b/i],[a,[u,"OPPO"],[o,d]],[/\svivo\s(\w+)(?:\sbuild|\))/i,/\s(v[12]\d{3}\w?[at])(?:\sbuild|;)/i],[a,[u,"Vivo"],[o,d]],[/\s(rmx[12]\d{3})(?:\sbuild|;)/i],[a,[u,"Realme"],[o,d]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)\b[\w\s]+build\//i,/\smot(?:orola)?[\s-](\w*)/i,/((?:moto[\s\w\(\)]+|xt\d{3,4}|nexus\s6)(?=\sbuild|\)))/i],[a,[u,"Motorola"],[o,d]],[/\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[a,[u,"Motorola"],[o,f]],[/((?=lg)?[vl]k\-?\d{3})\sbuild|\s3\.[\s\w;-]{10}lg?-([06cv9]{3,4})/i],[a,[u,"LG"],[o,f]],[/(lm-?f100[nv]?|nexus\s[45])/i,/lg[e;\s\/-]+((?!browser|netcast)\w+)/i,/\blg(\-?[\d\w]+)\sbuild/i],[a,[u,"LG"],[o,d]],[/(ideatab[\w\-\s]+)/i,/lenovo\s?(s(?:5000|6000)(?:[\w-]+)|tab(?:[\s\w]+)|yt[\d\w-]{6}|tb[\d\w-]{6})/i],[a,[u,"Lenovo"],[o,f]],[/(?:maemo|nokia).*(n900|lumia\s\d+)/i,/nokia[\s_-]?([\w\.-]*)/i],[[a,/_/g," "],[u,"Nokia"],[o,d]],[/droid.+;\s(pixel\sc)[\s)]/i],[a,[u,"Google"],[o,f]],[/droid.+;\s(pixel[\s\daxl]{0,6})(?:\sbuild|\))/i],[a,[u,"Google"],[o,d]],[/droid.+\s([c-g]\d{4}|so[-l]\w+|xq-a\w[4-7][12])(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[a,[u,"Sony"],[o,d]],[/sony\stablet\s[ps]\sbuild\//i,/(?:sony)?sgp\w+(?:\sbuild\/|\))/i],[[a,"Xperia Tablet"],[u,"Sony"],[o,f]],[/\s(kb2005|in20[12]5|be20[12][59])\b/i,/\ba000(1)\sbuild/i,/\boneplus\s(a\d{4})[\s)]/i],[a,[u,"OnePlus"],[o,d]],[/(alexa)webm/i,/(kf[a-z]{2}wi)(\sbuild\/|\))/i,/(kf[a-z]+)(\sbuild\/|\)).+silk\//i],[a,[u,"Amazon"],[o,f]],[/(sd|kf)[0349hijorstuw]+(\sbuild\/|\)).+silk\//i],[[a,"Fire Phone"],[u,"Amazon"],[o,d]],[/\((playbook);[\w\s\),;-]+(rim)/i],[a,u,[o,f]],[/((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10;\s(\w+)/i],[a,[u,"BlackBerry"],[o,d]],[/(?:\b|asus_)(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus\s7|padfone|p00[cj])/i],[a,[u,"ASUS"],[o,f]],[/\s(z[es]6[027][01][km][ls]|zenfone\s\d\w?)\b/i],[a,[u,"ASUS"],[o,d]],[/(nexus\s9)/i],[a,[u,"HTC"],[o,f]],[/(htc)[;_\s-]{1,2}([\w\s]+(?=\)|\sbuild)|\w+)/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[u,[a,/_/g," "],[o,d]],[/droid[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i],[a,[u,"Acer"],[o,f]],[/droid.+;\s(m[1-5]\snote)\sbuild/i,/\bmz-([\w-]{2,})/i],[a,[u,"Meizu"],[o,d]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i,/(microsoft);\s(lumia[\s\w]+)/i,/(lenovo)[_\s-]?([\w-]+)/i,/linux;.+(jolla);/i,/droid.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[u,a,[o,d]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i,/[;\/]\s?(le[\s\-]+pan)[\s\-]+(\w{1,9})\sbuild/i,/[;\/]\s?(trinity)[\-\s]*(t\d{3})\sbuild/i,/\b(gigaset)[\s\-]+(q\w{1,9})\sbuild/i,/\b(vodafone)\s([\w\s]+)(?:\)|\sbuild)/i],[u,a,[o,f]],[/\s(surface\sduo)\s/i],[a,[u,"Microsoft"],[o,f]],[/droid\s[\d\.]+;\s(fp\du?)\sbuild/i],[a,[u,"Fairphone"],[o,d]],[/\s(u304aa)\sbuild/i],[a,[u,"AT&T"],[o,d]],[/sie-(\w*)/i],[a,[u,"Siemens"],[o,d]],[/[;\/]\s?(rct\w+)\sbuild/i],[a,[u,"RCA"],[o,f]],[/[;\/\s](venue[\d\s]{2,7})\sbuild/i],[a,[u,"Dell"],[o,f]],[/[;\/]\s?(q(?:mv|ta)\w+)\sbuild/i],[a,[u,"Verizon"],[o,f]],[/[;\/]\s(?:barnes[&\s]+noble\s|bn[rt])([\w\s\+]*)\sbuild/i],[a,[u,"Barnes & Noble"],[o,f]],[/[;\/]\s(tm\d{3}\w+)\sbuild/i],[a,[u,"NuVision"],[o,f]],[/;\s(k88)\sbuild/i],[a,[u,"ZTE"],[o,f]],[/;\s(nx\d{3}j)\sbuild/i],[a,[u,"ZTE"],[o,d]],[/[;\/]\s?(gen\d{3})\sbuild.*49h/i],[a,[u,"Swiss"],[o,d]],[/[;\/]\s?(zur\d{3})\sbuild/i],[a,[u,"Swiss"],[o,f]],[/[;\/]\s?((zeki)?tb.*\b)\sbuild/i],[a,[u,"Zeki"],[o,f]],[/[;\/]\s([yr]\d{2})\sbuild/i,/[;\/]\s(dragon[\-\s]+touch\s|dt)(\w{5})\sbuild/i],[[u,"Dragon Touch"],a,[o,f]],[/[;\/]\s?(ns-?\w{0,9})\sbuild/i],[a,[u,"Insignia"],[o,f]],[/[;\/]\s?((nxa|Next)-?\w{0,9})\sbuild/i],[a,[u,"NextBook"],[o,f]],[/[;\/]\s?(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05]))\sbuild/i],[[u,"Voice"],a,[o,d]],[/[;\/]\s?(lvtel\-)?(v1[12])\sbuild/i],[[u,"LvTel"],a,[o,d]],[/;\s(ph-1)\s/i],[a,[u,"Essential"],[o,d]],[/[;\/]\s?(v(100md|700na|7011|917g).*\b)\sbuild/i],[a,[u,"Envizen"],[o,f]],[/[;\/]\s?(trio[\s\w\-\.]+)\sbuild/i],[a,[u,"MachSpeed"],[o,f]],[/[;\/]\s?tu_(1491)\sbuild/i],[a,[u,"Rotor"],[o,f]],[/(shield[\w\s]+)\sbuild/i],[a,[u,"Nvidia"],[o,f]],[/(sprint)\s(\w+)/i],[u,a,[o,d]],[/(kin\.[onetw]{3})/i],[[a,/\./g," "],[u,"Microsoft"],[o,d]],[/droid\s[\d\.]+;\s(cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[a,[u,"Zebra"],[o,f]],[/droid\s[\d\.]+;\s(ec30|ps20|tc[2-8]\d[kx])\)/i],[a,[u,"Zebra"],[o,d]],[/\s(ouya)\s/i,/(nintendo)\s([wids3utch]+)/i],[u,a,[o,l]],[/droid.+;\s(shield)\sbuild/i],[a,[u,"Nvidia"],[o,l]],[/(playstation\s[345portablevi]+)/i],[a,[u,"Sony"],[o,l]],[/[\s\(;](xbox(?:\sone)?(?!;\sxbox))[\s\);]/i],[a,[u,"Microsoft"],[o,l]],[/smart-tv.+(samsung)/i],[u,[o,h]],[/hbbtv.+maple;(\d+)/i],[[a,/^/,"SmartTV"],[u,"Samsung"],[o,h]],[/(?:linux;\snetcast.+smarttv|lg\snetcast\.tv-201\d)/i],[[u,"LG"],[o,h]],[/(apple)\s?tv/i],[u,[a,"Apple TV"],[o,h]],[/crkey/i],[[a,"Chromecast"],[u,"Google"],[o,h]],[/droid.+aft([\w])(\sbuild\/|\))/i],[a,[u,"Amazon"],[o,h]],[/\(dtv[\);].+(aquos)/i],[a,[u,"Sharp"],[o,h]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[u,y.trim],[a,y.trim],[o,h]],[/[\s\/\(](android\s|smart[-\s]?|opera\s)tv[;\)\s]/i],[[o,h]],[/((pebble))app\/[\d\.]+\s/i],[u,a,[o,g]],[/droid.+;\s(glass)\s\d/i],[a,[u,"Google"],[o,g]],[/droid\s[\d\.]+;\s(wt63?0{2,3})\)/i],[a,[u,"Zebra"],[o,g]],[/(tesla)(?:\sqtcarbrowser|\/20[12]\d\.[\w\.-]+)/i],[u,[o,m]],[/droid .+?; ([^;]+?)(?: build|\) applewebkit).+? mobile safari/i],[a,[o,d]],[/droid .+?;\s([^;]+?)(?: build|\) applewebkit).+?(?! mobile) safari/i],[a,[o,f]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[o,y.lowerize]],[/(android[\w\.\s\-]{0,9});.+build/i],[a,[u,"Generic"]],[/(phone)/i],[[o,d]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[p,[s,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[p,[s,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[s,p],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[p,s]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[s,p],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)(?!.+xbox)/i],[s,[p,b.str,v.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[s,"Windows"],[p,b.str,v.os.windows.version]],[/ip[honead]{2,4}\b(?:.*os\s([\w]+)\slike\smac|;\sopera)/i,/cfnetwork\/.+darwin/i],[[p,/_/g,"."],[s,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)(?!.+haiku)/i],[[s,"Mac OS"],[p,/_/g,"."]],[/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/\s]([\w\.]+)/i,/\((series40);/i],[s,p],[/\(bb(10);/i],[p,[s,"BlackBerry"]],[/(?:symbian\s?os|symbos|s60(?=;)|series60)[\/\s-]?([\w\.]*)/i],[p,[s,"Symbian"]],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[s,"Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[p,[s,"webOS"]],[/crkey\/([\d\.]+)/i],[p,[s,"Chromecast"]],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[s,"Chromium OS"],p],[/(nintendo|playstation)\s([wids345portablevuch]+)/i,/(xbox);\s+xbox\s([^\);]+)/i,/(mint)[\/\s\(\)]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?=\slinux)|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus|raspbian)(?:\sgnu\/linux)?(?:\slinux)?[\/\s-]?(?!chrom|package)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i,/\s([frentopc-]{0,4}bsd|dragonfly)\s?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku)\s(\w+)/i],[s,p],[/(sunos)\s?([\w\.\d]*)/i],[[s,"Solaris"],p],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[s,p]]},_=function(i,r){if("object"==typeof i&&(r=i,i=e),!(this instanceof _))return new _(i,r).getResult();var a=i||(void 0!==t&&t.navigator&&t.navigator.userAgent?t.navigator.userAgent:""),s=r?y.extend(T,r):T;return this.getBrowser=function(){var t={name:e,version:e};return b.rgx.call(t,a,s.browser),t.major=y.major(t.version),t},this.getCPU=function(){var t={architecture:e};return b.rgx.call(t,a,s.cpu),t},this.getDevice=function(){var t={vendor:e,model:e,type:e};return b.rgx.call(t,a,s.device),t},this.getEngine=function(){var t={name:e,version:e};return b.rgx.call(t,a,s.engine),t},this.getOS=function(){var t={name:e,version:e};return b.rgx.call(t,a,s.os),t},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return a},this.setUA=function(t){return a=typeof t===n&&t.length>255?y.trim(t,255):t,this},this.setUA(a),this};_.VERSION="0.7.28",_.BROWSER={NAME:s,MAJOR:"major",VERSION:p},_.CPU={ARCHITECTURE:c},_.DEVICE={MODEL:a,VENDOR:u,TYPE:o,CONSOLE:l,MOBILE:d,SMARTTV:h,TABLET:f,WEARABLE:g,EMBEDDED:m},_.ENGINE={NAME:s,VERSION:p},_.OS={NAME:s,VERSION:p},w.exports&&(S=w.exports=_),S.UAParser=_;var A=void 0!==t&&(t.jQuery||t.Zepto);if(A&&!A.ua){var E=new _;A.ua=E.getResult(),A.ua.get=function(){return E.getUA()},A.ua.set=function(t){E.setUA(t);var e=E.getResult();for(var i in e)A.ua[i]=e[i]}}}("object"==typeof window?window:e);var D={exports:{}};!function(t){var e=Object.prototype.hasOwnProperty,i="~";function r(){}function n(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function a(t,e,r,a,s){if("function"!=typeof r)throw new TypeError("The listener must be a function");var o=new n(r,a||t,s),u=i?i+e:e;return t._events[u]?t._events[u].fn?t._events[u]=[t._events[u],o]:t._events[u].push(o):(t._events[u]=o,t._eventsCount++),t}function s(t,e){0==--t._eventsCount?t._events=new r:delete t._events[e]}function o(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(i=!1)),o.prototype.eventNames=function(){var t,r,n=[];if(0===this._eventsCount)return n;for(r in t=this._events)e.call(t,r)&&n.push(i?r.slice(1):r);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},o.prototype.listeners=function(t){var e=i?i+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,a=r.length,s=new Array(a);n<a;n++)s[n]=r[n].fn;return s},o.prototype.listenerCount=function(t){var e=i?i+t:t,r=this._events[e];return r?r.fn?1:r.length:0},o.prototype.emit=function(t,e,r,n,a,s){var o=i?i+t:t;if(!this._events[o])return!1;var u,p,c=this._events[o],l=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),l){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,r),!0;case 4:return c.fn.call(c.context,e,r,n),!0;case 5:return c.fn.call(c.context,e,r,n,a),!0;case 6:return c.fn.call(c.context,e,r,n,a,s),!0}for(p=1,u=new Array(l-1);p<l;p++)u[p-1]=arguments[p];c.fn.apply(c.context,u)}else{var d,f=c.length;for(p=0;p<f;p++)switch(c[p].once&&this.removeListener(t,c[p].fn,void 0,!0),l){case 1:c[p].fn.call(c[p].context);break;case 2:c[p].fn.call(c[p].context,e);break;case 3:c[p].fn.call(c[p].context,e,r);break;case 4:c[p].fn.call(c[p].context,e,r,n);break;default:if(!u)for(d=1,u=new Array(l-1);d<l;d++)u[d-1]=arguments[d];c[p].fn.apply(c[p].context,u)}}return!0},o.prototype.on=function(t,e,i){return a(this,t,e,i,!1)},o.prototype.once=function(t,e,i){return a(this,t,e,i,!0)},o.prototype.removeListener=function(t,e,r,n){var a=i?i+t:t;if(!this._events[a])return this;if(!e)return s(this,a),this;var o=this._events[a];if(o.fn)o.fn!==e||n&&!o.once||r&&o.context!==r||s(this,a);else{for(var u=0,p=[],c=o.length;u<c;u++)(o[u].fn!==e||n&&!o[u].once||r&&o[u].context!==r)&&p.push(o[u]);p.length?this._events[a]=1===p.length?p[0]:p:s(this,a)}return this},o.prototype.removeAllListeners=function(t){var e;return t?(e=i?i+t:t,this._events[e]&&s(this,e)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=i,o.EventEmitter=o,t.exports=o}(D);var C,I={exports:{}},R="object"==typeof Reflect?Reflect:null,L=R&&"function"==typeof R.apply?R.apply:function(t,e,i){return Function.prototype.apply.call(t,e,i)};C=R&&"function"==typeof R.ownKeys?R.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var M=Number.isNaN||function(t){return t!=t};function N(){N.init.call(this)}I.exports=N,I.exports.once=function(t,e){return new Promise((function(i,r){function n(i){t.removeListener(e,a),r(i)}function a(){"function"==typeof t.removeListener&&t.removeListener("error",n),i([].slice.call(arguments))}X(t,e,a,{once:!0}),"error"!==e&&function(t,e,i){"function"==typeof t.on&&X(t,"error",e,i)}(t,n,{once:!0})}))},N.EventEmitter=N,N.prototype._events=void 0,N.prototype._eventsCount=0,N.prototype._maxListeners=void 0;var j=10;function F(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function B(t){return void 0===t._maxListeners?N.defaultMaxListeners:t._maxListeners}function z(t,e,i,r){var n,a,s,o;if(F(i),void 0===(a=t._events)?(a=t._events=Object.create(null),t._eventsCount=0):(void 0!==a.newListener&&(t.emit("newListener",e,i.listener?i.listener:i),a=t._events),s=a[e]),void 0===s)s=a[e]=i,++t._eventsCount;else if("function"==typeof s?s=a[e]=r?[i,s]:[s,i]:r?s.unshift(i):s.push(i),(n=B(t))>0&&s.length>n&&!s.warned){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=s.length,o=u,console&&console.warn&&console.warn(o)}return t}function G(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function V(t,e,i){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:i},n=G.bind(r);return n.listener=i,r.wrapFn=n,n}function W(t,e,i){var r=t._events;if(void 0===r)return[];var n=r[e];return void 0===n?[]:"function"==typeof n?i?[n.listener||n]:[n]:i?function(t){for(var e=new Array(t.length),i=0;i<e.length;++i)e[i]=t[i].listener||t[i];return e}(n):q(n,n.length)}function $(t){var e=this._events;if(void 0!==e){var i=e[t];if("function"==typeof i)return 1;if(void 0!==i)return i.length}return 0}function q(t,e){for(var i=new Array(e),r=0;r<e;++r)i[r]=t[r];return i}function X(t,e,i,r){if("function"==typeof t.on)r.once?t.once(e,i):t.on(e,i);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function n(a){r.once&&t.removeEventListener(e,n),i(a)}))}}Object.defineProperty(N,"defaultMaxListeners",{enumerable:!0,get:function(){return j},set:function(t){if("number"!=typeof t||t<0||M(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");j=t}}),N.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},N.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||M(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},N.prototype.getMaxListeners=function(){return B(this)},N.prototype.emit=function(t){for(var e=[],i=1;i<arguments.length;i++)e.push(arguments[i]);var r="error"===t,n=this._events;if(void 0!==n)r=r&&void 0===n.error;else if(!r)return!1;if(r){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var o=n[t];if(void 0===o)return!1;if("function"==typeof o)L(o,this,e);else{var u=o.length,p=q(o,u);for(i=0;i<u;++i)L(p[i],this,e)}return!0},N.prototype.addListener=function(t,e){return z(this,t,e,!1)},N.prototype.on=N.prototype.addListener,N.prototype.prependListener=function(t,e){return z(this,t,e,!0)},N.prototype.once=function(t,e){return F(e),this.on(t,V(this,t,e)),this},N.prototype.prependOnceListener=function(t,e){return F(e),this.prependListener(t,V(this,t,e)),this},N.prototype.removeListener=function(t,e){var i,r,n,a,s;if(F(e),void 0===(r=this._events))return this;if(void 0===(i=r[t]))return this;if(i===e||i.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,i.listener||e));else if("function"!=typeof i){for(n=-1,a=i.length-1;a>=0;a--)if(i[a]===e||i[a].listener===e){s=i[a].listener,n=a;break}if(n<0)return this;0===n?i.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(i,n),1===i.length&&(r[t]=i[0]),void 0!==r.removeListener&&this.emit("removeListener",t,s||e)}return this},N.prototype.off=N.prototype.removeListener,N.prototype.removeAllListeners=function(t){var e,i,r;if(void 0===(i=this._events))return this;if(void 0===i.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==i[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete i[t]),this;if(0===arguments.length){var n,a=Object.keys(i);for(r=0;r<a.length;++r)"removeListener"!==(n=a[r])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=i[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},N.prototype.listeners=function(t){return W(this,t,!0)},N.prototype.rawListeners=function(t){return W(this,t,!1)},N.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):$.call(t,e)},N.prototype.listenerCount=$,N.prototype.eventNames=function(){return this._eventsCount>0?C(this._events):[]};var H=I.exports,Y={exports:{}};!function(t){function e(t){var e={};function i(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.i=function(t){return t},i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},i.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/",i.oe=function(t){throw console.error(t),t};var r=i(i.s=ENTRY_MODULE);return r.default||r}var i="[\\.|\\-|\\+|\\w|/|@]+",r="\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)";function n(t){return(t+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function a(t,e,a){var s={};s[a]=[];var o=e.toString(),u=o.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!u)return s;for(var p,c=u[1],l=new RegExp("(\\\\n|\\W)"+n(c)+r,"g");p=l.exec(o);)"dll-reference"!==p[3]&&s[a].push(p[3]);for(l=new RegExp("\\("+n(c)+'\\("(dll-reference\\s('+i+'))"\\)\\)'+r,"g");p=l.exec(o);)t[p[2]]||(s[a].push(p[1]),t[p[2]]=__webpack_require__(p[1]).m),s[p[2]]=s[p[2]]||[],s[p[2]].push(p[4]);for(var d,f=Object.keys(s),h=0;h<f.length;h++)for(var g=0;g<s[f[h]].length;g++)d=s[f[h]][g],isNaN(1*d)||(s[f[h]][g]=1*s[f[h]][g]);return s}function s(t){return Object.keys(t).reduce((function(e,i){return e||t[i].length>0}),!1)}Y.exports=function(t,i){i=i||{};var r={main:__webpack_modules__},n=i.all?{main:Object.keys(r.main)}:function(t,e){for(var i={main:[e]},r={main:[]},n={main:{}};s(i);)for(var o=Object.keys(i),u=0;u<o.length;u++){var p=o[u],c=i[p].pop();if(n[p]=n[p]||{},!n[p][c]&&t[p][c]){n[p][c]=!0,r[p]=r[p]||[],r[p].push(c);for(var l=a(t,t[p][c],p),d=Object.keys(l),f=0;f<d.length;f++)i[d[f]]=i[d[f]]||[],i[d[f]]=i[d[f]].concat(l[d[f]])}}return r}(r,t),o="";Object.keys(n).filter((function(t){return"main"!==t})).forEach((function(t){for(var i=0;n[t][i];)i++;n[t].push(i),r[t][i]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",o=o+"var "+t+" = ("+e.toString().replace("ENTRY_MODULE",JSON.stringify(i))+")({"+n[t].map((function(e){return JSON.stringify(e)+": "+r[t][e].toString()})).join(",")+"});\n"})),o=o+"new (("+e.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+n.main.map((function(t){return JSON.stringify(t)+": "+r.main[t].toString()})).join(",")+"}))(self);";var u=new window.Blob([o],{type:"text/javascript"});if(i.bare)return u;var p=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(u),c=new window.Worker(p);return c.objectURL=p,c}}();var K,J,Q,Z,tt,et=i(Y.exports),it={exports:{}};K=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#[^]*)?$/,J=/^([^\/?#]*)([^]*)$/,Q=/(?:\/|^)\.(?=\/)/g,Z=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,it.exports=tt={buildAbsoluteURL:function(t,e,i){if(i=i||{},t=t.trim(),!(e=e.trim())){if(!i.alwaysNormalize)return t;var r=tt.parseURL(t);if(!r)throw new Error("Error trying to parse base URL.");return r.path=tt.normalizePath(r.path),tt.buildURLFromParts(r)}var n=tt.parseURL(e);if(!n)throw new Error("Error trying to parse relative URL.");if(n.scheme)return i.alwaysNormalize?(n.path=tt.normalizePath(n.path),tt.buildURLFromParts(n)):e;var a=tt.parseURL(t);if(!a)throw new Error("Error trying to parse base URL.");if(!a.netLoc&&a.path&&"/"!==a.path[0]){var s=J.exec(a.path);a.netLoc=s[1],a.path=s[2]}a.netLoc&&!a.path&&(a.path="/");var o={scheme:a.scheme,netLoc:n.netLoc,path:null,params:n.params,query:n.query,fragment:n.fragment};if(!n.netLoc&&(o.netLoc=a.netLoc,"/"!==n.path[0]))if(n.path){var u=a.path,p=u.substring(0,u.lastIndexOf("/")+1)+n.path;o.path=tt.normalizePath(p)}else o.path=a.path,n.params||(o.params=a.params,n.query||(o.query=a.query));return null===o.path&&(o.path=i.alwaysNormalize?tt.normalizePath(n.path):n.path),tt.buildURLFromParts(o)},parseURL:function(t){var e=K.exec(t);return e?{scheme:e[1]||"",netLoc:e[2]||"",path:e[3]||"",params:e[4]||"",query:e[5]||"",fragment:e[6]||""}:null},normalizePath:function(t){for(t=t.split("").reverse().join("").replace(Q,"");t.length!==(t=t.replace(Z,"")).length;);return t.split("").reverse().join("")},buildURLFromParts:function(t){return t.scheme+t.netLoc+t.path+t.params+t.query+t.fragment}};var rt={exports:{}};!function(t){function e(t){var e={};function i(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.i=function(t){return t},i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},i.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/",i.oe=function(t){throw console.error(t),t};var r=i(i.s=ENTRY_MODULE);return r.default||r}var i="[\\.|\\-|\\+|\\w|/|@]+",r="\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)";function n(t){return(t+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function a(t,e,a){var s={};s[a]=[];var o=e.toString(),u=o.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!u)return s;for(var p,c=u[1],l=new RegExp("(\\\\n|\\W)"+n(c)+r,"g");p=l.exec(o);)"dll-reference"!==p[3]&&s[a].push(p[3]);for(l=new RegExp("\\("+n(c)+'\\("(dll-reference\\s('+i+'))"\\)\\)'+r,"g");p=l.exec(o);)t[p[2]]||(s[a].push(p[1]),t[p[2]]=__webpack_require__(p[1]).m),s[p[2]]=s[p[2]]||[],s[p[2]].push(p[4]);for(var d,f=Object.keys(s),h=0;h<f.length;h++)for(var g=0;g<s[f[h]].length;g++)d=s[f[h]][g],isNaN(1*d)||(s[f[h]][g]=1*s[f[h]][g]);return s}function s(t){return Object.keys(t).reduce((function(e,i){return e||t[i].length>0}),!1)}rt.exports=function(t,i){i=i||{};var r={main:__webpack_modules__},n=i.all?{main:Object.keys(r.main)}:function(t,e){for(var i={main:[e]},r={main:[]},n={main:{}};s(i);)for(var o=Object.keys(i),u=0;u<o.length;u++){var p=o[u],c=i[p].pop();if(n[p]=n[p]||{},!n[p][c]&&t[p][c]){n[p][c]=!0,r[p]=r[p]||[],r[p].push(c);for(var l=a(t,t[p][c],p),d=Object.keys(l),f=0;f<d.length;f++)i[d[f]]=i[d[f]]||[],i[d[f]]=i[d[f]].concat(l[d[f]])}}return r}(r,t),o="";Object.keys(n).filter((function(t){return"main"!==t})).forEach((function(t){for(var i=0;n[t][i];)i++;n[t].push(i),r[t][i]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",o=o+"var "+t+" = ("+e.toString().replace("ENTRY_MODULE",JSON.stringify(i))+")({"+n[t].map((function(e){return JSON.stringify(e)+": "+r[t][e].toString()})).join(",")+"});\n"})),o=o+"new (("+e.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+n.main.map((function(t){return JSON.stringify(t)+": "+r.main[t].toString()})).join(",")+"}))(self);";var u=new window.Blob([o],{type:"text/javascript"});if(i.bare)return u;var p=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(u),c=new window.Worker(p);return c.objectURL=p,c}}();var nt=i(rt.exports),at=Object.freeze(t({__proto__:null,[Symbol.toStringTag]:"Module",default:nt},[rt.exports])),st={exports:{}};!function(t){var e=Object.prototype.hasOwnProperty,i="~";function r(){}function n(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function a(t,e,r,a,s){if("function"!=typeof r)throw new TypeError("The listener must be a function");var o=new n(r,a||t,s),u=i?i+e:e;return t._events[u]?t._events[u].fn?t._events[u]=[t._events[u],o]:t._events[u].push(o):(t._events[u]=o,t._eventsCount++),t}function s(t,e){0==--t._eventsCount?t._events=new r:delete t._events[e]}function o(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(i=!1)),o.prototype.eventNames=function(){var t,r,n=[];if(0===this._eventsCount)return n;for(r in t=this._events)e.call(t,r)&&n.push(i?r.slice(1):r);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},o.prototype.listeners=function(t){var e=i?i+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,a=r.length,s=new Array(a);n<a;n++)s[n]=r[n].fn;return s},o.prototype.listenerCount=function(t){var e=i?i+t:t,r=this._events[e];return r?r.fn?1:r.length:0},o.prototype.emit=function(t,e,r,n,a,s){var o=i?i+t:t;if(!this._events[o])return!1;var u,p,c=this._events[o],l=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),l){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,r),!0;case 4:return c.fn.call(c.context,e,r,n),!0;case 5:return c.fn.call(c.context,e,r,n,a),!0;case 6:return c.fn.call(c.context,e,r,n,a,s),!0}for(p=1,u=new Array(l-1);p<l;p++)u[p-1]=arguments[p];c.fn.apply(c.context,u)}else{var d,f=c.length;for(p=0;p<f;p++)switch(c[p].once&&this.removeListener(t,c[p].fn,void 0,!0),l){case 1:c[p].fn.call(c[p].context);break;case 2:c[p].fn.call(c[p].context,e);break;case 3:c[p].fn.call(c[p].context,e,r);break;case 4:c[p].fn.call(c[p].context,e,r,n);break;default:if(!u)for(d=1,u=new Array(l-1);d<l;d++)u[d-1]=arguments[d];c[p].fn.apply(c[p].context,u)}}return!0},o.prototype.on=function(t,e,i){return a(this,t,e,i,!1)},o.prototype.once=function(t,e,i){return a(this,t,e,i,!0)},o.prototype.removeListener=function(t,e,r,n){var a=i?i+t:t;if(!this._events[a])return this;if(!e)return s(this,a),this;var o=this._events[a];if(o.fn)o.fn!==e||n&&!o.once||r&&o.context!==r||s(this,a);else{for(var u=0,p=[],c=o.length;u<c;u++)(o[u].fn!==e||n&&!o[u].once||r&&o[u].context!==r)&&p.push(o[u]);p.length?this._events[a]=1===p.length?p[0]:p:s(this,a)}return this},o.prototype.removeAllListeners=function(t){var e;return t?(e=i?i+t:t,this._events[e]&&s(this,e)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=i,o.EventEmitter=o,t.exports=o}(st);var ot=function(){this.init=function(){var t={};this.on=function(e,i){t[e]||(t[e]=[]),t[e]=t[e].concat(i)},this.off=function(e,i){var r;return!!t[e]&&(r=t[e].indexOf(i),t[e]=t[e].slice(),t[e].splice(r,1),r>-1)},this.trigger=function(e){var i,r,n,a;if(i=t[e])if(2===arguments.length)for(n=i.length,r=0;r<n;++r)i[r].call(this,arguments[1]);else{for(a=[],r=arguments.length,r=1;r<arguments.length;++r)a.push(arguments[r]);for(n=i.length,r=0;r<n;++r)i[r].apply(this,a)}},this.dispose=function(){t={}}}};ot.prototype.pipe=function(t){return this.on("data",(function(e){t.push(e)})),this.on("done",(function(e){t.flush(e)})),this.on("partialdone",(function(e){t.partialFlush(e)})),this.on("endedtimeline",(function(e){t.endTimeline(e)})),this.on("reset",(function(e){t.reset(e)})),t},ot.prototype.push=function(t){this.trigger("data",t)},ot.prototype.flush=function(t){this.trigger("done",t)},ot.prototype.partialFlush=function(t){this.trigger("partialdone",t)},ot.prototype.endTimeline=function(t){this.trigger("endedtimeline",t)},ot.prototype.reset=function(t){this.trigger("reset",t)};var ut,pt,ct,lt,dt,ft,ht,gt=ot;dt=function(t,e){return ut(lt(t,e))},ft=function(t,e){return pt(ct(t),e)},ht=function(t,e,i){return ct(i?t:t-e)};var mt,yt={ONE_SECOND_IN_TS:9e4,secondsToVideoTs:ut=function(t){return 9e4*t},secondsToAudioTs:pt=function(t,e){return t*e},videoTsToSeconds:ct=function(t){return t/9e4},audioTsToSeconds:lt=function(t,e){return t/e},audioTsToVideoTs:dt,videoTsToAudioTs:ft,metadataTsToSeconds:ht},bt=yt.ONE_SECOND_IN_TS,vt=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];(mt=function(t){var e,i=0;mt.prototype.init.call(this),this.skipWarn_=function(t,e){this.trigger("log",{level:"warn",message:"adts skiping bytes "+t+" to "+e+" in frame "+i+" outside syncword"})},this.push=function(r){var n,a,s,o,u,p=0;if(t||(i=0),"audio"===r.type){var c;for(e&&e.length?(s=e,(e=new Uint8Array(s.byteLength+r.data.byteLength)).set(s),e.set(r.data,s.byteLength)):e=r.data;p+7<e.length;)if(255===e[p]&&240==(246&e[p+1])){if("number"==typeof c&&(this.skipWarn_(c,p),c=null),a=2*(1&~e[p+1]),n=(3&e[p+3])<<11|e[p+4]<<3|(224&e[p+5])>>5,u=(o=1024*(1+(3&e[p+6])))*bt/vt[(60&e[p+2])>>>2],e.byteLength-p<n)break;this.trigger("data",{pts:r.pts+i*u,dts:r.dts+i*u,sampleCount:o,audioobjecttype:1+(e[p+2]>>>6&3),channelcount:(1&e[p+2])<<2|(192&e[p+3])>>>6,samplerate:vt[(60&e[p+2])>>>2],samplingfrequencyindex:(60&e[p+2])>>>2,samplesize:16,data:e.subarray(p+7+a,p+n)}),i++,p+=n}else"number"!=typeof c&&(c=p),p++;"number"==typeof c&&(this.skipWarn_(c,p),c=null),e=e.subarray(p)}},this.flush=function(){i=0,this.trigger("done")},this.reset=function(){e=void 0,this.trigger("reset")},this.endTimeline=function(){e=void 0,this.trigger("endedtimeline")}}).prototype=new gt;var wt,St,Tt,_t=mt,At=gt,Et=function(t){var e=t.byteLength,i=0,r=0;this.length=function(){return 8*e},this.bitsAvailable=function(){return 8*e+r},this.loadWord=function(){var n=t.byteLength-e,a=new Uint8Array(4),s=Math.min(4,e);if(0===s)throw new Error("no bytes available");a.set(t.subarray(n,n+s)),i=new DataView(a.buffer).getUint32(0),r=8*s,e-=s},this.skipBits=function(t){var n;r>t?(i<<=t,r-=t):(t-=r,t-=8*(n=Math.floor(t/8)),e-=n,this.loadWord(),i<<=t,r-=t)},this.readBits=function(t){var n=Math.min(r,t),a=i>>>32-n;return(r-=n)>0?i<<=n:e>0&&this.loadWord(),(n=t-n)>0?a<<n|this.readBits(n):a},this.skipLeadingZeros=function(){var t;for(t=0;t<r;++t)if(0!=(i&2147483648>>>t))return i<<=t,r-=t,t;return this.loadWord(),t+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var t=this.skipLeadingZeros();return this.readBits(t+1)-1},this.readExpGolomb=function(){var t=this.readUnsignedExpGolomb();return 1&t?1+t>>>1:-1*(t>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};(St=function(){var t,e,i=0;St.prototype.init.call(this),this.push=function(r){var n;e?((n=new Uint8Array(e.byteLength+r.data.byteLength)).set(e),n.set(r.data,e.byteLength),e=n):e=r.data;for(var a=e.byteLength;i<a-3;i++)if(1===e[i+2]){t=i+5;break}for(;t<a;)switch(e[t]){case 0:if(0!==e[t-1]){t+=2;break}if(0!==e[t-2]){t++;break}i+3!==t-2&&this.trigger("data",e.subarray(i+3,t-2));do{t++}while(1!==e[t]&&t<a);i=t-2,t+=3;break;case 1:if(0!==e[t-1]||0!==e[t-2]){t+=3;break}this.trigger("data",e.subarray(i+3,t-2)),i=t-2,t+=3;break;default:t+=3}e=e.subarray(i),t-=i,i=0},this.reset=function(){e=null,i=0,this.trigger("reset")},this.flush=function(){e&&e.byteLength>3&&this.trigger("data",e.subarray(i+3)),e=null,i=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}}).prototype=new At,Tt={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},(wt=function(){var t,e,i,r,n,a,s,o=new St;wt.prototype.init.call(this),t=this,this.push=function(t){"video"===t.type&&(e=t.trackId,i=t.pts,r=t.dts,o.push(t))},o.on("data",(function(s){var o={trackId:e,pts:i,dts:r,data:s,nalUnitTypeCode:31&s[0]};switch(o.nalUnitTypeCode){case 5:o.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:o.nalUnitType="sei_rbsp",o.escapedRBSP=n(s.subarray(1));break;case 7:o.nalUnitType="seq_parameter_set_rbsp",o.escapedRBSP=n(s.subarray(1)),o.config=a(o.escapedRBSP);break;case 8:o.nalUnitType="pic_parameter_set_rbsp";break;case 9:o.nalUnitType="access_unit_delimiter_rbsp"}t.trigger("data",o)})),o.on("done",(function(){t.trigger("done")})),o.on("partialdone",(function(){t.trigger("partialdone")})),o.on("reset",(function(){t.trigger("reset")})),o.on("endedtimeline",(function(){t.trigger("endedtimeline")})),this.flush=function(){o.flush()},this.partialFlush=function(){o.partialFlush()},this.reset=function(){o.reset()},this.endTimeline=function(){o.endTimeline()},s=function(t,e){var i,r=8,n=8;for(i=0;i<t;i++)0!==n&&(n=(r+e.readExpGolomb()+256)%256),r=0===n?r:n},n=function(t){for(var e,i,r=t.byteLength,n=[],a=1;a<r-2;)0===t[a]&&0===t[a+1]&&3===t[a+2]?(n.push(a+2),a+=2):a++;if(0===n.length)return t;e=r-n.length,i=new Uint8Array(e);var s=0;for(a=0;a<e;s++,a++)s===n[0]&&(s++,n.shift()),i[a]=t[s];return i},a=function(t){var e,i,r,n,a,o,u,p,c,l,d,f,h=0,g=0,m=0,y=0,b=[1,1];if(i=(e=new Et(t)).readUnsignedByte(),n=e.readUnsignedByte(),r=e.readUnsignedByte(),e.skipUnsignedExpGolomb(),Tt[i]&&(3===(a=e.readUnsignedExpGolomb())&&e.skipBits(1),e.skipUnsignedExpGolomb(),e.skipUnsignedExpGolomb(),e.skipBits(1),e.readBoolean()))for(d=3!==a?8:12,f=0;f<d;f++)e.readBoolean()&&s(f<6?16:64,e);if(e.skipUnsignedExpGolomb(),0===(o=e.readUnsignedExpGolomb()))e.readUnsignedExpGolomb();else if(1===o)for(e.skipBits(1),e.skipExpGolomb(),e.skipExpGolomb(),u=e.readUnsignedExpGolomb(),f=0;f<u;f++)e.skipExpGolomb();if(e.skipUnsignedExpGolomb(),e.skipBits(1),p=e.readUnsignedExpGolomb(),c=e.readUnsignedExpGolomb(),0===(l=e.readBits(1))&&e.skipBits(1),e.skipBits(1),e.readBoolean()&&(h=e.readUnsignedExpGolomb(),g=e.readUnsignedExpGolomb(),m=e.readUnsignedExpGolomb(),y=e.readUnsignedExpGolomb()),e.readBoolean()&&e.readBoolean()){switch(e.readUnsignedByte()){case 1:b=[1,1];break;case 2:b=[12,11];break;case 3:b=[10,11];break;case 4:b=[16,11];break;case 5:b=[40,33];break;case 6:b=[24,11];break;case 7:b=[20,11];break;case 8:b=[32,11];break;case 9:b=[80,33];break;case 10:b=[18,11];break;case 11:b=[15,11];break;case 12:b=[64,33];break;case 13:b=[160,99];break;case 14:b=[4,3];break;case 15:b=[3,2];break;case 16:b=[2,1];break;case 255:b=[e.readUnsignedByte()<<8|e.readUnsignedByte(),e.readUnsignedByte()<<8|e.readUnsignedByte()]}b&&(b[0],b[1])}return{profileIdc:i,levelIdc:r,profileCompatibility:n,width:16*(p+1)-2*h-2*g,height:(2-l)*(c+1)*16-2*m-2*y,sarRatio:b}}}).prototype=new At;var kt,Ot,Pt,xt,Ut,Dt,Ct,It,Rt,Lt,Mt,Nt,jt,Ft,Bt,zt,Gt,Vt,Wt,$t,qt,Xt,Ht,Yt,Kt,Jt,Qt,Zt,te,ee,ie,re,ne,ae,se,oe,ue,pe,ce,le,de={H264Stream:wt,NalByteStream:St},fe={Adts:_t,h264:de},he=Math.pow(2,32)-1;!function(){var t;if(Xt={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(t in Xt)Xt.hasOwnProperty(t)&&(Xt[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);Ht=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),Kt=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),Yt=new Uint8Array([0,0,0,1]),Jt=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),Qt=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),Zt={video:Jt,audio:Qt},ie=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),ee=new Uint8Array([0,0,0,0,0,0,0,0]),re=new Uint8Array([0,0,0,0,0,0,0,0]),ne=re,ae=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),se=re,te=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),kt=function(t){var e,i,r=[],n=0;for(e=1;e<arguments.length;e++)r.push(arguments[e]);for(e=r.length;e--;)n+=r[e].byteLength;for(i=new Uint8Array(n+8),new DataView(i.buffer,i.byteOffset,i.byteLength).setUint32(0,i.byteLength),i.set(t,4),e=0,n=8;e<r.length;e++)i.set(r[e],n),n+=r[e].byteLength;return i},Ot=function(){return kt(Xt.dinf,kt(Xt.dref,ie))},Pt=function(t){return kt(Xt.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,t.audioobjecttype<<3|t.samplingfrequencyindex>>>1,t.samplingfrequencyindex<<7|t.channelcount<<3,6,1,2]))},Bt=function(t){return kt(Xt.hdlr,Zt[t])},Ft=function(t){var e=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,t.duration>>>24&255,t.duration>>>16&255,t.duration>>>8&255,255&t.duration,85,196,0,0]);return t.samplerate&&(e[12]=t.samplerate>>>24&255,e[13]=t.samplerate>>>16&255,e[14]=t.samplerate>>>8&255,e[15]=255&t.samplerate),kt(Xt.mdhd,e)},jt=function(t){return kt(Xt.mdia,Ft(t),Bt(t.type),Dt(t))},Ut=function(t){return kt(Xt.mfhd,new Uint8Array([0,0,0,0,(4278190080&t)>>24,(16711680&t)>>16,(65280&t)>>8,255&t]))},Dt=function(t){return kt(Xt.minf,"video"===t.type?kt(Xt.vmhd,te):kt(Xt.smhd,ee),Ot(),Gt(t))},Ct=function(t,e){for(var i=[],r=e.length;r--;)i[r]=Wt(e[r]);return kt.apply(null,[Xt.moof,Ut(t)].concat(i))},It=function(t){for(var e=t.length,i=[];e--;)i[e]=Mt(t[e]);return kt.apply(null,[Xt.moov,Lt(4294967295)].concat(i).concat(Rt(t)))},Rt=function(t){for(var e=t.length,i=[];e--;)i[e]=$t(t[e]);return kt.apply(null,[Xt.mvex].concat(i))},Lt=function(t){var e=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&t)>>24,(16711680&t)>>16,(65280&t)>>8,255&t,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return kt(Xt.mvhd,e)},zt=function(t){var e,i,r=t.samples||[],n=new Uint8Array(4+r.length);for(i=0;i<r.length;i++)e=r[i].flags,n[i+4]=e.dependsOn<<4|e.isDependedOn<<2|e.hasRedundancy;return kt(Xt.sdtp,n)},Gt=function(t){return kt(Xt.stbl,Vt(t),kt(Xt.stts,se),kt(Xt.stsc,ne),kt(Xt.stsz,ae),kt(Xt.stco,re))},Vt=function(t){return kt(Xt.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===t.type?oe(t):ue(t))},oe=function(t){var e,i,r=t.sps||[],n=t.pps||[],a=[],s=[];for(e=0;e<r.length;e++)a.push((65280&r[e].byteLength)>>>8),a.push(255&r[e].byteLength),a=a.concat(Array.prototype.slice.call(r[e]));for(e=0;e<n.length;e++)s.push((65280&n[e].byteLength)>>>8),s.push(255&n[e].byteLength),s=s.concat(Array.prototype.slice.call(n[e]));if(i=[Xt.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&t.width)>>8,255&t.width,(65280&t.height)>>8,255&t.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),kt(Xt.avcC,new Uint8Array([1,t.profileIdc,t.profileCompatibility,t.levelIdc,255].concat([r.length],a,[n.length],s))),kt(Xt.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],t.sarRatio){var o=t.sarRatio[0],u=t.sarRatio[1];i.push(kt(Xt.pasp,new Uint8Array([(4278190080&o)>>24,(16711680&o)>>16,(65280&o)>>8,255&o,(4278190080&u)>>24,(16711680&u)>>16,(65280&u)>>8,255&u])))}return kt.apply(null,i)},ue=function(t){return kt(Xt.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&t.channelcount)>>8,255&t.channelcount,(65280&t.samplesize)>>8,255&t.samplesize,0,0,0,0,(65280&t.samplerate)>>8,255&t.samplerate,0,0]),Pt(t))},Nt=function(t){var e=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&t.id)>>24,(16711680&t.id)>>16,(65280&t.id)>>8,255&t.id,0,0,0,0,(4278190080&t.duration)>>24,(16711680&t.duration)>>16,(65280&t.duration)>>8,255&t.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&t.width)>>8,255&t.width,0,0,(65280&t.height)>>8,255&t.height,0,0]);return kt(Xt.tkhd,e)},Wt=function(t){var e,i,r,n,a,s;return e=kt(Xt.tfhd,new Uint8Array([0,0,0,58,(4278190080&t.id)>>24,(16711680&t.id)>>16,(65280&t.id)>>8,255&t.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),a=Math.floor(t.baseMediaDecodeTime/(he+1)),s=Math.floor(t.baseMediaDecodeTime%(he+1)),i=kt(Xt.tfdt,new Uint8Array([1,0,0,0,a>>>24&255,a>>>16&255,a>>>8&255,255&a,s>>>24&255,s>>>16&255,s>>>8&255,255&s])),92,"audio"===t.type?(r=qt(t,92),kt(Xt.traf,e,i,r)):(n=zt(t),r=qt(t,n.length+92),kt(Xt.traf,e,i,r,n))},Mt=function(t){return t.duration=t.duration||4294967295,kt(Xt.trak,Nt(t),jt(t))},$t=function(t){var e=new Uint8Array([0,0,0,0,(4278190080&t.id)>>24,(16711680&t.id)>>16,(65280&t.id)>>8,255&t.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==t.type&&(e[e.length-1]=0),kt(Xt.trex,e)},le=function(t,e){var i=0,r=0,n=0,a=0;return t.length&&(void 0!==t[0].duration&&(i=1),void 0!==t[0].size&&(r=2),void 0!==t[0].flags&&(n=4),void 0!==t[0].compositionTimeOffset&&(a=8)),[0,0,i|r|n|a,1,(4278190080&t.length)>>>24,(16711680&t.length)>>>16,(65280&t.length)>>>8,255&t.length,(4278190080&e)>>>24,(16711680&e)>>>16,(65280&e)>>>8,255&e]},ce=function(t,e){var i,r,n,a,s,o;for(e+=20+16*(a=t.samples||[]).length,n=le(a,e),(r=new Uint8Array(n.length+16*a.length)).set(n),i=n.length,o=0;o<a.length;o++)s=a[o],r[i++]=(4278190080&s.duration)>>>24,r[i++]=(16711680&s.duration)>>>16,r[i++]=(65280&s.duration)>>>8,r[i++]=255&s.duration,r[i++]=(4278190080&s.size)>>>24,r[i++]=(16711680&s.size)>>>16,r[i++]=(65280&s.size)>>>8,r[i++]=255&s.size,r[i++]=s.flags.isLeading<<2|s.flags.dependsOn,r[i++]=s.flags.isDependedOn<<6|s.flags.hasRedundancy<<4|s.flags.paddingValue<<1|s.flags.isNonSyncSample,r[i++]=61440&s.flags.degradationPriority,r[i++]=15&s.flags.degradationPriority,r[i++]=(4278190080&s.compositionTimeOffset)>>>24,r[i++]=(16711680&s.compositionTimeOffset)>>>16,r[i++]=(65280&s.compositionTimeOffset)>>>8,r[i++]=255&s.compositionTimeOffset;return kt(Xt.trun,r)},pe=function(t,e){var i,r,n,a,s,o;for(e+=20+8*(a=t.samples||[]).length,n=le(a,e),(i=new Uint8Array(n.length+8*a.length)).set(n),r=n.length,o=0;o<a.length;o++)s=a[o],i[r++]=(4278190080&s.duration)>>>24,i[r++]=(16711680&s.duration)>>>16,i[r++]=(65280&s.duration)>>>8,i[r++]=255&s.duration,i[r++]=(4278190080&s.size)>>>24,i[r++]=(16711680&s.size)>>>16,i[r++]=(65280&s.size)>>>8,i[r++]=255&s.size;return kt(Xt.trun,i)},qt=function(t,e){return"audio"===t.type?pe(t,e):ce(t,e)};var ge,me,ye,be,ve,we,Se={ftyp:xt=function(){return kt(Xt.ftyp,Ht,Yt,Ht,Kt)},mdat:function(t){return kt(Xt.mdat,t)},moof:Ct,moov:It,initSegment:function(t){var e,i=xt(),r=It(t);return(e=new Uint8Array(i.byteLength+r.byteLength)).set(i),e.set(r,i.byteLength),e}},Te=function(t){return t>>>0},_e=function(t){var e="";return e+=String.fromCharCode(t[0]),e+=String.fromCharCode(t[1]),e+=String.fromCharCode(t[2]),e+=String.fromCharCode(t[3])},Ae=Te,Ee=_e,ke=function t(e,i){var r,n,a,s,o,u=[];if(!i.length)return null;for(r=0;r<e.byteLength;)n=Ae(e[r]<<24|e[r+1]<<16|e[r+2]<<8|e[r+3]),a=Ee(e.subarray(r+4,r+8)),s=n>1?r+n:e.byteLength,a===i[0]&&(1===i.length?u.push(e.subarray(r+8,s)):(o=t(e.subarray(r+8,s),i.slice(1))).length&&(u=u.concat(o))),r=s;return u},Oe=function(t){var e,i=new DataView(t.buffer,t.byteOffset,t.byteLength),r={version:t[0],flags:new Uint8Array(t.subarray(1,4)),trackId:i.getUint32(4)},n=1&r.flags[2],a=2&r.flags[2],s=8&r.flags[2],o=16&r.flags[2],u=32&r.flags[2],p=65536&r.flags[0],c=131072&r.flags[0];return e=8,n&&(e+=4,r.baseDataOffset=i.getUint32(12),e+=4),a&&(r.sampleDescriptionIndex=i.getUint32(e),e+=4),s&&(r.defaultSampleDuration=i.getUint32(e),e+=4),o&&(r.defaultSampleSize=i.getUint32(e),e+=4),u&&(r.defaultSampleFlags=i.getUint32(e)),p&&(r.durationIsEmpty=!0),!n&&c&&(r.baseDataOffsetIsMoof=!0),r},Pe=function(t){return{isLeading:(12&t[0])>>>2,dependsOn:3&t[0],isDependedOn:(192&t[1])>>>6,hasRedundancy:(48&t[1])>>>4,paddingValue:(14&t[1])>>>1,isNonSyncSample:1&t[1],degradationPriority:t[2]<<8|t[3]}},xe=function(t){var e,i={version:t[0],flags:new Uint8Array(t.subarray(1,4)),samples:[]},r=new DataView(t.buffer,t.byteOffset,t.byteLength),n=1&i.flags[2],a=4&i.flags[2],s=1&i.flags[1],o=2&i.flags[1],u=4&i.flags[1],p=8&i.flags[1],c=r.getUint32(4),l=8;for(n&&(i.dataOffset=r.getInt32(l),l+=4),a&&c&&(e={flags:Pe(t.subarray(l,l+4))},l+=4,s&&(e.duration=r.getUint32(l),l+=4),o&&(e.size=r.getUint32(l),l+=4),p&&(1===i.version?e.compositionTimeOffset=r.getInt32(l):e.compositionTimeOffset=r.getUint32(l),l+=4),i.samples.push(e),c--);c--;)e={},s&&(e.duration=r.getUint32(l),l+=4),o&&(e.size=r.getUint32(l),l+=4),u&&(e.flags=Pe(t.subarray(l,l+4)),l+=4),p&&(1===i.version?e.compositionTimeOffset=r.getInt32(l):e.compositionTimeOffset=r.getUint32(l),l+=4),i.samples.push(e);return i},Ue=Te,De=function(t){var e={version:t[0],flags:new Uint8Array(t.subarray(1,4)),baseMediaDecodeTime:Ue(t[4]<<24|t[5]<<16|t[6]<<8|t[7])};return 1===e.version&&(e.baseMediaDecodeTime*=Math.pow(2,32),e.baseMediaDecodeTime+=Ue(t[8]<<24|t[9]<<16|t[10]<<8|t[11])),e},Ce=Te,Ie=function(t){return("00"+t.toString(16)).slice(-2)},Re=ke,Le=_e,Me=Oe,Ne=xe,je=De;ge=function(t){return Re(t,["moov","trak"]).reduce((function(t,e){var i,r,n,a,s;return(i=Re(e,["tkhd"])[0])?(r=i[0],a=Ce(i[n=0===r?12:20]<<24|i[n+1]<<16|i[n+2]<<8|i[n+3]),(s=Re(e,["mdia","mdhd"])[0])?(n=0===(r=s[0])?12:20,t[a]=Ce(s[n]<<24|s[n+1]<<16|s[n+2]<<8|s[n+3]),t):null):null}),{})},me=function(t,e){var i,r,n;return i=Re(e,["moof","traf"]),r=[].concat.apply([],i.map((function(e){return Re(e,["tfhd"]).map((function(i){var r,n,a;return r=Ce(i[4]<<24|i[5]<<16|i[6]<<8|i[7]),n=t[r]||9e4,(a="number"!=typeof(a=Re(e,["tfdt"]).map((function(t){var e,i;return e=t[0],i=Ce(t[4]<<24|t[5]<<16|t[6]<<8|t[7]),1===e&&(i*=Math.pow(2,32),i+=Ce(t[8]<<24|t[9]<<16|t[10]<<8|t[11])),i}))[0])||isNaN(a)?1/0:a)/n}))}))),n=Math.min.apply(null,r),isFinite(n)?n:0},ye=function(t,e){var i,r=Re(e,["moof","traf"]),n=0,a=0;if(r&&r.length){var s=Re(r[0],["tfhd"])[0],o=Re(r[0],["trun"])[0],u=Re(r[0],["tfdt"])[0];if(s)i=Me(s).trackId;if(u)n=je(u).baseMediaDecodeTime;if(o){var p=Ne(o);p.samples&&p.samples.length&&(a=p.samples[0].compositionTimeOffset||0)}}return(n+a)/(t[i]||9e4)},be=function(t){var e=Re(t,["moov","trak"]),i=[];return e.forEach((function(t){var e=Re(t,["mdia","hdlr"]),r=Re(t,["tkhd"]);e.forEach((function(t,e){var n,a,s=Le(t.subarray(8,12)),o=r[e];"vide"===s&&(a=0===(n=new DataView(o.buffer,o.byteOffset,o.byteLength)).getUint8(0)?n.getUint32(12):n.getUint32(20),i.push(a))}))})),i},ve=function(t){var e=Re(t,["moov","trak"]),i=[];return e.forEach((function(t){var e,r,n={},a=Re(t,["tkhd"])[0];a&&(r=(e=new DataView(a.buffer,a.byteOffset,a.byteLength)).getUint8(0),n.id=0===r?e.getUint32(12):e.getUint32(20));var s=Re(t,["mdia","hdlr"])[0];if(s){var o=Le(s.subarray(8,12));n.type="vide"===o?"video":"soun"===o?"audio":o}var u=Re(t,["mdia","minf","stbl","stsd"])[0];if(u){var p=u.subarray(8);n.codec=Le(p.subarray(4,8));var c,l=Re(p,[n.codec])[0];l&&(/^[asm]vc[1-9]$/i.test(n.codec)?(c=l.subarray(78),"avcC"===Le(c.subarray(4,8))&&c.length>11?(n.codec+=".",n.codec+=Ie(c[9]),n.codec+=Ie(c[10]),n.codec+=Ie(c[11])):n.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(n.codec)?(c=l.subarray(28),"esds"===Le(c.subarray(4,8))&&c.length>20&&0!==c[19]?(n.codec+="."+Ie(c[19]),n.codec+="."+Ie(c[20]>>>2&63).replace(/^0/,"")):n.codec="mp4a.40.2"):n.codec=n.codec.toLowerCase())}var d=Re(t,["mdia","mdhd"])[0];d&&(n.timescale=we(d)),i.push(n)})),i};var Fe,Be={findBox:Re,parseType:Le,timescale:ge,startTime:me,compositionStartTime:ye,videoTrackIds:be,tracks:ve,getTimescaleFromMediaHeader:we=function(t){var e=0===t[0]?12:20;return Ce(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])}},ze=function(t,e){var i={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};return i.dataOffset=e,i.compositionTimeOffset=t.pts-t.dts,i.duration=t.duration,i.size=4*t.length,i.size+=t.byteLength,t.keyFrame&&(i.flags.dependsOn=2,i.flags.isNonSyncSample=0),i},Ge={groupNalsIntoFrames:function(t){var e,i,r=[],n=[];for(n.byteLength=0,n.nalCount=0,n.duration=0,r.byteLength=0,e=0;e<t.length;e++)"access_unit_delimiter_rbsp"===(i=t[e]).nalUnitType?(r.length&&(r.duration=i.dts-r.dts,n.byteLength+=r.byteLength,n.nalCount+=r.length,n.duration+=r.duration,n.push(r)),(r=[i]).byteLength=i.data.byteLength,r.pts=i.pts,r.dts=i.dts):("slice_layer_without_partitioning_rbsp_idr"===i.nalUnitType&&(r.keyFrame=!0),r.duration=i.dts-r.dts,r.byteLength+=i.data.byteLength,r.push(i));return n.length&&(!r.duration||r.duration<=0)&&(r.duration=n[n.length-1].duration),n.byteLength+=r.byteLength,n.nalCount+=r.length,n.duration+=r.duration,n.push(r),n},groupFramesIntoGops:function(t){var e,i,r=[],n=[];for(r.byteLength=0,r.nalCount=0,r.duration=0,r.pts=t[0].pts,r.dts=t[0].dts,n.byteLength=0,n.nalCount=0,n.duration=0,n.pts=t[0].pts,n.dts=t[0].dts,e=0;e<t.length;e++)(i=t[e]).keyFrame?(r.length&&(n.push(r),n.byteLength+=r.byteLength,n.nalCount+=r.nalCount,n.duration+=r.duration),(r=[i]).nalCount=i.length,r.byteLength=i.byteLength,r.pts=i.pts,r.dts=i.dts,r.duration=i.duration):(r.duration+=i.duration,r.nalCount+=i.length,r.byteLength+=i.byteLength,r.push(i));return n.length&&r.duration<=0&&(r.duration=n[n.length-1].duration),n.byteLength+=r.byteLength,n.nalCount+=r.nalCount,n.duration+=r.duration,n.push(r),n},extendFirstKeyFrame:function(t){var e;return!t[0][0].keyFrame&&t.length>1&&(e=t.shift(),t.byteLength-=e.byteLength,t.nalCount-=e.nalCount,t[0][0].dts=e.dts,t[0][0].pts=e.pts,t[0][0].duration+=e.duration),t},generateSampleTable:function(t,e){var i,r,n,a,s,o=e||0,u=[];for(i=0;i<t.length;i++)for(a=t[i],r=0;r<a.length;r++)s=a[r],o+=(n=ze(s,o)).size,u.push(n);return u},concatenateNalData:function(t){var e,i,r,n,a,s,o=0,u=t.byteLength,p=t.nalCount,c=new Uint8Array(u+4*p),l=new DataView(c.buffer);for(e=0;e<t.length;e++)for(n=t[e],i=0;i<n.length;i++)for(a=n[i],r=0;r<a.length;r++)s=a[r],l.setUint32(o,s.data.byteLength),o+=4,c.set(s.data,o),o+=s.data.byteLength;return c},generateSampleTableForFrame:function(t,e){var i,r=[];return i=ze(t,e||0),r.push(i),r},concatenateNalDataForFrame:function(t){var e,i,r=0,n=t.byteLength,a=t.length,s=new Uint8Array(n+4*a),o=new DataView(s.buffer);for(e=0;e<t.length;e++)i=t[e],o.setUint32(r,i.data.byteLength),r+=4,s.set(i.data,r),r+=i.data.byteLength;return s}},Ve=[33,16,5,32,164,27],We=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],$e=function(t){for(var e=[];t--;)e.push(0);return e},qe=function(){if(!Fe){var t={96e3:[Ve,[227,64],$e(154),[56]],88200:[Ve,[231],$e(170),[56]],64e3:[Ve,[248,192],$e(240),[56]],48e3:[Ve,[255,192],$e(268),[55,148,128],$e(54),[112]],44100:[Ve,[255,192],$e(268),[55,163,128],$e(84),[112]],32e3:[Ve,[255,192],$e(268),[55,234],$e(226),[112]],24e3:[Ve,[255,192],$e(268),[55,255,128],$e(268),[111,112],$e(126),[224]],16e3:[Ve,[255,192],$e(268),[55,255,128],$e(268),[111,255],$e(269),[223,108],$e(195),[1,192]],12e3:[We,$e(268),[3,127,248],$e(268),[6,255,240],$e(268),[13,255,224],$e(268),[27,253,128],$e(259),[56]],11025:[We,$e(268),[3,127,248],$e(268),[6,255,240],$e(268),[13,255,224],$e(268),[27,255,192],$e(268),[55,175,128],$e(108),[112]],8e3:[We,$e(268),[3,121,16],$e(47),[7]]};e=t,Fe=Object.keys(e).reduce((function(t,i){return t[i]=new Uint8Array(e[i].reduce((function(t,e){return t.concat(e)}),[])),t}),{})}var e;return Fe},Xe=yt,He={prefixWithSilence:function(t,e,i,r){var n,a,s,o,u,p=0,c=0,l=0;if(e.length&&(n=Xe.audioTsToVideoTs(t.baseMediaDecodeTime,t.samplerate),a=Math.ceil(Xe.ONE_SECOND_IN_TS/(t.samplerate/1024)),i&&r&&(p=n-Math.max(i,r),l=(c=Math.floor(p/a))*a),!(c<1||l>Xe.ONE_SECOND_IN_TS/2))){for((s=qe()[t.samplerate])||(s=e[0].data),o=0;o<c;o++)u=e[0],e.splice(0,0,{data:s,dts:u.dts-a,pts:u.pts-a});return t.baseMediaDecodeTime-=Math.floor(Xe.videoTsToAudioTs(l,t.samplerate)),l}},trimAdtsFramesByEarliestDts:function(t,e,i){return e.minSegmentDts>=i?t:(e.minSegmentDts=1/0,t.filter((function(t){return t.dts>=i&&(e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),e.minSegmentPts=e.minSegmentDts,!0)})))},generateSampleTable:function(t){var e,i,r=[];for(e=0;e<t.length;e++)i=t[e],r.push({size:i.data.byteLength,duration:1024});return r},concatenateFrameData:function(t){var e,i,r=0,n=new Uint8Array(function(t){var e,i=0;for(e=0;e<t.length;e++)i+=t[e].data.byteLength;return i}(t));for(e=0;e<t.length;e++)i=t[e],n.set(i.data,r),r+=i.data.byteLength;return n}},Ye=yt.ONE_SECOND_IN_TS,Ke={clearDtsInfo:function(t){delete t.minSegmentDts,delete t.maxSegmentDts,delete t.minSegmentPts,delete t.maxSegmentPts},calculateTrackBaseMediaDecodeTime:function(t,e){var i,r=t.minSegmentDts;return e||(r-=t.timelineStartInfo.dts),i=t.timelineStartInfo.baseMediaDecodeTime,i+=r,i=Math.max(0,i),"audio"===t.type&&(i*=t.samplerate/Ye,i=Math.floor(i)),i},collectDtsInfo:function(t,e){"number"==typeof e.pts&&(void 0===t.timelineStartInfo.pts&&(t.timelineStartInfo.pts=e.pts),void 0===t.minSegmentPts?t.minSegmentPts=e.pts:t.minSegmentPts=Math.min(t.minSegmentPts,e.pts),void 0===t.maxSegmentPts?t.maxSegmentPts=e.pts:t.maxSegmentPts=Math.max(t.maxSegmentPts,e.pts)),"number"==typeof e.dts&&(void 0===t.timelineStartInfo.dts&&(t.timelineStartInfo.dts=e.dts),void 0===t.minSegmentDts?t.minSegmentDts=e.dts:t.minSegmentDts=Math.min(t.minSegmentDts,e.dts),void 0===t.maxSegmentDts?t.maxSegmentDts=e.dts:t.maxSegmentDts=Math.max(t.maxSegmentDts,e.dts))}},Je={parseSei:function(t){for(var e=0,i={payloadType:-1,payloadSize:0},r=0,n=0;e<t.byteLength&&128!==t[e];){for(;255===t[e];)r+=255,e++;for(r+=t[e++];255===t[e];)n+=255,e++;if(n+=t[e++],!i.payload&&4===r){if("GA94"===String.fromCharCode(t[e+3],t[e+4],t[e+5],t[e+6])){i.payloadType=r,i.payloadSize=n,i.payload=t.subarray(e,e+n);break}i.payload=void 0}e+=n,r=0,n=0}return i},parseUserData:function(t){return 181!==t.payload[0]||49!=(t.payload[1]<<8|t.payload[2])||"GA94"!==String.fromCharCode(t.payload[3],t.payload[4],t.payload[5],t.payload[6])||3!==t.payload[7]?null:t.payload.subarray(8,t.payload.length-1)},parseCaptionPackets:function(t,e){var i,r,n,a,s=[];if(!(64&e[0]))return s;for(r=31&e[0],i=0;i<r;i++)a={type:3&e[(n=3*i)+2],pts:t},4&e[n+2]&&(a.ccData=e[n+3]<<8|e[n+4],s.push(a));return s},discardEmulationPreventionBytes:function(t){for(var e,i,r=t.byteLength,n=[],a=1;a<r-2;)0===t[a]&&0===t[a+1]&&3===t[a+2]?(n.push(a+2),a+=2):a++;if(0===n.length)return t;e=r-n.length,i=new Uint8Array(e);var s=0;for(a=0;a<e;s++,a++)s===n[0]&&(s++,n.shift()),i[a]=t[s];return i},USER_DATA_REGISTERED_ITU_T_T35:4},Qe=gt,Ze=Je,ti=function t(e){e=e||{},t.prototype.init.call(this),this.parse708captions_="boolean"!=typeof e.parse708captions||e.parse708captions,this.captionPackets_=[],this.ccStreams_=[new ci(0,0),new ci(0,1),new ci(1,0),new ci(1,1)],this.parse708captions_&&(this.cc708Stream_=new ai({captionServices:e.captionServices})),this.reset(),this.ccStreams_.forEach((function(t){t.on("data",this.trigger.bind(this,"data")),t.on("partialdone",this.trigger.bind(this,"partialdone")),t.on("done",this.trigger.bind(this,"done"))}),this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};(ti.prototype=new Qe).push=function(t){var e,i,r;if("sei_rbsp"===t.nalUnitType&&(e=Ze.parseSei(t.escapedRBSP)).payload&&e.payloadType===Ze.USER_DATA_REGISTERED_ITU_T_T35&&(i=Ze.parseUserData(e)))if(t.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(t.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));r=Ze.parseCaptionPackets(t.pts,i),this.captionPackets_=this.captionPackets_.concat(r),this.latestDts_!==t.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=t.dts}},ti.prototype.flushCCStreams=function(t){this.ccStreams_.forEach((function(e){return"flush"===t?e.flush():e.partialFlush()}),this)},ti.prototype.flushStream=function(t){this.captionPackets_.length?(this.captionPackets_.forEach((function(t,e){t.presortIndex=e})),this.captionPackets_.sort((function(t,e){return t.pts===e.pts?t.presortIndex-e.presortIndex:t.pts-e.pts})),this.captionPackets_.forEach((function(t){t.type<2?this.dispatchCea608Packet(t):this.dispatchCea708Packet(t)}),this),this.captionPackets_.length=0,this.flushCCStreams(t)):this.flushCCStreams(t)},ti.prototype.flush=function(){return this.flushStream("flush")},ti.prototype.partialFlush=function(){return this.flushStream("partialFlush")},ti.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach((function(t){t.reset()}))},ti.prototype.dispatchCea608Packet=function(t){this.setsTextOrXDSActive(t)?this.activeCea608Channel_[t.type]=null:this.setsChannel1Active(t)?this.activeCea608Channel_[t.type]=0:this.setsChannel2Active(t)&&(this.activeCea608Channel_[t.type]=1),null!==this.activeCea608Channel_[t.type]&&this.ccStreams_[(t.type<<1)+this.activeCea608Channel_[t.type]].push(t)},ti.prototype.setsChannel1Active=function(t){return 4096==(30720&t.ccData)},ti.prototype.setsChannel2Active=function(t){return 6144==(30720&t.ccData)},ti.prototype.setsTextOrXDSActive=function(t){return 256==(28928&t.ccData)||4138==(30974&t.ccData)||6186==(30974&t.ccData)},ti.prototype.dispatchCea708Packet=function(t){this.parse708captions_&&this.cc708Stream_.push(t)};var ei={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},ii=function(t){return 32<=t&&t<=127||160<=t&&t<=255},ri=function(t){this.windowNum=t,this.reset()};ri.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},ri.prototype.getText=function(){return this.rows.join("\n")},ri.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},ri.prototype.newLine=function(t){for(this.rows.length>=this.virtualRowCount&&"function"==typeof this.beforeRowOverflow&&this.beforeRowOverflow(t),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},ri.prototype.isEmpty=function(){return 0===this.rows.length||1===this.rows.length&&""===this.rows[0]},ri.prototype.addText=function(t){this.rows[this.rowIdx]+=t},ri.prototype.backspace=function(){if(!this.isEmpty()){var t=this.rows[this.rowIdx];this.rows[this.rowIdx]=t.substr(0,t.length-1)}};var ni=function(t,e,i){this.serviceNum=t,this.text="",this.currentWindow=new ri(-1),this.windows=[],this.stream=i,"string"==typeof e&&this.createTextDecoder(e)};ni.prototype.init=function(t,e){this.startPts=t;for(var i=0;i<8;i++)this.windows[i]=new ri(i),"function"==typeof e&&(this.windows[i].beforeRowOverflow=e)},ni.prototype.setCurrentWindow=function(t){this.currentWindow=this.windows[t]},ni.prototype.createTextDecoder=function(t){if("undefined"==typeof TextDecoder)this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(t)}catch(e){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+t+" encoding. "+e})}};var ai=function t(e){e=e||{},t.prototype.init.call(this);var i,r=this,n=e.captionServices||{},a={};Object.keys(n).forEach((function(t){i=n[t],/^SERVICE/.test(t)&&(a[t]=i.encoding)})),this.serviceEncodings=a,this.current708Packet=null,this.services={},this.push=function(t){3===t.type?(r.new708Packet(),r.add708Bytes(t)):(null===r.current708Packet&&r.new708Packet(),r.add708Bytes(t))}};ai.prototype=new Qe,ai.prototype.new708Packet=function(){null!==this.current708Packet&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},ai.prototype.add708Bytes=function(t){var e=t.ccData,i=e>>>8,r=255&e;this.current708Packet.ptsVals.push(t.pts),this.current708Packet.data.push(i),this.current708Packet.data.push(r)},ai.prototype.push708Packet=function(){var t=this.current708Packet,e=t.data,i=null,r=null,n=0,a=e[n++];for(t.seq=a>>6,t.sizeCode=63&a;n<e.length;n++)r=31&(a=e[n++]),7===(i=a>>5)&&r>0&&(i=a=e[n++]),this.pushServiceBlock(i,n,r),r>0&&(n+=r-1)},ai.prototype.pushServiceBlock=function(t,e,i){var r,n=e,a=this.current708Packet.data,s=this.services[t];for(s||(s=this.initService(t,n));n<e+i&&n<a.length;n++)r=a[n],ii(r)?n=this.handleText(n,s):24===r?n=this.multiByteCharacter(n,s):16===r?n=this.extendedCommands(n,s):128<=r&&r<=135?n=this.setCurrentWindow(n,s):152<=r&&r<=159?n=this.defineWindow(n,s):136===r?n=this.clearWindows(n,s):140===r?n=this.deleteWindows(n,s):137===r?n=this.displayWindows(n,s):138===r?n=this.hideWindows(n,s):139===r?n=this.toggleWindows(n,s):151===r?n=this.setWindowAttributes(n,s):144===r?n=this.setPenAttributes(n,s):145===r?n=this.setPenColor(n,s):146===r?n=this.setPenLocation(n,s):143===r?s=this.reset(n,s):8===r?s.currentWindow.backspace():12===r?s.currentWindow.clearText():13===r?s.currentWindow.pendingNewLine=!0:14===r?s.currentWindow.clearText():141===r&&n++},ai.prototype.extendedCommands=function(t,e){var i=this.current708Packet.data[++t];return ii(i)&&(t=this.handleText(t,e,{isExtended:!0})),t},ai.prototype.getPts=function(t){return this.current708Packet.ptsVals[Math.floor(t/2)]},ai.prototype.initService=function(t,e){var i,r,n=this;return(i="SERVICE"+t)in this.serviceEncodings&&(r=this.serviceEncodings[i]),this.services[t]=new ni(t,r,n),this.services[t].init(this.getPts(e),(function(e){n.flushDisplayed(e,n.services[t])})),this.services[t]},ai.prototype.handleText=function(t,e,i){var r,n,a,s,o=i&&i.isExtended,u=i&&i.isMultiByte,p=this.current708Packet.data,c=o?4096:0,l=p[t],d=p[t+1],f=e.currentWindow;return e.textDecoder_&&!o?(u?(n=[l,d],t++):n=[l],r=e.textDecoder_.decode(new Uint8Array(n))):(s=ei[a=c|l]||a,r=4096&a&&a===s?"":String.fromCharCode(s)),f.pendingNewLine&&!f.isEmpty()&&f.newLine(this.getPts(t)),f.pendingNewLine=!1,f.addText(r),t},ai.prototype.multiByteCharacter=function(t,e){var i=this.current708Packet.data,r=i[t+1],n=i[t+2];return ii(r)&&ii(n)&&(t=this.handleText(++t,e,{isMultiByte:!0})),t},ai.prototype.setCurrentWindow=function(t,e){var i=7&this.current708Packet.data[t];return e.setCurrentWindow(i),t},ai.prototype.defineWindow=function(t,e){var i=this.current708Packet.data,r=i[t],n=7&r;e.setCurrentWindow(n);var a=e.currentWindow;return r=i[++t],a.visible=(32&r)>>5,a.rowLock=(16&r)>>4,a.columnLock=(8&r)>>3,a.priority=7&r,r=i[++t],a.relativePositioning=(128&r)>>7,a.anchorVertical=127&r,r=i[++t],a.anchorHorizontal=r,r=i[++t],a.anchorPoint=(240&r)>>4,a.rowCount=15&r,r=i[++t],a.columnCount=63&r,r=i[++t],a.windowStyle=(56&r)>>3,a.penStyle=7&r,a.virtualRowCount=a.rowCount+1,t},ai.prototype.setWindowAttributes=function(t,e){var i=this.current708Packet.data,r=i[t],n=e.currentWindow.winAttr;return r=i[++t],n.fillOpacity=(192&r)>>6,n.fillRed=(48&r)>>4,n.fillGreen=(12&r)>>2,n.fillBlue=3&r,r=i[++t],n.borderType=(192&r)>>6,n.borderRed=(48&r)>>4,n.borderGreen=(12&r)>>2,n.borderBlue=3&r,r=i[++t],n.borderType+=(128&r)>>5,n.wordWrap=(64&r)>>6,n.printDirection=(48&r)>>4,n.scrollDirection=(12&r)>>2,n.justify=3&r,r=i[++t],n.effectSpeed=(240&r)>>4,n.effectDirection=(12&r)>>2,n.displayEffect=3&r,t},ai.prototype.flushDisplayed=function(t,e){for(var i=[],r=0;r<8;r++)e.windows[r].visible&&!e.windows[r].isEmpty()&&i.push(e.windows[r].getText());e.endPts=t,e.text=i.join("\n\n"),this.pushCaption(e),e.startPts=t},ai.prototype.pushCaption=function(t){""!==t.text&&(this.trigger("data",{startPts:t.startPts,endPts:t.endPts,text:t.text,stream:"cc708_"+t.serviceNum}),t.text="",t.startPts=t.endPts)},ai.prototype.displayWindows=function(t,e){var i=this.current708Packet.data[++t],r=this.getPts(t);this.flushDisplayed(r,e);for(var n=0;n<8;n++)i&1<<n&&(e.windows[n].visible=1);return t},ai.prototype.hideWindows=function(t,e){var i=this.current708Packet.data[++t],r=this.getPts(t);this.flushDisplayed(r,e);for(var n=0;n<8;n++)i&1<<n&&(e.windows[n].visible=0);return t},ai.prototype.toggleWindows=function(t,e){var i=this.current708Packet.data[++t],r=this.getPts(t);this.flushDisplayed(r,e);for(var n=0;n<8;n++)i&1<<n&&(e.windows[n].visible^=1);return t},ai.prototype.clearWindows=function(t,e){var i=this.current708Packet.data[++t],r=this.getPts(t);this.flushDisplayed(r,e);for(var n=0;n<8;n++)i&1<<n&&e.windows[n].clearText();return t},ai.prototype.deleteWindows=function(t,e){var i=this.current708Packet.data[++t],r=this.getPts(t);this.flushDisplayed(r,e);for(var n=0;n<8;n++)i&1<<n&&e.windows[n].reset();return t},ai.prototype.setPenAttributes=function(t,e){var i=this.current708Packet.data,r=i[t],n=e.currentWindow.penAttr;return r=i[++t],n.textTag=(240&r)>>4,n.offset=(12&r)>>2,n.penSize=3&r,r=i[++t],n.italics=(128&r)>>7,n.underline=(64&r)>>6,n.edgeType=(56&r)>>3,n.fontStyle=7&r,t},ai.prototype.setPenColor=function(t,e){var i=this.current708Packet.data,r=i[t],n=e.currentWindow.penColor;return r=i[++t],n.fgOpacity=(192&r)>>6,n.fgRed=(48&r)>>4,n.fgGreen=(12&r)>>2,n.fgBlue=3&r,r=i[++t],n.bgOpacity=(192&r)>>6,n.bgRed=(48&r)>>4,n.bgGreen=(12&r)>>2,n.bgBlue=3&r,r=i[++t],n.edgeRed=(48&r)>>4,n.edgeGreen=(12&r)>>2,n.edgeBlue=3&r,t},ai.prototype.setPenLocation=function(t,e){var i=this.current708Packet.data,r=i[t],n=e.currentWindow.penLoc;return e.currentWindow.pendingNewLine=!0,r=i[++t],n.row=15&r,r=i[++t],n.column=63&r,t},ai.prototype.reset=function(t,e){var i=this.getPts(t);return this.flushDisplayed(i,e),this.initService(e.serviceNum,t)};var si={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},oi=function(t){return null===t?"":(t=si[t]||t,String.fromCharCode(t))},ui=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],pi=function(){for(var t=[],e=15;e--;)t.push("");return t},ci=function t(e,i){t.prototype.init.call(this),this.field_=e||0,this.dataChannel_=i||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(t){var e,i,r,n,a;if((e=32639&t.ccData)!==this.lastControlCode_){if(4096==(61440&e)?this.lastControlCode_=e:e!==this.PADDING_&&(this.lastControlCode_=null),r=e>>>8,n=255&e,e!==this.PADDING_)if(e===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(e===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(t.pts),this.flushDisplayed(t.pts),i=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=i,this.startPts_=t.pts;else if(e===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(t.pts);else if(e===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(t.pts);else if(e===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(t.pts);else if(e===this.CARRIAGE_RETURN_)this.clearFormatting(t.pts),this.flushDisplayed(t.pts),this.shiftRowsUp_(),this.startPts_=t.pts;else if(e===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(e===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(t.pts),this.displayed_=pi();else if(e===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=pi();else if(e===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(t.pts),this.displayed_=pi()),this.mode_="paintOn",this.startPts_=t.pts;else if(this.isSpecialCharacter(r,n))a=oi((r=(3&r)<<8)|n),this[this.mode_](t.pts,a),this.column_++;else if(this.isExtCharacter(r,n))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),a=oi((r=(3&r)<<8)|n),this[this.mode_](t.pts,a),this.column_++;else if(this.isMidRowCode(r,n))this.clearFormatting(t.pts),this[this.mode_](t.pts," "),this.column_++,14==(14&n)&&this.addFormatting(t.pts,["i"]),1==(1&n)&&this.addFormatting(t.pts,["u"]);else if(this.isOffsetControlCode(r,n))this.column_+=3&n;else if(this.isPAC(r,n)){var s=ui.indexOf(7968&e);"rollUp"===this.mode_&&(s-this.rollUpRows_+1<0&&(s=this.rollUpRows_-1),this.setRollUp(t.pts,s)),s!==this.row_&&(this.clearFormatting(t.pts),this.row_=s),1&n&&-1===this.formatting_.indexOf("u")&&this.addFormatting(t.pts,["u"]),16==(16&e)&&(this.column_=4*((14&e)>>1)),this.isColorPAC(n)&&14==(14&n)&&this.addFormatting(t.pts,["i"])}else this.isNormalChar(r)&&(0===n&&(n=null),a=oi(r),a+=oi(n),this[this.mode_](t.pts,a),this.column_+=a.length)}else this.lastControlCode_=null}};ci.prototype=new Qe,ci.prototype.flushDisplayed=function(t){var e=this.displayed_.map((function(t,e){try{return t.trim()}catch(i){return this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+e+"."}),""}}),this).join("\n").replace(/^\n+|\n+$/g,"");e.length&&this.trigger("data",{startPts:this.startPts_,endPts:t,text:e,stream:this.name_})},ci.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=pi(),this.nonDisplayed_=pi(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},ci.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},ci.prototype.isSpecialCharacter=function(t,e){return t===this.EXT_&&e>=48&&e<=63},ci.prototype.isExtCharacter=function(t,e){return(t===this.EXT_+1||t===this.EXT_+2)&&e>=32&&e<=63},ci.prototype.isMidRowCode=function(t,e){return t===this.EXT_&&e>=32&&e<=47},ci.prototype.isOffsetControlCode=function(t,e){return t===this.OFFSET_&&e>=33&&e<=35},ci.prototype.isPAC=function(t,e){return t>=this.BASE_&&t<this.BASE_+8&&e>=64&&e<=127},ci.prototype.isColorPAC=function(t){return t>=64&&t<=79||t>=96&&t<=127},ci.prototype.isNormalChar=function(t){return t>=32&&t<=127},ci.prototype.setRollUp=function(t,e){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(t),this.nonDisplayed_=pi(),this.displayed_=pi()),void 0!==e&&e!==this.row_)for(var i=0;i<this.rollUpRows_;i++)this.displayed_[e-i]=this.displayed_[this.row_-i],this.displayed_[this.row_-i]="";void 0===e&&(e=this.row_),this.topRow_=e-this.rollUpRows_+1},ci.prototype.addFormatting=function(t,e){this.formatting_=this.formatting_.concat(e);var i=e.reduce((function(t,e){return t+"<"+e+">"}),"");this[this.mode_](t,i)},ci.prototype.clearFormatting=function(t){if(this.formatting_.length){var e=this.formatting_.reverse().reduce((function(t,e){return t+"</"+e+">"}),"");this.formatting_=[],this[this.mode_](t,e)}},ci.prototype.popOn=function(t,e){var i=this.nonDisplayed_[this.row_];i+=e,this.nonDisplayed_[this.row_]=i},ci.prototype.rollUp=function(t,e){var i=this.displayed_[this.row_];i+=e,this.displayed_[this.row_]=i},ci.prototype.shiftRowsUp_=function(){var t;for(t=0;t<this.topRow_;t++)this.displayed_[t]="";for(t=this.row_+1;t<15;t++)this.displayed_[t]="";for(t=this.topRow_;t<this.row_;t++)this.displayed_[t]=this.displayed_[t+1];this.displayed_[this.row_]=""},ci.prototype.paintOn=function(t,e){var i=this.displayed_[this.row_];i+=e,this.displayed_[this.row_]=i};var li={CaptionStream:ti,Cea608Stream:ci,Cea708Stream:ai},di={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},fi=function(t,e){var i=1;for(t>e&&(i=-1);Math.abs(e-t)>4294967296;)t+=8589934592*i;return t},hi=function t(e){var i,r;t.prototype.init.call(this),this.type_=e||"shared",this.push=function(t){"shared"!==this.type_&&t.type!==this.type_||(void 0===r&&(r=t.dts),t.dts=fi(t.dts,r),t.pts=fi(t.pts,r),i=t.dts,this.trigger("data",t))},this.flush=function(){r=i,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){r=void 0,i=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};hi.prototype=new gt;var gi,mi=hi,yi=fi,bi=di,vi=function(t,e,i){var r,n="";for(r=e;r<i;r++)n+="%"+("00"+t[r].toString(16)).slice(-2);return n},wi=function(t,e,i){return decodeURIComponent(vi(t,e,i))},Si=function(t){return t[0]<<21|t[1]<<14|t[2]<<7|t[3]},Ti={TXXX:function(t){var e;if(3===t.data[0]){for(e=1;e<t.data.length;e++)if(0===t.data[e]){t.description=wi(t.data,1,e),t.value=wi(t.data,e+1,t.data.length).replace(/\0*$/,"");break}t.data=t.value}},WXXX:function(t){var e;if(3===t.data[0])for(e=1;e<t.data.length;e++)if(0===t.data[e]){t.description=wi(t.data,1,e),t.url=wi(t.data,e+1,t.data.length);break}},PRIV:function(t){var e,i;for(e=0;e<t.data.length;e++)if(0===t.data[e]){t.owner=(i=t.data,unescape(vi(i,0,e)));break}t.privateData=t.data.subarray(e+1),t.data=t.privateData}};(gi=function(t){var e,i={descriptor:t&&t.descriptor},r=0,n=[],a=0;if(gi.prototype.init.call(this),this.dispatchType=bi.METADATA_STREAM_TYPE.toString(16),i.descriptor)for(e=0;e<i.descriptor.length;e++)this.dispatchType+=("00"+i.descriptor[e].toString(16)).slice(-2);this.push=function(t){var e,i,s,o,u;if("timed-metadata"===t.type)if(t.dataAlignmentIndicator&&(a=0,n.length=0),0===n.length&&(t.data.length<10||t.data[0]!=="I".charCodeAt(0)||t.data[1]!=="D".charCodeAt(0)||t.data[2]!=="3".charCodeAt(0)))this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});else if(n.push(t),a+=t.data.byteLength,1===n.length&&(r=Si(t.data.subarray(6,10)),r+=10),!(a<r)){for(e={data:new Uint8Array(r),frames:[],pts:n[0].pts,dts:n[0].dts},u=0;u<r;)e.data.set(n[0].data.subarray(0,r-u),u),u+=n[0].data.byteLength,a-=n[0].data.byteLength,n.shift();i=10,64&e.data[5]&&(i+=4,i+=Si(e.data.subarray(10,14)),r-=Si(e.data.subarray(16,20)));do{if((s=Si(e.data.subarray(i+4,i+8)))<1)return void this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping metadata parsing."});if((o={id:String.fromCharCode(e.data[i],e.data[i+1],e.data[i+2],e.data[i+3]),data:e.data.subarray(i+10,i+s+10)}).key=o.id,Ti[o.id]&&(Ti[o.id](o),"com.apple.streaming.transportStreamTimestamp"===o.owner)){var p=o.data,c=(1&p[3])<<30|p[4]<<22|p[5]<<14|p[6]<<6|p[7]>>>2;c*=4,c+=3&p[7],o.timeStamp=c,void 0===e.pts&&void 0===e.dts&&(e.pts=o.timeStamp,e.dts=o.timeStamp),this.trigger("timestamp",o)}e.frames.push(o),i+=10,i+=s}while(i<r);this.trigger("data",e)}}}).prototype=new gt;var _i,Ai,Ei,ki=gi,Oi=gt,Pi=li,xi=di,Ui=mi;(_i=function(){var t=new Uint8Array(188),e=0;_i.prototype.init.call(this),this.push=function(i){var r,n=0,a=188;for(e?((r=new Uint8Array(i.byteLength+e)).set(t.subarray(0,e)),r.set(i,e),e=0):r=i;a<r.byteLength;)71!==r[n]||71!==r[a]?(n++,a++):(this.trigger("data",r.subarray(n,a)),n+=188,a+=188);n<r.byteLength&&(t.set(r.subarray(n),0),e=r.byteLength-n)},this.flush=function(){188===e&&71===t[0]&&(this.trigger("data",t),e=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){e=0,this.trigger("reset")}}).prototype=new Oi,(Ai=function(){var t,e,i,r;Ai.prototype.init.call(this),r=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,t=function(t,r){var n=0;r.payloadUnitStartIndicator&&(n+=t[n]+1),"pat"===r.type?e(t.subarray(n),r):i(t.subarray(n),r)},e=function(t,e){e.section_number=t[7],e.last_section_number=t[8],r.pmtPid=(31&t[10])<<8|t[11],e.pmtPid=r.pmtPid},i=function(t,e){var i,n;if(1&t[5]){for(r.programMapTable={video:null,audio:null,"timed-metadata":{}},i=3+((15&t[1])<<8|t[2])-4,n=12+((15&t[10])<<8|t[11]);n<i;){var a=t[n],s=(31&t[n+1])<<8|t[n+2];a===xi.H264_STREAM_TYPE&&null===r.programMapTable.video?r.programMapTable.video=s:a===xi.ADTS_STREAM_TYPE&&null===r.programMapTable.audio?r.programMapTable.audio=s:a===xi.METADATA_STREAM_TYPE&&(r.programMapTable["timed-metadata"][s]=a),n+=5+((15&t[n+3])<<8|t[n+4])}e.programMapTable=r.programMapTable}},this.push=function(e){var i={},r=4;if(i.payloadUnitStartIndicator=!!(64&e[1]),i.pid=31&e[1],i.pid<<=8,i.pid|=e[2],(48&e[3])>>>4>1&&(r+=e[r]+1),0===i.pid)i.type="pat",t(e.subarray(r),i),this.trigger("data",i);else if(i.pid===this.pmtPid)for(i.type="pmt",t(e.subarray(r),i),this.trigger("data",i);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([e,r,i]):this.processPes_(e,r,i)},this.processPes_=function(t,e,i){i.pid===this.programMapTable.video?i.streamType=xi.H264_STREAM_TYPE:i.pid===this.programMapTable.audio?i.streamType=xi.ADTS_STREAM_TYPE:i.streamType=this.programMapTable["timed-metadata"][i.pid],i.type="pes",i.data=t.subarray(e),this.trigger("data",i)}}).prototype=new Oi,Ai.STREAM_TYPES={h264:27,adts:15},(Ei=function(){var t,e=this,i=!1,r={data:[],size:0},n={data:[],size:0},a={data:[],size:0},s=function(t,i,r){var n,a,s=new Uint8Array(t.size),o={type:i},u=0,p=0;if(t.data.length&&!(t.size<9)){for(o.trackId=t.data[0].pid,u=0;u<t.data.length;u++)a=t.data[u],s.set(a.data,p),p+=a.data.byteLength;var c,l,d,f;l=o,f=(c=s)[0]<<16|c[1]<<8|c[2],l.data=new Uint8Array,1===f&&(l.packetLength=6+(c[4]<<8|c[5]),l.dataAlignmentIndicator=0!=(4&c[6]),192&(d=c[7])&&(l.pts=(14&c[9])<<27|(255&c[10])<<20|(254&c[11])<<12|(255&c[12])<<5|(254&c[13])>>>3,l.pts*=4,l.pts+=(6&c[13])>>>1,l.dts=l.pts,64&d&&(l.dts=(14&c[14])<<27|(255&c[15])<<20|(254&c[16])<<12|(255&c[17])<<5|(254&c[18])>>>3,l.dts*=4,l.dts+=(6&c[18])>>>1)),l.data=c.subarray(9+c[8])),n="video"===i||o.packetLength<=t.size,(r||n)&&(t.size=0,t.data.length=0),n&&e.trigger("data",o)}};Ei.prototype.init.call(this),this.push=function(o){({pat:function(){},pes:function(){var t,e;switch(o.streamType){case xi.H264_STREAM_TYPE:t=r,e="video";break;case xi.ADTS_STREAM_TYPE:t=n,e="audio";break;case xi.METADATA_STREAM_TYPE:t=a,e="timed-metadata";break;default:return}o.payloadUnitStartIndicator&&s(t,e,!0),t.data.push(o),t.size+=o.data.byteLength},pmt:function(){var r={type:"metadata",tracks:[]};null!==(t=o.programMapTable).video&&r.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t.video,codec:"avc",type:"video"}),null!==t.audio&&r.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t.audio,codec:"adts",type:"audio"}),i=!0,e.trigger("data",r)}})[o.type]()},this.reset=function(){r.size=0,r.data.length=0,n.size=0,n.data.length=0,this.trigger("reset")},this.flushStreams_=function(){s(r,"video"),s(n,"audio"),s(a,"timed-metadata")},this.flush=function(){if(!i&&t){var r={type:"metadata",tracks:[]};null!==t.video&&r.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t.video,codec:"avc",type:"video"}),null!==t.audio&&r.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t.audio,codec:"adts",type:"audio"}),e.trigger("data",r)}i=!1,this.flushStreams_(),this.trigger("done")}}).prototype=new Oi;var Di={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:_i,TransportParseStream:Ai,ElementaryStream:Ei,TimestampRolloverStream:Ui,CaptionStream:Pi.CaptionStream,Cea608Stream:Pi.Cea608Stream,Cea708Stream:Pi.Cea708Stream,MetadataStream:ki};for(var Ci in xi)xi.hasOwnProperty(Ci)&&(Di[Ci]=xi[Ci]);var Ii,Ri=Di,Li=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],Mi=function(t,e){var i=t[e+6]<<21|t[e+7]<<14|t[e+8]<<7|t[e+9];return i=i>=0?i:0,(16&t[e+5])>>4?i+20:i+10},Ni=function t(e,i){return e.length-i<10||e[i]!=="I".charCodeAt(0)||e[i+1]!=="D".charCodeAt(0)||e[i+2]!=="3".charCodeAt(0)?i:t(e,i+=Mi(e,i))},ji=function(t){return t[0]<<21|t[1]<<14|t[2]<<7|t[3]},Fi={isLikelyAacData:function(t){var e=Ni(t,0);return t.length>=e+2&&255==(255&t[e])&&240==(240&t[e+1])&&16==(22&t[e+1])},parseId3TagSize:Mi,parseAdtsSize:function(t,e){var i=(224&t[e+5])>>5,r=t[e+4]<<3;return 6144&t[e+3]|r|i},parseType:function(t,e){return t[e]==="I".charCodeAt(0)&&t[e+1]==="D".charCodeAt(0)&&t[e+2]==="3".charCodeAt(0)?"timed-metadata":!0&t[e]&&240==(240&t[e+1])?"audio":null},parseSampleRate:function(t){for(var e=0;e+5<t.length;){if(255===t[e]&&240==(246&t[e+1]))return Li[(60&t[e+2])>>>2];e++}return null},parseAacTimestamp:function(t){var e,i,r;e=10,64&t[5]&&(e+=4,e+=ji(t.subarray(10,14)));do{if((i=ji(t.subarray(e+4,e+8)))<1)return null;if("PRIV"===String.fromCharCode(t[e],t[e+1],t[e+2],t[e+3])){r=t.subarray(e+10,e+i+10);for(var n=0;n<r.byteLength;n++)if(0===r[n]){if("com.apple.streaming.transportStreamTimestamp"===unescape(function(t,e,i){var r,n="";for(r=e;r<i;r++)n+="%"+("00"+t[r].toString(16)).slice(-2);return n}(r,0,n))){var a=r.subarray(n+1),s=(1&a[3])<<30|a[4]<<22|a[5]<<14|a[6]<<6|a[7]>>>2;return s*=4,s+=3&a[7]}break}}e+=10,e+=i}while(e<t.byteLength);return null}},Bi=Fi;(Ii=function(){var t=new Uint8Array,e=0;Ii.prototype.init.call(this),this.setTimestamp=function(t){e=t},this.push=function(i){var r,n,a,s,o=0,u=0;for(t.length?(s=t.length,(t=new Uint8Array(i.byteLength+s)).set(t.subarray(0,s)),t.set(i,s)):t=i;t.length-u>=3;)if(t[u]!=="I".charCodeAt(0)||t[u+1]!=="D".charCodeAt(0)||t[u+2]!=="3".charCodeAt(0))if(255!=(255&t[u])||240!=(240&t[u+1]))u++;else{if(t.length-u<7)break;if(u+(o=Bi.parseAdtsSize(t,u))>t.length)break;a={type:"audio",data:t.subarray(u,u+o),pts:e,dts:e},this.trigger("data",a),u+=o}else{if(t.length-u<10)break;if(u+(o=Bi.parseId3TagSize(t,u))>t.length)break;n={type:"timed-metadata",data:t.subarray(u,u+o)},this.trigger("data",n),u+=o}r=t.length-u,t=r>0?t.subarray(u):new Uint8Array},this.reset=function(){t=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){t=new Uint8Array,this.trigger("endedtimeline")}}).prototype=new gt;var zi,Gi,Vi,Wi,$i=Ii,qi=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Xi=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],Hi=gt,Yi=Se,Ki=Ge,Ji=He,Qi=Ke,Zi=Ri,tr=yt,er=_t,ir=de.H264Stream,rr=$i,nr=Fi.isLikelyAacData,ar=yt.ONE_SECOND_IN_TS,sr=qi,or=Xi,ur=function(t,e){e.stream=t,this.trigger("log",e)},pr=function(t,e){for(var i=Object.keys(e),r=0;r<i.length;r++){var n=i[r];"headOfPipeline"!==n&&e[n].on&&e[n].on("log",ur.bind(t,n))}},cr=function(t,e){var i;if(t.length!==e.length)return!1;for(i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0},lr=function(t,e,i,r,n,a){return{start:{dts:t,pts:t+(i-e)},end:{dts:t+(r-e),pts:t+(n-i)},prependedContentDuration:a,baseMediaDecodeTime:t}};(Gi=function(t,e){var i,r=[],n=0,a=0,s=1/0;i=(e=e||{}).firstSequenceNumber||0,Gi.prototype.init.call(this),this.push=function(e){Qi.collectDtsInfo(t,e),t&&sr.forEach((function(i){t[i]=e[i]})),r.push(e)},this.setEarliestDts=function(t){n=t},this.setVideoBaseMediaDecodeTime=function(t){s=t},this.setAudioAppendStart=function(t){a=t},this.flush=function(){var o,u,p,c,l,d,f;0!==r.length?(o=Ji.trimAdtsFramesByEarliestDts(r,t,n),t.baseMediaDecodeTime=Qi.calculateTrackBaseMediaDecodeTime(t,e.keepOriginalTimestamps),f=Ji.prefixWithSilence(t,o,a,s),t.samples=Ji.generateSampleTable(o),p=Yi.mdat(Ji.concatenateFrameData(o)),r=[],u=Yi.moof(i,[t]),c=new Uint8Array(u.byteLength+p.byteLength),i++,c.set(u),c.set(p,u.byteLength),Qi.clearDtsInfo(t),l=Math.ceil(1024*ar/t.samplerate),o.length&&(d=o.length*l,this.trigger("segmentTimingInfo",lr(tr.audioTsToVideoTs(t.baseMediaDecodeTime,t.samplerate),o[0].dts,o[0].pts,o[0].dts+d,o[0].pts+d,f||0)),this.trigger("timingInfo",{start:o[0].pts,end:o[0].pts+d})),this.trigger("data",{track:t,boxes:c}),this.trigger("done","AudioSegmentStream")):this.trigger("done","AudioSegmentStream")},this.reset=function(){Qi.clearDtsInfo(t),r=[],this.trigger("reset")}}).prototype=new Hi,(zi=function(t,e){var i,r,n,a=[],s=[];i=(e=e||{}).firstSequenceNumber||0,zi.prototype.init.call(this),delete t.minPTS,this.gopCache_=[],this.push=function(e){Qi.collectDtsInfo(t,e),"seq_parameter_set_rbsp"!==e.nalUnitType||r||(r=e.config,t.sps=[e.data],or.forEach((function(e){t[e]=r[e]}),this)),"pic_parameter_set_rbsp"!==e.nalUnitType||n||(n=e.data,t.pps=[e.data]),a.push(e)},this.flush=function(){for(var r,n,o,u,p,c,l,d,f=0;a.length&&"access_unit_delimiter_rbsp"!==a[0].nalUnitType;)a.shift();if(0===a.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(r=Ki.groupNalsIntoFrames(a),(o=Ki.groupFramesIntoGops(r))[0][0].keyFrame||((n=this.getGopForFusion_(a[0],t))?(f=n.duration,o.unshift(n),o.byteLength+=n.byteLength,o.nalCount+=n.nalCount,o.pts=n.pts,o.dts=n.dts,o.duration+=n.duration):o=Ki.extendFirstKeyFrame(o)),s.length){var h;if(!(h=e.alignGopsAtEnd?this.alignGopsAtEnd_(o):this.alignGopsAtStart_(o)))return this.gopCache_.unshift({gop:o.pop(),pps:t.pps,sps:t.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),a=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");Qi.clearDtsInfo(t),o=h}Qi.collectDtsInfo(t,o),t.samples=Ki.generateSampleTable(o),p=Yi.mdat(Ki.concatenateNalData(o)),t.baseMediaDecodeTime=Qi.calculateTrackBaseMediaDecodeTime(t,e.keepOriginalTimestamps),this.trigger("processedGopsInfo",o.map((function(t){return{pts:t.pts,dts:t.dts,byteLength:t.byteLength}}))),l=o[0],d=o[o.length-1],this.trigger("segmentTimingInfo",lr(t.baseMediaDecodeTime,l.dts,l.pts,d.dts+d.duration,d.pts+d.duration,f)),this.trigger("timingInfo",{start:o[0].pts,end:o[o.length-1].pts+o[o.length-1].duration}),this.gopCache_.unshift({gop:o.pop(),pps:t.pps,sps:t.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),a=[],this.trigger("baseMediaDecodeTime",t.baseMediaDecodeTime),this.trigger("timelineStartInfo",t.timelineStartInfo),u=Yi.moof(i,[t]),c=new Uint8Array(u.byteLength+p.byteLength),i++,c.set(u),c.set(p,u.byteLength),this.trigger("data",{track:t,boxes:c}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),a=[],this.gopCache_.length=0,s.length=0,this.trigger("reset")},this.resetStream_=function(){Qi.clearDtsInfo(t),r=void 0,n=void 0},this.getGopForFusion_=function(e){var i,r,n,a,s,o=1/0;for(s=0;s<this.gopCache_.length;s++)n=(a=this.gopCache_[s]).gop,t.pps&&cr(t.pps[0],a.pps[0])&&t.sps&&cr(t.sps[0],a.sps[0])&&(n.dts<t.timelineStartInfo.dts||(i=e.dts-n.dts-n.duration)>=-1e4&&i<=45e3&&(!r||o>i)&&(r=a,o=i));return r?r.gop:null},this.alignGopsAtStart_=function(t){var e,i,r,n,a,o,u,p;for(a=t.byteLength,o=t.nalCount,u=t.duration,e=i=0;e<s.length&&i<t.length&&(r=s[e],n=t[i],r.pts!==n.pts);)n.pts>r.pts?e++:(i++,a-=n.byteLength,o-=n.nalCount,u-=n.duration);return 0===i?t:i===t.length?null:((p=t.slice(i)).byteLength=a,p.duration=u,p.nalCount=o,p.pts=p[0].pts,p.dts=p[0].dts,p)},this.alignGopsAtEnd_=function(t){var e,i,r,n,a,o,u;for(e=s.length-1,i=t.length-1,a=null,o=!1;e>=0&&i>=0;){if(r=s[e],n=t[i],r.pts===n.pts){o=!0;break}r.pts>n.pts?e--:(e===s.length-1&&(a=i),i--)}if(!o&&null===a)return null;if(0===(u=o?i:a))return t;var p=t.slice(u),c=p.reduce((function(t,e){return t.byteLength+=e.byteLength,t.duration+=e.duration,t.nalCount+=e.nalCount,t}),{byteLength:0,duration:0,nalCount:0});return p.byteLength=c.byteLength,p.duration=c.duration,p.nalCount=c.nalCount,p.pts=p[0].pts,p.dts=p[0].dts,p},this.alignGopsWith=function(t){s=t}}).prototype=new Hi,(Wi=function(t,e){this.numberOfTracks=0,this.metadataStream=e,void 0!==(t=t||{}).remux?this.remuxTracks=!!t.remux:this.remuxTracks=!0,"boolean"==typeof t.keepOriginalTimestamps?this.keepOriginalTimestamps=t.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,Wi.prototype.init.call(this),this.push=function(t){return t.text?this.pendingCaptions.push(t):t.frames?this.pendingMetadata.push(t):(this.pendingTracks.push(t.track),this.pendingBytes+=t.boxes.byteLength,"video"===t.track.type&&(this.videoTrack=t.track,this.pendingBoxes.push(t.boxes)),void("audio"===t.track.type&&(this.audioTrack=t.track,this.pendingBoxes.unshift(t.boxes))))}}).prototype=new Hi,Wi.prototype.flush=function(t){var e,i,r,n,a=0,s={captions:[],captionStreams:{},metadata:[],info:{}},o=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==t&&"AudioSegmentStream"!==t)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(o=this.videoTrack.timelineStartInfo.pts,or.forEach((function(t){s.info[t]=this.videoTrack[t]}),this)):this.audioTrack&&(o=this.audioTrack.timelineStartInfo.pts,sr.forEach((function(t){s.info[t]=this.audioTrack[t]}),this)),this.videoTrack||this.audioTrack){for(1===this.pendingTracks.length?s.type=this.pendingTracks[0].type:s.type="combined",this.emittedTracks+=this.pendingTracks.length,r=Yi.initSegment(this.pendingTracks),s.initSegment=new Uint8Array(r.byteLength),s.initSegment.set(r),s.data=new Uint8Array(this.pendingBytes),n=0;n<this.pendingBoxes.length;n++)s.data.set(this.pendingBoxes[n],a),a+=this.pendingBoxes[n].byteLength;for(n=0;n<this.pendingCaptions.length;n++)(e=this.pendingCaptions[n]).startTime=tr.metadataTsToSeconds(e.startPts,o,this.keepOriginalTimestamps),e.endTime=tr.metadataTsToSeconds(e.endPts,o,this.keepOriginalTimestamps),s.captionStreams[e.stream]=!0,s.captions.push(e);for(n=0;n<this.pendingMetadata.length;n++)(i=this.pendingMetadata[n]).cueTime=tr.metadataTsToSeconds(i.pts,o,this.keepOriginalTimestamps),s.metadata.push(i);for(s.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",s),n=0;n<s.captions.length;n++)e=s.captions[n],this.trigger("caption",e);for(n=0;n<s.metadata.length;n++)i=s.metadata[n],this.trigger("id3Frame",i)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},Wi.prototype.setRemux=function(t){this.remuxTracks=t},(Vi=function(t){var e,i,r=this,n=!0;Vi.prototype.init.call(this),t=t||{},this.baseMediaDecodeTime=t.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var n={};this.transmuxPipeline_=n,n.type="aac",n.metadataStream=new Zi.MetadataStream,n.aacStream=new rr,n.audioTimestampRolloverStream=new Zi.TimestampRolloverStream("audio"),n.timedMetadataTimestampRolloverStream=new Zi.TimestampRolloverStream("timed-metadata"),n.adtsStream=new er,n.coalesceStream=new Wi(t,n.metadataStream),n.headOfPipeline=n.aacStream,n.aacStream.pipe(n.audioTimestampRolloverStream).pipe(n.adtsStream),n.aacStream.pipe(n.timedMetadataTimestampRolloverStream).pipe(n.metadataStream).pipe(n.coalesceStream),n.metadataStream.on("timestamp",(function(t){n.aacStream.setTimestamp(t.timeStamp)})),n.aacStream.on("data",(function(a){"timed-metadata"!==a.type&&"audio"!==a.type||n.audioSegmentStream||(i=i||{timelineStartInfo:{baseMediaDecodeTime:r.baseMediaDecodeTime},codec:"adts",type:"audio"},n.coalesceStream.numberOfTracks++,n.audioSegmentStream=new Gi(i,t),n.audioSegmentStream.on("log",r.getLogTrigger_("audioSegmentStream")),n.audioSegmentStream.on("timingInfo",r.trigger.bind(r,"audioTimingInfo")),n.adtsStream.pipe(n.audioSegmentStream).pipe(n.coalesceStream),r.trigger("trackinfo",{hasAudio:!!i,hasVideo:!!e}))})),n.coalesceStream.on("data",this.trigger.bind(this,"data")),n.coalesceStream.on("done",this.trigger.bind(this,"done")),pr(this,n)},this.setupTsPipeline=function(){var n={};this.transmuxPipeline_=n,n.type="ts",n.metadataStream=new Zi.MetadataStream,n.packetStream=new Zi.TransportPacketStream,n.parseStream=new Zi.TransportParseStream,n.elementaryStream=new Zi.ElementaryStream,n.timestampRolloverStream=new Zi.TimestampRolloverStream,n.adtsStream=new er,n.h264Stream=new ir,n.captionStream=new Zi.CaptionStream(t),n.coalesceStream=new Wi(t,n.metadataStream),n.headOfPipeline=n.packetStream,n.packetStream.pipe(n.parseStream).pipe(n.elementaryStream).pipe(n.timestampRolloverStream),n.timestampRolloverStream.pipe(n.h264Stream),n.timestampRolloverStream.pipe(n.adtsStream),n.timestampRolloverStream.pipe(n.metadataStream).pipe(n.coalesceStream),n.h264Stream.pipe(n.captionStream).pipe(n.coalesceStream),n.elementaryStream.on("data",(function(a){var s;if("metadata"===a.type){for(s=a.tracks.length;s--;)e||"video"!==a.tracks[s].type?i||"audio"!==a.tracks[s].type||((i=a.tracks[s]).timelineStartInfo.baseMediaDecodeTime=r.baseMediaDecodeTime):(e=a.tracks[s]).timelineStartInfo.baseMediaDecodeTime=r.baseMediaDecodeTime;e&&!n.videoSegmentStream&&(n.coalesceStream.numberOfTracks++,n.videoSegmentStream=new zi(e,t),n.videoSegmentStream.on("log",r.getLogTrigger_("videoSegmentStream")),n.videoSegmentStream.on("timelineStartInfo",(function(e){i&&!t.keepOriginalTimestamps&&(i.timelineStartInfo=e,n.audioSegmentStream.setEarliestDts(e.dts-r.baseMediaDecodeTime))})),n.videoSegmentStream.on("processedGopsInfo",r.trigger.bind(r,"gopInfo")),n.videoSegmentStream.on("segmentTimingInfo",r.trigger.bind(r,"videoSegmentTimingInfo")),n.videoSegmentStream.on("baseMediaDecodeTime",(function(t){i&&n.audioSegmentStream.setVideoBaseMediaDecodeTime(t)})),n.videoSegmentStream.on("timingInfo",r.trigger.bind(r,"videoTimingInfo")),n.h264Stream.pipe(n.videoSegmentStream).pipe(n.coalesceStream)),i&&!n.audioSegmentStream&&(n.coalesceStream.numberOfTracks++,n.audioSegmentStream=new Gi(i,t),n.audioSegmentStream.on("log",r.getLogTrigger_("audioSegmentStream")),n.audioSegmentStream.on("timingInfo",r.trigger.bind(r,"audioTimingInfo")),n.audioSegmentStream.on("segmentTimingInfo",r.trigger.bind(r,"audioSegmentTimingInfo")),n.adtsStream.pipe(n.audioSegmentStream).pipe(n.coalesceStream)),r.trigger("trackinfo",{hasAudio:!!i,hasVideo:!!e})}})),n.coalesceStream.on("data",this.trigger.bind(this,"data")),n.coalesceStream.on("id3Frame",(function(t){t.dispatchType=n.metadataStream.dispatchType,r.trigger("id3Frame",t)})),n.coalesceStream.on("caption",this.trigger.bind(this,"caption")),n.coalesceStream.on("done",this.trigger.bind(this,"done")),pr(this,n)},this.setBaseMediaDecodeTime=function(r){var n=this.transmuxPipeline_;t.keepOriginalTimestamps||(this.baseMediaDecodeTime=r),i&&(i.timelineStartInfo.dts=void 0,i.timelineStartInfo.pts=void 0,Qi.clearDtsInfo(i),n.audioTimestampRolloverStream&&n.audioTimestampRolloverStream.discontinuity()),e&&(n.videoSegmentStream&&(n.videoSegmentStream.gopCache_=[]),e.timelineStartInfo.dts=void 0,e.timelineStartInfo.pts=void 0,Qi.clearDtsInfo(e),n.captionStream.reset()),n.timestampRolloverStream&&n.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(t){i&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(t)},this.setRemux=function(e){var i=this.transmuxPipeline_;t.remux=e,i&&i.coalesceStream&&i.coalesceStream.setRemux(e)},this.alignGopsWith=function(t){e&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(t)},this.getLogTrigger_=function(t){var e=this;return function(i){i.stream=t,e.trigger("log",i)}},this.push=function(t){if(n){var e=nr(t);e&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():e||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),n=!1}this.transmuxPipeline_.headOfPipeline.push(t)},this.flush=function(){n=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}}).prototype=new Hi;var dr,fr={Transmuxer:Vi,VideoSegmentStream:zi,AudioSegmentStream:Gi,AUDIO_PROPERTIES:sr,VIDEO_PROPERTIES:or,generateSegmentTimingInfo:lr},hr=Je.discardEmulationPreventionBytes,gr=li.CaptionStream,mr=ke,yr=De,br=xe,vr=Oe,wr=function(t,e){for(var i=t,r=0;r<e.length;r++){var n=e[r];if(i<n.size)return n;i-=n.size}return null},Sr=function(t,e){var i=mr(t,["moof","traf"]),r=mr(t,["mdat"]),n={},a=[];return r.forEach((function(t,e){var r=i[e];a.push({mdat:t,traf:r})})),a.forEach((function(t){var i,r=t.mdat,a=t.traf,s=mr(a,["tfhd"]),o=vr(s[0]),u=o.trackId,p=mr(a,["tfdt"]),c=p.length>0?yr(p[0]).baseMediaDecodeTime:0,l=mr(a,["trun"]);e===u&&l.length>0&&(i=function(t,e,i){var r,n,a,s,o=new DataView(t.buffer,t.byteOffset,t.byteLength),u={logs:[],seiNals:[]};for(n=0;n+4<t.length;n+=a)if(a=o.getUint32(n),n+=4,!(a<=0))switch(31&t[n]){case 6:var p=t.subarray(n+1,n+1+a),c=wr(n,e);if(r={nalUnitType:"sei_rbsp",size:a,data:p,escapedRBSP:hr(p),trackId:i},c)r.pts=c.pts,r.dts=c.dts,s=c;else{if(!s){u.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+n+" for trackId "+i+". See mux.js#223."});break}r.pts=s.pts,r.dts=s.dts}u.seiNals.push(r)}return u}(r,function(t,e,i){var r=e,n=i.defaultSampleDuration||0,a=i.defaultSampleSize||0,s=i.trackId,o=[];return t.forEach((function(t){var e=br(t).samples;e.forEach((function(t){void 0===t.duration&&(t.duration=n),void 0===t.size&&(t.size=a),t.trackId=s,t.dts=r,void 0===t.compositionTimeOffset&&(t.compositionTimeOffset=0),t.pts=r+t.compositionTimeOffset,r+=t.duration})),o=o.concat(e)})),o}(l,c,o),u),n[u]||(n[u]={seiNals:[],logs:[]}),n[u].seiNals=n[u].seiNals.concat(i.seiNals),n[u].logs=n[u].logs.concat(i.logs))})),n},Tr={generator:Se,probe:Be,Transmuxer:fr.Transmuxer,AudioSegmentStream:fr.AudioSegmentStream,VideoSegmentStream:fr.VideoSegmentStream,CaptionParser:function(){var t,e,i,r,n,a,s=!1;this.isInitialized=function(){return s},this.init=function(e){t=new gr,s=!0,a=!!e&&e.isPartial,t.on("data",(function(t){t.startTime=t.startPts/r,t.endTime=t.endPts/r,n.captions.push(t),n.captionStreams[t.stream]=!0})),t.on("log",(function(t){n.logs.push(t)}))},this.isNewInit=function(t,e){return!(t&&0===t.length||e&&"object"==typeof e&&0===Object.keys(e).length)&&(i!==t[0]||r!==e[i])},this.parse=function(t,a,s){var o;if(!this.isInitialized())return null;if(!a||!s)return null;if(this.isNewInit(a,s))i=a[0],r=s[i];else if(null===i||!r)return e.push(t),null;for(;e.length>0;){var u=e.shift();this.parse(u,a,s)}return(o=function(t,e,i){if(null===e)return null;var r=Sr(t,e)[e]||{};return{seiNals:r.seiNals,logs:r.logs,timescale:i}}(t,i,r))&&o.logs&&(n.logs=n.logs.concat(o.logs)),null!==o&&o.seiNals?(this.pushNals(o.seiNals),this.flushStream(),n):n.logs.length?{logs:n.logs,captions:[],captionStreams:[]}:null},this.pushNals=function(e){if(!this.isInitialized()||!e||0===e.length)return null;e.forEach((function(e){t.push(e)}))},this.flushStream=function(){if(!this.isInitialized())return null;a?t.partialFlush():t.flush()},this.clearParsedCaptions=function(){n.captions=[],n.captionStreams={},n.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;t.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){e=[],i=null,r=null,n?this.clearParsedCaptions():n={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()}};(dr=function(t,e){var i,r=0,n=16384,a=function(t,e){var i,r=t.position+e;r<t.bytes.byteLength||((i=new Uint8Array(2*r)).set(t.bytes.subarray(0,t.position),0),t.bytes=i,t.view=new DataView(t.bytes.buffer))},s=dr.widthBytes||new Uint8Array("width".length),o=dr.heightBytes||new Uint8Array("height".length),u=dr.videocodecidBytes||new Uint8Array("videocodecid".length);if(!dr.widthBytes){for(i=0;i<"width".length;i++)s[i]="width".charCodeAt(i);for(i=0;i<"height".length;i++)o[i]="height".charCodeAt(i);for(i=0;i<"videocodecid".length;i++)u[i]="videocodecid".charCodeAt(i);dr.widthBytes=s,dr.heightBytes=o,dr.videocodecidBytes=u}switch(this.keyFrame=!1,t){case dr.VIDEO_TAG:this.length=16,n*=6;break;case dr.AUDIO_TAG:this.length=13,this.keyFrame=!0;break;case dr.METADATA_TAG:this.length=29,this.keyFrame=!0;break;default:throw new Error("Unknown FLV tag type")}this.bytes=new Uint8Array(n),this.view=new DataView(this.bytes.buffer),this.bytes[0]=t,this.position=this.length,this.keyFrame=e,this.pts=0,this.dts=0,this.writeBytes=function(t,e,i){var r,n=e||0;r=n+(i=i||t.byteLength),a(this,i),this.bytes.set(t.subarray(n,r),this.position),this.position+=i,this.length=Math.max(this.length,this.position)},this.writeByte=function(t){a(this,1),this.bytes[this.position]=t,this.position++,this.length=Math.max(this.length,this.position)},this.writeShort=function(t){a(this,2),this.view.setUint16(this.position,t),this.position+=2,this.length=Math.max(this.length,this.position)},this.negIndex=function(t){return this.bytes[this.length-t]},this.nalUnitSize=function(){return 0===r?0:this.length-(r+4)},this.startNalUnit=function(){if(r>0)throw new Error("Attempted to create new NAL wihout closing the old one");r=this.length,this.length+=4,this.position=this.length},this.endNalUnit=function(t){var e,i;this.length===r+4?this.length-=4:r>0&&(e=r+4,i=this.length-e,this.position=r,this.view.setUint32(this.position,i),this.position=this.length,t&&t.push(this.bytes.subarray(e,e+i))),r=0},this.writeMetaDataDouble=function(t,e){var i;if(a(this,2+t.length+9),this.view.setUint16(this.position,t.length),this.position+=2,"width"===t)this.bytes.set(s,this.position),this.position+=5;else if("height"===t)this.bytes.set(o,this.position),this.position+=6;else if("videocodecid"===t)this.bytes.set(u,this.position),this.position+=12;else for(i=0;i<t.length;i++)this.bytes[this.position]=t.charCodeAt(i),this.position++;this.position++,this.view.setFloat64(this.position,e),this.position+=8,this.length=Math.max(this.length,this.position),++r},this.writeMetaDataBoolean=function(t,e){var i;for(a(this,2),this.view.setUint16(this.position,t.length),this.position+=2,i=0;i<t.length;i++)a(this,1),this.bytes[this.position]=t.charCodeAt(i),this.position++;a(this,2),this.view.setUint8(this.position,1),this.position++,this.view.setUint8(this.position,e?1:0),this.position++,this.length=Math.max(this.length,this.position),++r},this.finalize=function(){var t,i;switch(this.bytes[0]){case dr.VIDEO_TAG:this.bytes[11]=7|(this.keyFrame||e?16:32),this.bytes[12]=e?0:1,t=this.pts-this.dts,this.bytes[13]=(16711680&t)>>>16,this.bytes[14]=(65280&t)>>>8,this.bytes[15]=(255&t)>>>0;break;case dr.AUDIO_TAG:this.bytes[11]=175,this.bytes[12]=e?0:1;break;case dr.METADATA_TAG:this.position=11,this.view.setUint8(this.position,2),this.position++,this.view.setUint16(this.position,10),this.position+=2,this.bytes.set([111,110,77,101,116,97,68,97,116,97],this.position),this.position+=10,this.bytes[this.position]=8,this.position++,this.view.setUint32(this.position,r),this.position=this.length,this.bytes.set([0,0,9],this.position),this.position+=3,this.length=this.position}return i=this.length-11,this.bytes[1]=(16711680&i)>>>16,this.bytes[2]=(65280&i)>>>8,this.bytes[3]=(255&i)>>>0,this.bytes[4]=(16711680&this.dts)>>>16,this.bytes[5]=(65280&this.dts)>>>8,this.bytes[6]=(255&this.dts)>>>0,this.bytes[7]=(4278190080&this.dts)>>>24,this.bytes[8]=0,this.bytes[9]=0,this.bytes[10]=0,a(this,4),this.view.setUint32(this.length,this.length),this.length+=4,this.position+=4,this.bytes=this.bytes.subarray(0,this.length),this.frameTime=dr.frameTime(this.bytes),this}}).AUDIO_TAG=8,dr.VIDEO_TAG=9,dr.METADATA_TAG=18,dr.isAudioFrame=function(t){return dr.AUDIO_TAG===t[0]},dr.isVideoFrame=function(t){return dr.VIDEO_TAG===t[0]},dr.isMetaData=function(t){return dr.METADATA_TAG===t[0]},dr.isKeyFrame=function(t){return dr.isVideoFrame(t)?23===t[11]:!!dr.isAudioFrame(t)||!!dr.isMetaData(t)},dr.frameTime=function(t){var e=t[4]<<16;return e|=t[5]<<8,e|=t[6]<<0,e|=t[7]<<24};var _r=dr,Ar=function t(e){this.numberOfTracks=0,this.metadataStream=e.metadataStream,this.videoTags=[],this.audioTags=[],this.videoTrack=null,this.audioTrack=null,this.pendingCaptions=[],this.pendingMetadata=[],this.pendingTracks=0,this.processedTracks=0,t.prototype.init.call(this),this.push=function(t){return t.text?this.pendingCaptions.push(t):t.frames?this.pendingMetadata.push(t):("video"===t.track.type&&(this.videoTrack=t.track,this.videoTags=t.tags,this.pendingTracks++),void("audio"===t.track.type&&(this.audioTrack=t.track,this.audioTags=t.tags,this.pendingTracks++)))}};(Ar.prototype=new gt).flush=function(t){var e,i,r,n,a={tags:{},captions:[],captionStreams:{},metadata:[]};if(this.pendingTracks<this.numberOfTracks){if("VideoSegmentStream"!==t&&"AudioSegmentStream"!==t)return;if(0===this.pendingTracks&&(this.processedTracks++,this.processedTracks<this.numberOfTracks))return}if(this.processedTracks+=this.pendingTracks,this.pendingTracks=0,!(this.processedTracks<this.numberOfTracks)){for(this.videoTrack?n=this.videoTrack.timelineStartInfo.pts:this.audioTrack&&(n=this.audioTrack.timelineStartInfo.pts),a.tags.videoTags=this.videoTags,a.tags.audioTags=this.audioTags,r=0;r<this.pendingCaptions.length;r++)(i=this.pendingCaptions[r]).startTime=i.startPts-n,i.startTime/=9e4,i.endTime=i.endPts-n,i.endTime/=9e4,a.captionStreams[i.stream]=!0,a.captions.push(i);for(r=0;r<this.pendingMetadata.length;r++)(e=this.pendingMetadata[r]).cueTime=e.pts-n,e.cueTime/=9e4,a.metadata.push(e);a.metadata.dispatchType=this.metadataStream.dispatchType,this.videoTrack=null,this.audioTrack=null,this.videoTags=[],this.audioTags=[],this.pendingCaptions.length=0,this.pendingMetadata.length=0,this.pendingTracks=0,this.processedTracks=0,this.trigger("data",a),this.trigger("done")}};var Er,kr,Or,Pr,xr,Ur,Dr=gt,Cr=_r,Ir=Ri,Rr=_t,Lr=de.H264Stream,Mr=Ar,Nr=function(){var t=this;this.list=[],this.push=function(t){this.list.push({bytes:t.bytes,dts:t.dts,pts:t.pts,keyFrame:t.keyFrame,metaDataTag:t.metaDataTag})},Object.defineProperty(this,"length",{get:function(){return t.list.length}})};Pr=function(t,e){"number"==typeof e.pts&&(void 0===t.timelineStartInfo.pts?t.timelineStartInfo.pts=e.pts:t.timelineStartInfo.pts=Math.min(t.timelineStartInfo.pts,e.pts)),"number"==typeof e.dts&&(void 0===t.timelineStartInfo.dts?t.timelineStartInfo.dts=e.dts:t.timelineStartInfo.dts=Math.min(t.timelineStartInfo.dts,e.dts))},xr=function(t,e){var i=new Cr(Cr.METADATA_TAG);return i.dts=e,i.pts=e,i.writeMetaDataDouble("videocodecid",7),i.writeMetaDataDouble("width",t.width),i.writeMetaDataDouble("height",t.height),i},Ur=function(t,e){var i,r=new Cr(Cr.VIDEO_TAG,!0);for(r.dts=e,r.pts=e,r.writeByte(1),r.writeByte(t.profileIdc),r.writeByte(t.profileCompatibility),r.writeByte(t.levelIdc),r.writeByte(255),r.writeByte(225),r.writeShort(t.sps[0].length),r.writeBytes(t.sps[0]),r.writeByte(t.pps.length),i=0;i<t.pps.length;++i)r.writeShort(t.pps[i].length),r.writeBytes(t.pps[i]);return r},(Or=function(t){var e,i=[],r=[];Or.prototype.init.call(this),this.push=function(e){Pr(t,e),t&&(t.audioobjecttype=e.audioobjecttype,t.channelcount=e.channelcount,t.samplerate=e.samplerate,t.samplingfrequencyindex=e.samplingfrequencyindex,t.samplesize=e.samplesize,t.extraData=t.audioobjecttype<<11|t.samplingfrequencyindex<<7|t.channelcount<<3),e.pts=Math.round(e.pts/90),e.dts=Math.round(e.dts/90),i.push(e)},this.flush=function(){var n,a,s,o=new Nr;if(0!==i.length){for(s=-1/0;i.length;)n=i.shift(),r.length&&n.pts>=r[0]&&(s=r.shift(),this.writeMetaDataTags(o,s)),(t.extraData!==e||n.pts-s>=1e3)&&(this.writeMetaDataTags(o,n.pts),e=t.extraData,s=n.pts),(a=new Cr(Cr.AUDIO_TAG)).pts=n.pts,a.dts=n.dts,a.writeBytes(n.data),o.push(a.finalize());r.length=0,e=null,this.trigger("data",{track:t,tags:o.list}),this.trigger("done","AudioSegmentStream")}else this.trigger("done","AudioSegmentStream")},this.writeMetaDataTags=function(e,i){var r;(r=new Cr(Cr.METADATA_TAG)).pts=i,r.dts=i,r.writeMetaDataDouble("audiocodecid",10),r.writeMetaDataBoolean("stereo",2===t.channelcount),r.writeMetaDataDouble("audiosamplerate",t.samplerate),r.writeMetaDataDouble("audiosamplesize",16),e.push(r.finalize()),(r=new Cr(Cr.AUDIO_TAG,!0)).pts=i,r.dts=i,r.view.setUint16(r.position,t.extraData),r.position+=2,r.length=Math.max(r.length,r.position),e.push(r.finalize())},this.onVideoKeyFrame=function(t){r.push(t)}}).prototype=new Dr,(kr=function(t){var e,i,r=[];kr.prototype.init.call(this),this.finishFrame=function(r,n){if(n){if(e&&t&&t.newMetadata&&(n.keyFrame||0===r.length)){var a=xr(e,n.dts).finalize(),s=Ur(t,n.dts).finalize();a.metaDataTag=s.metaDataTag=!0,r.push(a),r.push(s),t.newMetadata=!1,this.trigger("keyframe",n.dts)}n.endNalUnit(),r.push(n.finalize()),i=null}},this.push=function(e){Pr(t,e),e.pts=Math.round(e.pts/90),e.dts=Math.round(e.dts/90),r.push(e)},this.flush=function(){for(var n,a=new Nr;r.length&&"access_unit_delimiter_rbsp"!==r[0].nalUnitType;)r.shift();if(0!==r.length){for(;r.length;)"seq_parameter_set_rbsp"===(n=r.shift()).nalUnitType?(t.newMetadata=!0,e=n.config,t.width=e.width,t.height=e.height,t.sps=[n.data],t.profileIdc=e.profileIdc,t.levelIdc=e.levelIdc,t.profileCompatibility=e.profileCompatibility,i.endNalUnit()):"pic_parameter_set_rbsp"===n.nalUnitType?(t.newMetadata=!0,t.pps=[n.data],i.endNalUnit()):"access_unit_delimiter_rbsp"===n.nalUnitType?(i&&this.finishFrame(a,i),(i=new Cr(Cr.VIDEO_TAG)).pts=n.pts,i.dts=n.dts):("slice_layer_without_partitioning_rbsp_idr"===n.nalUnitType&&(i.keyFrame=!0),i.endNalUnit()),i.startNalUnit(),i.writeBytes(n.data);i&&this.finishFrame(a,i),this.trigger("data",{track:t,tags:a.list}),this.trigger("done","VideoSegmentStream")}else this.trigger("done","VideoSegmentStream")}}).prototype=new Dr,(Er=function(t){var e,i,r,n,a,s,o,u,p,c,l,d,f=this;Er.prototype.init.call(this),t=t||{},this.metadataStream=new Ir.MetadataStream,t.metadataStream=this.metadataStream,e=new Ir.TransportPacketStream,i=new Ir.TransportParseStream,r=new Ir.ElementaryStream,n=new Ir.TimestampRolloverStream("video"),a=new Ir.TimestampRolloverStream("audio"),s=new Ir.TimestampRolloverStream("timed-metadata"),o=new Rr,u=new Lr,d=new Mr(t),e.pipe(i).pipe(r),r.pipe(n).pipe(u),r.pipe(a).pipe(o),r.pipe(s).pipe(this.metadataStream).pipe(d),l=new Ir.CaptionStream(t),u.pipe(l).pipe(d),r.on("data",(function(t){var e,i,r;if("metadata"===t.type){for(e=t.tracks.length;e--;)"video"===t.tracks[e].type?i=t.tracks[e]:"audio"===t.tracks[e].type&&(r=t.tracks[e]);i&&!p&&(d.numberOfTracks++,p=new kr(i),u.pipe(p).pipe(d)),r&&!c&&(d.numberOfTracks++,c=new Or(r),o.pipe(c).pipe(d),p&&p.on("keyframe",c.onVideoKeyFrame))}})),this.push=function(t){e.push(t)},this.flush=function(){e.flush()},this.resetCaptions=function(){l.reset()},d.on("data",(function(t){f.trigger("data",t)})),d.on("done",(function(){f.trigger("done")}))}).prototype=new Dr;var jr=_r,Fr={tag:_r,Transmuxer:Er,getFlvHeader:function(t,e,i){var r,n,a,s=new Uint8Array(9),o=new DataView(s.buffer);return t=t||0,e=void 0===e||e,i=void 0===i||i,o.setUint8(0,70),o.setUint8(1,76),o.setUint8(2,86),o.setUint8(3,1),o.setUint8(4,(e?4:0)|(i?1:0)),o.setUint32(5,s.byteLength),t<=0?((n=new Uint8Array(s.byteLength+4)).set(s),n.set([0,0,0,0],s.byteLength),n):((r=new jr(jr.METADATA_TAG)).pts=r.dts=0,r.writeMetaDataDouble("duration",t),a=r.finalize().length,(n=new Uint8Array(s.byteLength+a)).set(s),n.set(o.byteLength,a),n)}},Br=Ri,zr=Se,Gr=He,Vr=Ke,Wr=yt.ONE_SECOND_IN_TS,$r=qi,qr=function t(e,i){var r=[],n=0,a=0,s=0,o=1/0,u=null,p=null;i=i||{},t.prototype.init.call(this),this.push=function(t){Vr.collectDtsInfo(e,t),e&&$r.forEach((function(i){e[i]=t[i]})),r.push(t)},this.setEarliestDts=function(t){a=t},this.setVideoBaseMediaDecodeTime=function(t){o=t},this.setAudioAppendStart=function(t){s=t},this.processFrames_=function(){var t,c,l,d,f;0!==r.length&&0!==(t=Gr.trimAdtsFramesByEarliestDts(r,e,a)).length&&(e.baseMediaDecodeTime=Vr.calculateTrackBaseMediaDecodeTime(e,i.keepOriginalTimestamps),Gr.prefixWithSilence(e,t,s,o),e.samples=Gr.generateSampleTable(t),l=zr.mdat(Gr.concatenateFrameData(t)),r=[],c=zr.moof(n,[e]),n++,e.initSegment=zr.initSegment([e]),(d=new Uint8Array(c.byteLength+l.byteLength)).set(c),d.set(l,c.byteLength),Vr.clearDtsInfo(e),null===u&&(p=u=t[0].pts),p+=t.length*(1024*Wr/e.samplerate),f={start:u},this.trigger("timingInfo",f),this.trigger("data",{track:e,boxes:d}))},this.flush=function(){this.processFrames_(),this.trigger("timingInfo",{start:u,end:p}),this.resetTiming_(),this.trigger("done","AudioSegmentStream")},this.partialFlush=function(){this.processFrames_(),this.trigger("partialdone","AudioSegmentStream")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline","AudioSegmentStream")},this.resetTiming_=function(){Vr.clearDtsInfo(e),u=null,p=null},this.reset=function(){this.resetTiming_(),r=[],this.trigger("reset")}};qr.prototype=new gt;var Xr=qr,Hr=Se,Yr=Ke,Kr=Ge,Jr=Xi,Qr=function t(e,i){var r,n,a,s=0,o=[],u=[],p=null,c=null,l=!0;i=i||{},t.prototype.init.call(this),this.push=function(t){Yr.collectDtsInfo(e,t),void 0===e.timelineStartInfo.dts&&(e.timelineStartInfo.dts=t.dts),"seq_parameter_set_rbsp"!==t.nalUnitType||r||(r=t.config,e.sps=[t.data],Jr.forEach((function(t){e[t]=r[t]}),this)),"pic_parameter_set_rbsp"!==t.nalUnitType||n||(n=t.data,e.pps=[t.data]),o.push(t)},this.processNals_=function(t){var r;for(o=u.concat(o);o.length&&"access_unit_delimiter_rbsp"!==o[0].nalUnitType;)o.shift();if(0!==o.length){var n=Kr.groupNalsIntoFrames(o);if(n.length)if(u=n[n.length-1],t&&(n.pop(),n.duration-=u.duration,n.nalCount-=u.length,n.byteLength-=u.byteLength),n.length){if(this.trigger("timelineStartInfo",e.timelineStartInfo),l){if(!(a=Kr.groupFramesIntoGops(n))[0][0].keyFrame){if(!(a=Kr.extendFirstKeyFrame(a))[0][0].keyFrame)return o=[].concat.apply([],n).concat(u),void(u=[]);(n=[].concat.apply([],a)).duration=a.duration}l=!1}for(null===p&&(p=n[0].pts,c=p),c+=n.duration,this.trigger("timingInfo",{start:p,end:c}),r=0;r<n.length;r++){var d=n[r];e.samples=Kr.generateSampleTableForFrame(d);var f=Hr.mdat(Kr.concatenateNalDataForFrame(d));Yr.clearDtsInfo(e),Yr.collectDtsInfo(e,d),e.baseMediaDecodeTime=Yr.calculateTrackBaseMediaDecodeTime(e,i.keepOriginalTimestamps);var h=Hr.moof(s,[e]);s++,e.initSegment=Hr.initSegment([e]);var g=new Uint8Array(h.byteLength+f.byteLength);g.set(h),g.set(f,h.byteLength),this.trigger("data",{track:e,boxes:g,sequence:s,videoFrameDts:d.dts,videoFramePts:d.pts})}o=[]}else o=[]}},this.resetTimingAndConfig_=function(){r=void 0,n=void 0,p=null,c=null},this.partialFlush=function(){this.processNals_(!0),this.trigger("partialdone","VideoSegmentStream")},this.flush=function(){this.processNals_(!1),this.resetTimingAndConfig_(),this.trigger("done","VideoSegmentStream")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline","VideoSegmentStream")},this.reset=function(){this.resetTimingAndConfig_(),u=[],o=[],l=!0,this.trigger("reset")}};Qr.prototype=new gt;var Zr=gt,tn=Ri,en=fe,rn=Xr,nn=Qr,an=Ke,sn=Fi.isLikelyAacData,on=_t,un=$i,pn=yt,cn=function(t){return t.prototype=new Zr,t.prototype.init.call(t),t},ln=function(t,e){t.on("data",e.trigger.bind(e,"data")),t.on("done",e.trigger.bind(e,"done")),t.on("partialdone",e.trigger.bind(e,"partialdone")),t.on("endedtimeline",e.trigger.bind(e,"endedtimeline")),t.on("audioTimingInfo",e.trigger.bind(e,"audioTimingInfo")),t.on("videoTimingInfo",e.trigger.bind(e,"videoTimingInfo")),t.on("trackinfo",e.trigger.bind(e,"trackinfo")),t.on("id3Frame",(function(i){i.dispatchType=t.metadataStream.dispatchType,i.cueTime=pn.videoTsToSeconds(i.pts),e.trigger("id3Frame",i)})),t.on("caption",(function(t){e.trigger("caption",t)}))},dn=function t(e){var i=null,r=!0;e=e||{},t.prototype.init.call(this),e.baseMediaDecodeTime=e.baseMediaDecodeTime||0,this.push=function(t){if(r){var n=sn(t);!n||i&&"aac"===i.type?n||i&&"ts"===i.type||(i=function(t){var e={type:"ts",tracks:{audio:null,video:null},packet:new tn.TransportPacketStream,parse:new tn.TransportParseStream,elementary:new tn.ElementaryStream,timestampRollover:new tn.TimestampRolloverStream,adts:new en.Adts,h264:new en.h264.H264Stream,captionStream:new tn.CaptionStream(t),metadataStream:new tn.MetadataStream};return e.headOfPipeline=e.packet,e.packet.pipe(e.parse).pipe(e.elementary).pipe(e.timestampRollover),e.timestampRollover.pipe(e.h264),e.h264.pipe(e.captionStream),e.timestampRollover.pipe(e.metadataStream),e.timestampRollover.pipe(e.adts),e.elementary.on("data",(function(i){if("metadata"===i.type){for(var r=0;r<i.tracks.length;r++)e.tracks[i.tracks[r].type]||(e.tracks[i.tracks[r].type]=i.tracks[r],e.tracks[i.tracks[r].type].timelineStartInfo.baseMediaDecodeTime=t.baseMediaDecodeTime);e.tracks.video&&!e.videoSegmentStream&&(e.videoSegmentStream=new nn(e.tracks.video,t),e.videoSegmentStream.on("timelineStartInfo",(function(i){e.tracks.audio&&!t.keepOriginalTimestamps&&e.audioSegmentStream.setEarliestDts(i.dts-t.baseMediaDecodeTime)})),e.videoSegmentStream.on("timingInfo",e.trigger.bind(e,"videoTimingInfo")),e.videoSegmentStream.on("data",(function(t){e.trigger("data",{type:"video",data:t})})),e.videoSegmentStream.on("done",e.trigger.bind(e,"done")),e.videoSegmentStream.on("partialdone",e.trigger.bind(e,"partialdone")),e.videoSegmentStream.on("endedtimeline",e.trigger.bind(e,"endedtimeline")),e.h264.pipe(e.videoSegmentStream)),e.tracks.audio&&!e.audioSegmentStream&&(e.audioSegmentStream=new rn(e.tracks.audio,t),e.audioSegmentStream.on("data",(function(t){e.trigger("data",{type:"audio",data:t})})),e.audioSegmentStream.on("done",e.trigger.bind(e,"done")),e.audioSegmentStream.on("partialdone",e.trigger.bind(e,"partialdone")),e.audioSegmentStream.on("endedtimeline",e.trigger.bind(e,"endedtimeline")),e.audioSegmentStream.on("timingInfo",e.trigger.bind(e,"audioTimingInfo")),e.adts.pipe(e.audioSegmentStream)),e.trigger("trackinfo",{hasAudio:!!e.tracks.audio,hasVideo:!!e.tracks.video})}})),e.captionStream.on("data",(function(i){var r;r=e.tracks.video&&e.tracks.video.timelineStartInfo.pts||0,i.startTime=pn.metadataTsToSeconds(i.startPts,r,t.keepOriginalTimestamps),i.endTime=pn.metadataTsToSeconds(i.endPts,r,t.keepOriginalTimestamps),e.trigger("caption",i)})),(e=cn(e)).metadataStream.on("data",e.trigger.bind(e,"id3Frame")),e}(e),ln(i,this)):(i=function(t){var e={type:"aac",tracks:{audio:null},metadataStream:new tn.MetadataStream,aacStream:new un,audioRollover:new tn.TimestampRolloverStream("audio"),timedMetadataRollover:new tn.TimestampRolloverStream("timed-metadata"),adtsStream:new on(!0)};return e.headOfPipeline=e.aacStream,e.aacStream.pipe(e.audioRollover).pipe(e.adtsStream),e.aacStream.pipe(e.timedMetadataRollover).pipe(e.metadataStream),e.metadataStream.on("timestamp",(function(t){e.aacStream.setTimestamp(t.timeStamp)})),e.aacStream.on("data",(function(i){"timed-metadata"!==i.type&&"audio"!==i.type||e.audioSegmentStream||(e.tracks.audio=e.tracks.audio||{timelineStartInfo:{baseMediaDecodeTime:t.baseMediaDecodeTime},codec:"adts",type:"audio"},e.audioSegmentStream=new rn(e.tracks.audio,t),e.audioSegmentStream.on("data",(function(t){e.trigger("data",{type:"audio",data:t})})),e.audioSegmentStream.on("partialdone",e.trigger.bind(e,"partialdone")),e.audioSegmentStream.on("done",e.trigger.bind(e,"done")),e.audioSegmentStream.on("endedtimeline",e.trigger.bind(e,"endedtimeline")),e.audioSegmentStream.on("timingInfo",e.trigger.bind(e,"audioTimingInfo")),e.adtsStream.pipe(e.audioSegmentStream),e.trigger("trackinfo",{hasAudio:!!e.tracks.audio,hasVideo:!!e.tracks.video}))})),(e=cn(e)).metadataStream.on("data",e.trigger.bind(e,"id3Frame")),e}(e),ln(i,this)),r=!1}i.headOfPipeline.push(t)},this.flush=function(){i&&(r=!0,i.headOfPipeline.flush())},this.partialFlush=function(){i&&i.headOfPipeline.partialFlush()},this.endTimeline=function(){i&&i.headOfPipeline.endTimeline()},this.reset=function(){i&&i.headOfPipeline.reset()},this.setBaseMediaDecodeTime=function(t){e.keepOriginalTimestamps||(e.baseMediaDecodeTime=t),i&&(i.tracks.audio&&(i.tracks.audio.timelineStartInfo.dts=void 0,i.tracks.audio.timelineStartInfo.pts=void 0,an.clearDtsInfo(i.tracks.audio),i.audioRollover&&i.audioRollover.discontinuity()),i.tracks.video&&(i.videoSegmentStream&&(i.videoSegmentStream.gopCache_=[]),i.tracks.video.timelineStartInfo.dts=void 0,i.tracks.video.timelineStartInfo.pts=void 0,an.clearDtsInfo(i.tracks.video)),i.timestampRollover&&i.timestampRollover.discontinuity())},this.setRemux=function(t){e.remux=t,i&&i.coalesceStream&&i.coalesceStream.setRemux(t)},this.setAudioAppendStart=function(t){i&&i.tracks.audio&&i.audioSegmentStream&&i.audioSegmentStream.setAudioAppendStart(t)},this.alignGopsWith=function(t){}};dn.prototype=new Zr;var fn,hn,gn={Transmuxer:dn},mn=Math.pow(2,32),yn=function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength),i={version:t[0],flags:new Uint8Array(t.subarray(1,4)),references:[],referenceId:e.getUint32(4),timescale:e.getUint32(8)},r=12;0===i.version?(i.earliestPresentationTime=e.getUint32(r),i.firstOffset=e.getUint32(r+4),r+=8):(i.earliestPresentationTime=e.getUint32(r)*mn+e.getUint32(r+4),i.firstOffset=e.getUint32(r+8)*mn+e.getUint32(r+12),r+=16),r+=2;var n=e.getUint16(r);for(r+=2;n>0;r+=12,n--)i.references.push({referenceType:(128&t[r])>>>7,referencedSize:2147483647&e.getUint32(r),subsegmentDuration:e.getUint32(r+4),startsWithSap:!!(128&t[r+8]),sapType:(112&t[r+8])>>>4,sapDeltaTime:268435455&e.getUint32(r+8)});return i},bn=Math.pow(2,32),vn=function(t){return new Date(1e3*t-20828448e5)},wn=_e,Sn=function(t){var e,i,r=new DataView(t.buffer,t.byteOffset,t.byteLength),n=[];for(e=0;e+4<t.length;e+=i)if(i=r.getUint32(e),e+=4,i<=0)n.push("<span style='color:red;'>MALFORMED DATA</span>");else switch(31&t[e]){case 1:n.push("slice_layer_without_partitioning_rbsp");break;case 5:n.push("slice_layer_without_partitioning_rbsp_idr");break;case 6:n.push("sei_rbsp");break;case 7:n.push("seq_parameter_set_rbsp");break;case 8:n.push("pic_parameter_set_rbsp");break;case 9:n.push("access_unit_delimiter_rbsp");break;default:n.push("UNKNOWN NAL - "+t[e]&31)}return n},Tn={avc1:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength);return{dataReferenceIndex:e.getUint16(6),width:e.getUint16(24),height:e.getUint16(26),horizresolution:e.getUint16(28)+e.getUint16(30)/16,vertresolution:e.getUint16(32)+e.getUint16(34)/16,frameCount:e.getUint16(40),depth:e.getUint16(74),config:fn(t.subarray(78,t.byteLength))}},avcC:function(t){var e,i,r,n,a=new DataView(t.buffer,t.byteOffset,t.byteLength),s={configurationVersion:t[0],avcProfileIndication:t[1],profileCompatibility:t[2],avcLevelIndication:t[3],lengthSizeMinusOne:3&t[4],sps:[],pps:[]},o=31&t[5];for(r=6,n=0;n<o;n++)i=a.getUint16(r),r+=2,s.sps.push(new Uint8Array(t.subarray(r,r+i))),r+=i;for(e=t[r],r++,n=0;n<e;n++)i=a.getUint16(r),r+=2,s.pps.push(new Uint8Array(t.subarray(r,r+i))),r+=i;return s},btrt:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength);return{bufferSizeDB:e.getUint32(0),maxBitrate:e.getUint32(4),avgBitrate:e.getUint32(8)}},edts:function(t){return{boxes:fn(t)}},elst:function(t){var e,i=new DataView(t.buffer,t.byteOffset,t.byteLength),r={version:i.getUint8(0),flags:new Uint8Array(t.subarray(1,4)),edits:[]},n=i.getUint32(4);for(e=8;n;n--)0===r.version?(r.edits.push({segmentDuration:i.getUint32(e),mediaTime:i.getInt32(e+4),mediaRate:i.getUint16(e+8)+i.getUint16(e+10)/65536}),e+=12):(r.edits.push({segmentDuration:i.getUint32(e)*bn+i.getUint32(e+4),mediaTime:i.getUint32(e+8)*bn+i.getUint32(e+12),mediaRate:i.getUint16(e+16)+i.getUint16(e+18)/65536}),e+=20);return r},esds:function(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),esId:t[6]<<8|t[7],streamPriority:31&t[8],decoderConfig:{objectProfileIndication:t[11],streamType:t[12]>>>2&63,bufferSize:t[13]<<16|t[14]<<8|t[15],maxBitrate:t[16]<<24|t[17]<<16|t[18]<<8|t[19],avgBitrate:t[20]<<24|t[21]<<16|t[22]<<8|t[23],decoderConfigDescriptor:{tag:t[24],length:t[25],audioObjectType:t[26]>>>3&31,samplingFrequencyIndex:(7&t[26])<<1|t[27]>>>7&1,channelConfiguration:t[27]>>>3&15}}}},ftyp:function(t){for(var e=new DataView(t.buffer,t.byteOffset,t.byteLength),i={majorBrand:wn(t.subarray(0,4)),minorVersion:e.getUint32(4),compatibleBrands:[]},r=8;r<t.byteLength;)i.compatibleBrands.push(wn(t.subarray(r,r+4))),r+=4;return i},dinf:function(t){return{boxes:fn(t)}},dref:function(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),dataReferences:fn(t.subarray(8))}},hdlr:function(t){var e={version:new DataView(t.buffer,t.byteOffset,t.byteLength).getUint8(0),flags:new Uint8Array(t.subarray(1,4)),handlerType:wn(t.subarray(8,12)),name:""},i=8;for(i=24;i<t.byteLength;i++){if(0===t[i]){i++;break}e.name+=String.fromCharCode(t[i])}return e.name=decodeURIComponent(escape(e.name)),e},mdat:function(t){return{byteLength:t.byteLength,nals:Sn(t)}},mdhd:function(t){var e,i=new DataView(t.buffer,t.byteOffset,t.byteLength),r=4,n={version:i.getUint8(0),flags:new Uint8Array(t.subarray(1,4)),language:""};return 1===n.version?(r+=4,n.creationTime=vn(i.getUint32(r)),r+=8,n.modificationTime=vn(i.getUint32(r)),r+=4,n.timescale=i.getUint32(r),r+=8,n.duration=i.getUint32(r)):(n.creationTime=vn(i.getUint32(r)),r+=4,n.modificationTime=vn(i.getUint32(r)),r+=4,n.timescale=i.getUint32(r),r+=4,n.duration=i.getUint32(r)),r+=4,e=i.getUint16(r),n.language+=String.fromCharCode(96+(e>>10)),n.language+=String.fromCharCode(96+((992&e)>>5)),n.language+=String.fromCharCode(96+(31&e)),n},mdia:function(t){return{boxes:fn(t)}},mfhd:function(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),sequenceNumber:t[4]<<24|t[5]<<16|t[6]<<8|t[7]}},minf:function(t){return{boxes:fn(t)}},mp4a:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength),i={dataReferenceIndex:e.getUint16(6),channelcount:e.getUint16(16),samplesize:e.getUint16(18),samplerate:e.getUint16(24)+e.getUint16(26)/65536};return t.byteLength>28&&(i.streamDescriptor=fn(t.subarray(28))[0]),i},moof:function(t){return{boxes:fn(t)}},moov:function(t){return{boxes:fn(t)}},mvex:function(t){return{boxes:fn(t)}},mvhd:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength),i=4,r={version:e.getUint8(0),flags:new Uint8Array(t.subarray(1,4))};return 1===r.version?(i+=4,r.creationTime=vn(e.getUint32(i)),i+=8,r.modificationTime=vn(e.getUint32(i)),i+=4,r.timescale=e.getUint32(i),i+=8,r.duration=e.getUint32(i)):(r.creationTime=vn(e.getUint32(i)),i+=4,r.modificationTime=vn(e.getUint32(i)),i+=4,r.timescale=e.getUint32(i),i+=4,r.duration=e.getUint32(i)),i+=4,r.rate=e.getUint16(i)+e.getUint16(i+2)/16,i+=4,r.volume=e.getUint8(i)+e.getUint8(i+1)/8,i+=2,i+=2,i+=8,r.matrix=new Uint32Array(t.subarray(i,i+36)),i+=36,i+=24,r.nextTrackId=e.getUint32(i),r},pdin:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength);return{version:e.getUint8(0),flags:new Uint8Array(t.subarray(1,4)),rate:e.getUint32(4),initialDelay:e.getUint32(8)}},sdtp:function(t){var e,i={version:t[0],flags:new Uint8Array(t.subarray(1,4)),samples:[]};for(e=4;e<t.byteLength;e++)i.samples.push({dependsOn:(48&t[e])>>4,isDependedOn:(12&t[e])>>2,hasRedundancy:3&t[e]});return i},sidx:yn,smhd:function(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),balance:t[4]+t[5]/256}},stbl:function(t){return{boxes:fn(t)}},ctts:function(t){var e,i=new DataView(t.buffer,t.byteOffset,t.byteLength),r={version:i.getUint8(0),flags:new Uint8Array(t.subarray(1,4)),compositionOffsets:[]},n=i.getUint32(4);for(e=8;n;e+=8,n--)r.compositionOffsets.push({sampleCount:i.getUint32(e),sampleOffset:i[0===r.version?"getUint32":"getInt32"](e+4)});return r},stss:function(t){var e,i=new DataView(t.buffer,t.byteOffset,t.byteLength),r={version:i.getUint8(0),flags:new Uint8Array(t.subarray(1,4)),syncSamples:[]},n=i.getUint32(4);for(e=8;n;e+=4,n--)r.syncSamples.push(i.getUint32(e));return r},stco:function(t){var e,i=new DataView(t.buffer,t.byteOffset,t.byteLength),r={version:t[0],flags:new Uint8Array(t.subarray(1,4)),chunkOffsets:[]},n=i.getUint32(4);for(e=8;n;e+=4,n--)r.chunkOffsets.push(i.getUint32(e));return r},stsc:function(t){var e,i=new DataView(t.buffer,t.byteOffset,t.byteLength),r=i.getUint32(4),n={version:t[0],flags:new Uint8Array(t.subarray(1,4)),sampleToChunks:[]};for(e=8;r;e+=12,r--)n.sampleToChunks.push({firstChunk:i.getUint32(e),samplesPerChunk:i.getUint32(e+4),sampleDescriptionIndex:i.getUint32(e+8)});return n},stsd:function(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),sampleDescriptions:fn(t.subarray(8))}},stsz:function(t){var e,i=new DataView(t.buffer,t.byteOffset,t.byteLength),r={version:t[0],flags:new Uint8Array(t.subarray(1,4)),sampleSize:i.getUint32(4),entries:[]};for(e=12;e<t.byteLength;e+=4)r.entries.push(i.getUint32(e));return r},stts:function(t){var e,i=new DataView(t.buffer,t.byteOffset,t.byteLength),r={version:t[0],flags:new Uint8Array(t.subarray(1,4)),timeToSamples:[]},n=i.getUint32(4);for(e=8;n;e+=8,n--)r.timeToSamples.push({sampleCount:i.getUint32(e),sampleDelta:i.getUint32(e+4)});return r},styp:function(t){return Tn.ftyp(t)},tfdt:De,tfhd:Oe,tkhd:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength),i=4,r={version:e.getUint8(0),flags:new Uint8Array(t.subarray(1,4))};return 1===r.version?(i+=4,r.creationTime=vn(e.getUint32(i)),i+=8,r.modificationTime=vn(e.getUint32(i)),i+=4,r.trackId=e.getUint32(i),i+=4,i+=8,r.duration=e.getUint32(i)):(r.creationTime=vn(e.getUint32(i)),i+=4,r.modificationTime=vn(e.getUint32(i)),i+=4,r.trackId=e.getUint32(i),i+=4,i+=4,r.duration=e.getUint32(i)),i+=4,i+=8,r.layer=e.getUint16(i),i+=2,r.alternateGroup=e.getUint16(i),i+=2,r.volume=e.getUint8(i)+e.getUint8(i+1)/8,i+=2,i+=2,r.matrix=new Uint32Array(t.subarray(i,i+36)),i+=36,r.width=e.getUint16(i)+e.getUint16(i+2)/65536,i+=4,r.height=e.getUint16(i)+e.getUint16(i+2)/65536,r},traf:function(t){return{boxes:fn(t)}},trak:function(t){return{boxes:fn(t)}},trex:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength);return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),trackId:e.getUint32(4),defaultSampleDescriptionIndex:e.getUint32(8),defaultSampleDuration:e.getUint32(12),defaultSampleSize:e.getUint32(16),sampleDependsOn:3&t[20],sampleIsDependedOn:(192&t[21])>>6,sampleHasRedundancy:(48&t[21])>>4,samplePaddingValue:(14&t[21])>>1,sampleIsDifferenceSample:!!(1&t[21]),sampleDegradationPriority:e.getUint16(22)}},trun:xe,"url ":function(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4))}},vmhd:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength);return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),graphicsmode:e.getUint16(4),opcolor:new Uint16Array([e.getUint16(6),e.getUint16(8),e.getUint16(10)])}}},_n={inspect:fn=function(t){for(var e,i,r,n,a,s=0,o=[],u=new ArrayBuffer(t.length),p=new Uint8Array(u),c=0;c<t.length;++c)p[c]=t[c];for(e=new DataView(u);s<t.byteLength;)i=e.getUint32(s),r=wn(t.subarray(s+4,s+8)),n=i>1?s+i:t.byteLength,(a=(Tn[r]||function(t){return{data:t}})(t.subarray(s+8,n))).size=i,a.type=r,o.push(a),s=n;return o},textify:hn=function(t,e){var i;return e=e||0,i=new Array(2*e+1).join(" "),t.map((function(t,r){return i+t.type+"\n"+Object.keys(t).filter((function(t){return"type"!==t&&"boxes"!==t})).map((function(e){var r=i+"  "+e+": ",n=t[e];if(n instanceof Uint8Array||n instanceof Uint32Array){var a=Array.prototype.slice.call(new Uint8Array(n.buffer,n.byteOffset,n.byteLength)).map((function(t){return" "+("00"+t.toString(16)).slice(-2)})).join("").match(/.{1,24}/g);return a?1===a.length?r+"<"+a.join("").slice(1)+">":r+"<\n"+a.map((function(t){return i+"  "+t})).join("\n")+"\n"+i+"  >":r+"<>"}return r+JSON.stringify(n,null,2).split("\n").map((function(t,e){return 0===e?t:i+"  "+t})).join("\n")})).join("\n")+(t.boxes?"\n"+hn(t.boxes,e+1):"")})).join("\n")},parseType:wn,findBox:ke,parseTraf:Tn.traf,parseTfdt:Tn.tfdt,parseHdlr:Tn.hdlr,parseTfhd:Tn.tfhd,parseTrun:Tn.trun,parseSidx:Tn.sidx},An={8:"audio",9:"video",18:"metadata"},En=function(t){for(var e,i=[];t.byteLength>0;)e=0,i.push("0x"+("00"+t[e++].toString(16)).slice(-2).toUpperCase()),t=t.subarray(1);return i.join(" ")},kn=function(t,e){var i=t[0]&parseInt("00001111",2);return(e=e||{}).frameType=["Unknown","Keyframe (for AVC, a seekable frame)","Inter frame (for AVC, a nonseekable frame)","Disposable inter frame (H.263 only)","Generated keyframe (reserved for server use only)","Video info/command frame"][(t[0]&parseInt("11110000",2))>>>4],e.codecID=i,7===i?function(t,e){var i=t[1]&parseInt("01111111",2)<<16|t[2]<<8|t[3];return(e=e||{}).avcPacketType=["AVC Sequence Header","AVC NALU","AVC End-of-Sequence"][t[0]],e.CompositionTime=t[1]&parseInt("10000000",2)?-i:i,1===t[0]?e.nalUnitTypeRaw=En(t.subarray(4,100)):e.data=En(t.subarray(4)),e}(t.subarray(1),e):e},On=function(t,e){var i=(t[0]&parseInt("11110000",2))>>>4;return(e=e||{}).soundFormat=["Linear PCM, platform endian","ADPCM","MP3","Linear PCM, little endian","Nellymoser 16-kHz mono","Nellymoser 8-kHz mono","Nellymoser","G.711 A-law logarithmic PCM","G.711 mu-law logarithmic PCM","reserved","AAC","Speex","MP3 8-Khz","Device-specific sound"][i],e.soundRate=["5.5-kHz","11-kHz","22-kHz","44-kHz"][(t[0]&parseInt("00001100",2))>>>2],e.soundSize=(t[0]&parseInt("00000010",2))>>>1?"16-bit":"8-bit",e.soundType=t[0]&parseInt("00000001",2)?"Stereo":"Mono",10===i?function(t,e){return(e=e||{}).aacPacketType=["AAC Sequence Header","AAC Raw"][t[0]],e.data=En(t.subarray(1)),e}(t.subarray(1),e):e},Pn=function(t){var e=function(t){return{tagType:An[t[0]],dataSize:t[1]<<16|t[2]<<8|t[3],timestamp:t[7]<<24|t[4]<<16|t[5]<<8|t[6],streamID:t[8]<<16|t[9]<<8|t[10]}}(t);switch(t[0]){case 8:On(t.subarray(11),e);break;case 9:kn(t.subarray(11),e)}return e},xn={inspectTag:Pn,inspect:function(t){var e,i,r=9,n=[];for(r+=4;r<t.byteLength;)e=t[r+1]<<16,e|=t[r+2]<<8,e|=t[r+3],e+=11,i=t.subarray(r,r+e),n.push(Pn(i)),r+=e+4;return n},textify:function(t){return JSON.stringify(t,null,2)}},Un=di,Dn=function(t){var e=31&t[1];return e<<=8,e|=t[2]},Cn=function(t){return!!(64&t[1])},In=function(t){var e=0;return(48&t[3])>>>4>1&&(e+=t[4]+1),e},Rn=function(t){switch(t){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},Ln={parseType:function(t,e){var i=Dn(t);return 0===i?"pat":i===e?"pmt":e?"pes":null},parsePat:function(t){var e=Cn(t),i=4+In(t);return e&&(i+=t[i]+1),(31&t[i+10])<<8|t[i+11]},parsePmt:function(t){var e={},i=Cn(t),r=4+In(t);if(i&&(r+=t[r]+1),1&t[r+5]){var n;n=3+((15&t[r+1])<<8|t[r+2])-4;for(var a=12+((15&t[r+10])<<8|t[r+11]);a<n;){var s=r+a;e[(31&t[s+1])<<8|t[s+2]]=t[s],a+=5+((15&t[s+3])<<8|t[s+4])}return e}},parsePayloadUnitStartIndicator:Cn,parsePesType:function(t,e){switch(e[Dn(t)]){case Un.H264_STREAM_TYPE:return"video";case Un.ADTS_STREAM_TYPE:return"audio";case Un.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(t){if(!Cn(t))return null;var e=4+In(t);if(e>=t.byteLength)return null;var i,r=null;return 192&(i=t[e+7])&&((r={}).pts=(14&t[e+9])<<27|(255&t[e+10])<<20|(254&t[e+11])<<12|(255&t[e+12])<<5|(254&t[e+13])>>>3,r.pts*=4,r.pts+=(6&t[e+13])>>>1,r.dts=r.pts,64&i&&(r.dts=(14&t[e+14])<<27|(255&t[e+15])<<20|(254&t[e+16])<<12|(255&t[e+17])<<5|(254&t[e+18])>>>3,r.dts*=4,r.dts+=(6&t[e+18])>>>1)),r},videoPacketContainsKeyFrame:function(t){for(var e=4+In(t),i=t.subarray(e),r=0,n=0,a=!1;n<i.byteLength-3;n++)if(1===i[n+2]){r=n+5;break}for(;r<i.byteLength;)switch(i[r]){case 0:if(0!==i[r-1]){r+=2;break}if(0!==i[r-2]){r++;break}n+3!==r-2&&"slice_layer_without_partitioning_rbsp_idr"===Rn(31&i[n+3])&&(a=!0);do{r++}while(1!==i[r]&&r<i.length);n=r-2,r+=3;break;case 1:if(0!==i[r-1]||0!==i[r-2]){r+=3;break}"slice_layer_without_partitioning_rbsp_idr"===Rn(31&i[n+3])&&(a=!0),n=r-2,r+=3;break;default:r+=3}return i=i.subarray(n),r-=n,n=0,i&&i.byteLength>3&&"slice_layer_without_partitioning_rbsp_idr"===Rn(31&i[n+3])&&(a=!0),a}},Mn=di,Nn=yi,jn={};jn.ts=Ln,jn.aac=Fi;var Fn=yt.ONE_SECOND_IN_TS,Bn=function(t,e,i){for(var r,n,a,s,o=0,u=188,p=!1;u<=t.byteLength;)if(71!==t[o]||71!==t[u]&&u!==t.byteLength)o++,u++;else{switch(r=t.subarray(o,u),jn.ts.parseType(r,e.pid)){case"pes":n=jn.ts.parsePesType(r,e.table),a=jn.ts.parsePayloadUnitStartIndicator(r),"audio"===n&&a&&(s=jn.ts.parsePesTime(r))&&(s.type="audio",i.audio.push(s),p=!0)}if(p)break;o+=188,u+=188}for(o=(u=t.byteLength)-188,p=!1;o>=0;)if(71!==t[o]||71!==t[u]&&u!==t.byteLength)o--,u--;else{switch(r=t.subarray(o,u),jn.ts.parseType(r,e.pid)){case"pes":n=jn.ts.parsePesType(r,e.table),a=jn.ts.parsePayloadUnitStartIndicator(r),"audio"===n&&a&&(s=jn.ts.parsePesTime(r))&&(s.type="audio",i.audio.push(s),p=!0)}if(p)break;o-=188,u-=188}},zn=function(t,e,i){for(var r,n,a,s,o,u,p,c=0,l=188,d=!1,f={data:[],size:0};l<t.byteLength;)if(71!==t[c]||71!==t[l])c++,l++;else{switch(r=t.subarray(c,l),jn.ts.parseType(r,e.pid)){case"pes":if(n=jn.ts.parsePesType(r,e.table),a=jn.ts.parsePayloadUnitStartIndicator(r),"video"===n&&(a&&!d&&(s=jn.ts.parsePesTime(r))&&(s.type="video",i.video.push(s),d=!0),!i.firstKeyFrame)){if(a&&0!==f.size){for(o=new Uint8Array(f.size),u=0;f.data.length;)p=f.data.shift(),o.set(p,u),u+=p.byteLength;if(jn.ts.videoPacketContainsKeyFrame(o)){var h=jn.ts.parsePesTime(o);h?(i.firstKeyFrame=h,i.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}f.size=0}f.data.push(r),f.size+=r.byteLength}}if(d&&i.firstKeyFrame)break;c+=188,l+=188}for(c=(l=t.byteLength)-188,d=!1;c>=0;)if(71!==t[c]||71!==t[l])c--,l--;else{switch(r=t.subarray(c,l),jn.ts.parseType(r,e.pid)){case"pes":n=jn.ts.parsePesType(r,e.table),a=jn.ts.parsePayloadUnitStartIndicator(r),"video"===n&&a&&(s=jn.ts.parsePesTime(r))&&(s.type="video",i.video.push(s),d=!0)}if(d)break;c-=188,l-=188}},Gn=function(t){var e={pid:null,table:null},i={};for(var r in function(t,e){for(var i,r=0,n=188;n<t.byteLength;)if(71!==t[r]||71!==t[n])r++,n++;else{switch(i=t.subarray(r,n),jn.ts.parseType(i,e.pid)){case"pat":e.pid=jn.ts.parsePat(i);break;case"pmt":var a=jn.ts.parsePmt(i);e.table=e.table||{},Object.keys(a).forEach((function(t){e.table[t]=a[t]}))}r+=188,n+=188}}(t,e),e.table){if(e.table.hasOwnProperty(r))switch(e.table[r]){case Mn.H264_STREAM_TYPE:i.video=[],zn(t,e,i),0===i.video.length&&delete i.video;break;case Mn.ADTS_STREAM_TYPE:i.audio=[],Bn(t,e,i),0===i.audio.length&&delete i.audio}}return i},Vn={inspect:function(t,e){var i;return(i=jn.aac.isLikelyAacData(t)?function(t){for(var e,i=!1,r=0,n=null,a=null,s=0,o=0;t.length-o>=3;){switch(jn.aac.parseType(t,o)){case"timed-metadata":if(t.length-o<10){i=!0;break}if((s=jn.aac.parseId3TagSize(t,o))>t.length){i=!0;break}null===a&&(e=t.subarray(o,o+s),a=jn.aac.parseAacTimestamp(e)),o+=s;break;case"audio":if(t.length-o<7){i=!0;break}if((s=jn.aac.parseAdtsSize(t,o))>t.length){i=!0;break}null===n&&(e=t.subarray(o,o+s),n=jn.aac.parseSampleRate(e)),r++,o+=s;break;default:o++}if(i)return null}if(null===n||null===a)return null;var u=Fn/n;return{audio:[{type:"audio",dts:a,pts:a},{type:"audio",dts:a+1024*r*u,pts:a+1024*r*u}]}}(t):Gn(t))&&(i.audio||i.video)?(function(t,e){if(t.audio&&t.audio.length){var i=e;(void 0===i||isNaN(i))&&(i=t.audio[0].dts),t.audio.forEach((function(t){t.dts=Nn(t.dts,i),t.pts=Nn(t.pts,i),t.dtsTime=t.dts/Fn,t.ptsTime=t.pts/Fn}))}if(t.video&&t.video.length){var r=e;if((void 0===r||isNaN(r))&&(r=t.video[0].dts),t.video.forEach((function(t){t.dts=Nn(t.dts,r),t.pts=Nn(t.pts,r),t.dtsTime=t.dts/Fn,t.ptsTime=t.pts/Fn})),t.firstKeyFrame){var n=t.firstKeyFrame;n.dts=Nn(n.dts,r),n.pts=Nn(n.pts,r),n.dtsTime=n.dts/Fn,n.ptsTime=n.pts/Fn}}}(i,e),i):null},parseAudioPes_:Bn},Wn={codecs:fe,mp4:Tr,flv:Fr,mp2t:Br,partial:gn};Wn.mp4.tools=_n,Wn.flv.tools=xn,Wn.mp2t.tools=Vn;var $n=Wn;function qn(t,e){return(qn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Xn(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,qn(t,e)}var Hn=function(){function t(){this.listeners={}}var e=t.prototype;return e.on=function(t,e){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e)},e.off=function(t,e){if(!this.listeners[t])return!1;var i=this.listeners[t].indexOf(e);return this.listeners[t]=this.listeners[t].slice(0),this.listeners[t].splice(i,1),i>-1},e.trigger=function(t){var e=this.listeners[t];if(e)if(2===arguments.length)for(var i=e.length,r=0;r<i;++r)e[r].call(this,arguments[1]);else for(var n=Array.prototype.slice.call(arguments,1),a=e.length,s=0;s<a;++s)e[s].apply(this,n)},e.dispose=function(){this.listeners={}},e.pipe=function(t){this.on("data",(function(e){t.push(e)}))},t}();function Yn(){return(Yn=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t}).apply(this,arguments)}var Kn="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{};function Jn(t){for(var e,i=(e=t,Kn.atob?Kn.atob(e):Buffer.from(e,"base64").toString("binary")),r=new Uint8Array(i.length),n=0;n<i.length;n++)r[n]=i.charCodeAt(n);return r}
/*! @name m3u8-parser @version 4.7.0 @license Apache-2.0 */var Qn=function(t){function e(){var e;return(e=t.call(this)||this).buffer="",e}return Xn(e,t),e.prototype.push=function(t){var e;for(this.buffer+=t,e=this.buffer.indexOf("\n");e>-1;e=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,e)),this.buffer=this.buffer.substring(e+1)},e}(Hn),Zn=String.fromCharCode(9),ta=function(t){var e=/([0-9.]*)?@?([0-9.]*)?/.exec(t||""),i={};return e[1]&&(i.length=parseInt(e[1],10)),e[2]&&(i.offset=parseInt(e[2],10)),i},ea=function(t){for(var e,i=t.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),r={},n=i.length;n--;)""!==i[n]&&((e=/([^=]*)=(.*)/.exec(i[n]).slice(1))[0]=e[0].replace(/^\s+|\s+$/g,""),e[1]=e[1].replace(/^\s+|\s+$/g,""),e[1]=e[1].replace(/^['"](.*)['"]$/g,"$1"),r[e[0]]=e[1]);return r},ia=function(t){function e(){var e;return(e=t.call(this)||this).customParsers=[],e.tagMappers=[],e}Xn(e,t);var i=e.prototype;return i.push=function(t){var e,i,r=this;0!==(t=t.trim()).length&&("#"===t[0]?this.tagMappers.reduce((function(e,i){var r=i(t);return r===t?e:e.concat([r])}),[t]).forEach((function(t){for(var n=0;n<r.customParsers.length;n++)if(r.customParsers[n].call(r,t))return;if(0===t.indexOf("#EXT"))if(t=t.replace("\r",""),e=/^#EXTM3U/.exec(t))r.trigger("data",{type:"tag",tagType:"m3u"});else{if(e=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(t))return i={type:"tag",tagType:"inf"},e[1]&&(i.duration=parseFloat(e[1])),e[2]&&(i.title=e[2]),void r.trigger("data",i);if(e=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(t))return i={type:"tag",tagType:"targetduration"},e[1]&&(i.duration=parseInt(e[1],10)),void r.trigger("data",i);if(e=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(t))return i={type:"tag",tagType:"version"},e[1]&&(i.version=parseInt(e[1],10)),void r.trigger("data",i);if(e=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(t))return i={type:"tag",tagType:"media-sequence"},e[1]&&(i.number=parseInt(e[1],10)),void r.trigger("data",i);if(e=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(t))return i={type:"tag",tagType:"discontinuity-sequence"},e[1]&&(i.number=parseInt(e[1],10)),void r.trigger("data",i);if(e=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(t))return i={type:"tag",tagType:"playlist-type"},e[1]&&(i.playlistType=e[1]),void r.trigger("data",i);if(e=/^#EXT-X-BYTERANGE:?(.*)?$/.exec(t))return i=Yn(ta(e[1]),{type:"tag",tagType:"byterange"}),void r.trigger("data",i);if(e=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(t))return i={type:"tag",tagType:"allow-cache"},e[1]&&(i.allowed=!/NO/.test(e[1])),void r.trigger("data",i);if(e=/^#EXT-X-MAP:?(.*)$/.exec(t)){if(i={type:"tag",tagType:"map"},e[1]){var a=ea(e[1]);a.URI&&(i.uri=a.URI),a.BYTERANGE&&(i.byterange=ta(a.BYTERANGE))}r.trigger("data",i)}else if(e=/^#EXT-X-STREAM-INF:?(.*)$/.exec(t)){if(i={type:"tag",tagType:"stream-inf"},e[1]){if(i.attributes=ea(e[1]),i.attributes.RESOLUTION){var s=i.attributes.RESOLUTION.split("x"),o={};s[0]&&(o.width=parseInt(s[0],10)),s[1]&&(o.height=parseInt(s[1],10)),i.attributes.RESOLUTION=o}i.attributes.BANDWIDTH&&(i.attributes.BANDWIDTH=parseInt(i.attributes.BANDWIDTH,10)),i.attributes["PROGRAM-ID"]&&(i.attributes["PROGRAM-ID"]=parseInt(i.attributes["PROGRAM-ID"],10))}r.trigger("data",i)}else{if(e=/^#EXT-X-MEDIA:?(.*)$/.exec(t))return i={type:"tag",tagType:"media"},e[1]&&(i.attributes=ea(e[1])),void r.trigger("data",i);if(e=/^#EXT-X-ENDLIST/.exec(t))r.trigger("data",{type:"tag",tagType:"endlist"});else if(e=/^#EXT-X-DISCONTINUITY/.exec(t))r.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(e=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(t))return i={type:"tag",tagType:"program-date-time"},e[1]&&(i.dateTimeString=e[1],i.dateTimeObject=new Date(e[1])),void r.trigger("data",i);if(e=/^#EXT-X-KEY:?(.*)$/.exec(t))return i={type:"tag",tagType:"key"},e[1]&&(i.attributes=ea(e[1]),i.attributes.IV&&("0x"===i.attributes.IV.substring(0,2).toLowerCase()&&(i.attributes.IV=i.attributes.IV.substring(2)),i.attributes.IV=i.attributes.IV.match(/.{8}/g),i.attributes.IV[0]=parseInt(i.attributes.IV[0],16),i.attributes.IV[1]=parseInt(i.attributes.IV[1],16),i.attributes.IV[2]=parseInt(i.attributes.IV[2],16),i.attributes.IV[3]=parseInt(i.attributes.IV[3],16),i.attributes.IV=new Uint32Array(i.attributes.IV))),void r.trigger("data",i);if(e=/^#EXT-X-START:?(.*)$/.exec(t))return i={type:"tag",tagType:"start"},e[1]&&(i.attributes=ea(e[1]),i.attributes["TIME-OFFSET"]=parseFloat(i.attributes["TIME-OFFSET"]),i.attributes.PRECISE=/YES/.test(i.attributes.PRECISE)),void r.trigger("data",i);if(e=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(t))return i={type:"tag",tagType:"cue-out-cont"},e[1]?i.data=e[1]:i.data="",void r.trigger("data",i);if(e=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(t))return i={type:"tag",tagType:"cue-out"},e[1]?i.data=e[1]:i.data="",void r.trigger("data",i);if(e=/^#EXT-X-CUE-IN:?(.*)?$/.exec(t))return i={type:"tag",tagType:"cue-in"},e[1]?i.data=e[1]:i.data="",void r.trigger("data",i);if((e=/^#EXT-X-SKIP:(.*)$/.exec(t))&&e[1])return(i={type:"tag",tagType:"skip"}).attributes=ea(e[1]),i.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(i.attributes["SKIPPED-SEGMENTS"]=parseInt(i.attributes["SKIPPED-SEGMENTS"],10)),i.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(i.attributes["RECENTLY-REMOVED-DATERANGES"]=i.attributes["RECENTLY-REMOVED-DATERANGES"].split(Zn)),void r.trigger("data",i);if((e=/^#EXT-X-PART:(.*)$/.exec(t))&&e[1])return(i={type:"tag",tagType:"part"}).attributes=ea(e[1]),["DURATION"].forEach((function(t){i.attributes.hasOwnProperty(t)&&(i.attributes[t]=parseFloat(i.attributes[t]))})),["INDEPENDENT","GAP"].forEach((function(t){i.attributes.hasOwnProperty(t)&&(i.attributes[t]=/YES/.test(i.attributes[t]))})),i.attributes.hasOwnProperty("BYTERANGE")&&(i.attributes.byterange=ta(i.attributes.BYTERANGE)),void r.trigger("data",i);if((e=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(t))&&e[1])return(i={type:"tag",tagType:"server-control"}).attributes=ea(e[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach((function(t){i.attributes.hasOwnProperty(t)&&(i.attributes[t]=parseFloat(i.attributes[t]))})),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach((function(t){i.attributes.hasOwnProperty(t)&&(i.attributes[t]=/YES/.test(i.attributes[t]))})),void r.trigger("data",i);if((e=/^#EXT-X-PART-INF:(.*)$/.exec(t))&&e[1])return(i={type:"tag",tagType:"part-inf"}).attributes=ea(e[1]),["PART-TARGET"].forEach((function(t){i.attributes.hasOwnProperty(t)&&(i.attributes[t]=parseFloat(i.attributes[t]))})),void r.trigger("data",i);if((e=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(t))&&e[1])return(i={type:"tag",tagType:"preload-hint"}).attributes=ea(e[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach((function(t){if(i.attributes.hasOwnProperty(t)){i.attributes[t]=parseInt(i.attributes[t],10);var e="BYTERANGE-LENGTH"===t?"length":"offset";i.attributes.byterange=i.attributes.byterange||{},i.attributes.byterange[e]=i.attributes[t],delete i.attributes[t]}})),void r.trigger("data",i);if((e=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(t))&&e[1])return(i={type:"tag",tagType:"rendition-report"}).attributes=ea(e[1]),["LAST-MSN","LAST-PART"].forEach((function(t){i.attributes.hasOwnProperty(t)&&(i.attributes[t]=parseInt(i.attributes[t],10))})),void r.trigger("data",i);r.trigger("data",{type:"tag",data:t.slice(4)})}}}else r.trigger("data",{type:"comment",text:t.slice(1)})})):this.trigger("data",{type:"uri",uri:t}))},i.addParser=function(t){var e=this,i=t.expression,r=t.customType,n=t.dataParser,a=t.segment;"function"!=typeof n&&(n=function(t){return t}),this.customParsers.push((function(t){if(i.exec(t))return e.trigger("data",{type:"custom",data:n(t),customType:r,segment:a}),!0}))},i.addTagMapper=function(t){var e=t.expression,i=t.map;this.tagMappers.push((function(t){return e.test(t)?i(t):t}))},e}(Hn),ra=function(t){var e={};return Object.keys(t).forEach((function(i){var r;e[(r=i,r.toLowerCase().replace(/-(\w)/g,(function(t){return t[1].toUpperCase()})))]=t[i]})),e},na=function(t){var e=t.serverControl,i=t.targetDuration,r=t.partTargetDuration;if(e){var n="#EXT-X-SERVER-CONTROL",a="holdBack",s="partHoldBack",o=i&&3*i,u=r&&2*r;i&&!e.hasOwnProperty(a)&&(e[a]=o,this.trigger("info",{message:n+" defaulting HOLD-BACK to targetDuration * 3 ("+o+")."})),o&&e[a]<o&&(this.trigger("warn",{message:n+" clamping HOLD-BACK ("+e[a]+") to targetDuration * 3 ("+o+")"}),e[a]=o),r&&!e.hasOwnProperty(s)&&(e[s]=3*r,this.trigger("info",{message:n+" defaulting PART-HOLD-BACK to partTargetDuration * 3 ("+e[s]+")."})),r&&e[s]<u&&(this.trigger("warn",{message:n+" clamping PART-HOLD-BACK ("+e[s]+") to partTargetDuration * 2 ("+u+")."}),e[s]=u)}},aa=function(t){function e(){var e;(e=t.call(this)||this).lineStream=new Qn,e.parseStream=new ia,e.lineStream.pipe(e.parseStream);var i,r,n=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e),a=[],s={},o=!1,u=function(){},p={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},c=0;e.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};var l=0,d=0;return e.on("end",(function(){s.uri||!s.parts&&!s.preloadHints||(!s.map&&i&&(s.map=i),!s.key&&r&&(s.key=r),s.timeline||"number"!=typeof c||(s.timeline=c),e.manifest.preloadSegment=s)})),e.parseStream.on("data",(function(t){var e,f;({tag:function(){({version:function(){t.version&&(this.manifest.version=t.version)},"allow-cache":function(){this.manifest.allowCache=t.allowed,"allowed"in t||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var e={};"length"in t&&(s.byterange=e,e.length=t.length,"offset"in t||(t.offset=l)),"offset"in t&&(s.byterange=e,e.offset=t.offset),l=e.offset+e.length},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),t.duration>0&&(s.duration=t.duration),0===t.duration&&(s.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=a},key:function(){if(t.attributes)if("NONE"!==t.attributes.METHOD)if(t.attributes.URI){if("com.apple.streamingkeydelivery"===t.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:t.attributes});if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===t.attributes.KEYFORMAT){return-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(t.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===t.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==t.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):t.attributes.KEYID&&"0x"===t.attributes.KEYID.substring(0,2)?(this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:t.attributes.KEYFORMAT,keyId:t.attributes.KEYID.substring(2)},pssh:Jn(t.attributes.URI.split(",")[1])})):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}))}t.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),r={method:t.attributes.METHOD||"AES-128",uri:t.attributes.URI},void 0!==t.attributes.IV&&(r.iv=t.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else r=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(t.number)?this.manifest.mediaSequence=t.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+t.number})},"discontinuity-sequence":function(){isFinite(t.number)?(this.manifest.discontinuitySequence=t.number,c=t.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+t.number})},"playlist-type":function(){/VOD|EVENT/.test(t.playlistType)?this.manifest.playlistType=t.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+t.playlist})},map:function(){i={},t.uri&&(i.uri=t.uri),t.byterange&&(i.byterange=t.byterange),r&&(i.key=r)},"stream-inf":function(){this.manifest.playlists=a,this.manifest.mediaGroups=this.manifest.mediaGroups||p,t.attributes?(s.attributes||(s.attributes={}),Yn(s.attributes,t.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||p,t.attributes&&t.attributes.TYPE&&t.attributes["GROUP-ID"]&&t.attributes.NAME){var i=this.manifest.mediaGroups[t.attributes.TYPE];i[t.attributes["GROUP-ID"]]=i[t.attributes["GROUP-ID"]]||{},e=i[t.attributes["GROUP-ID"]],(f={default:/yes/i.test(t.attributes.DEFAULT)}).default?f.autoselect=!0:f.autoselect=/yes/i.test(t.attributes.AUTOSELECT),t.attributes.LANGUAGE&&(f.language=t.attributes.LANGUAGE),t.attributes.URI&&(f.uri=t.attributes.URI),t.attributes["INSTREAM-ID"]&&(f.instreamId=t.attributes["INSTREAM-ID"]),t.attributes.CHARACTERISTICS&&(f.characteristics=t.attributes.CHARACTERISTICS),t.attributes.FORCED&&(f.forced=/yes/i.test(t.attributes.FORCED)),e[t.attributes.NAME]=f}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){c+=1,s.discontinuity=!0,this.manifest.discontinuityStarts.push(a.length)},"program-date-time":function(){void 0===this.manifest.dateTimeString&&(this.manifest.dateTimeString=t.dateTimeString,this.manifest.dateTimeObject=t.dateTimeObject),s.dateTimeString=t.dateTimeString,s.dateTimeObject=t.dateTimeObject},targetduration:function(){!isFinite(t.duration)||t.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+t.duration}):(this.manifest.targetDuration=t.duration,na.call(this,this.manifest))},start:function(){t.attributes&&!isNaN(t.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:t.attributes["TIME-OFFSET"],precise:t.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out":function(){s.cueOut=t.data},"cue-out-cont":function(){s.cueOutCont=t.data},"cue-in":function(){s.cueIn=t.data},skip:function(){this.manifest.skip=ra(t.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",t.attributes,["SKIPPED-SEGMENTS"])},part:function(){var e=this;o=!0;var i=this.manifest.segments.length,r=ra(t.attributes);s.parts=s.parts||[],s.parts.push(r),r.byterange&&(r.byterange.hasOwnProperty("offset")||(r.byterange.offset=d),d=r.byterange.offset+r.byterange.length);var n=s.parts.length-1;this.warnOnMissingAttributes_("#EXT-X-PART #"+n+" for segment #"+i,t.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach((function(t,i){t.hasOwnProperty("lastPart")||e.trigger("warn",{message:"#EXT-X-RENDITION-REPORT #"+i+" lacks required attribute(s): LAST-PART"})}))},"server-control":function(){var e=this.manifest.serverControl=ra(t.attributes);e.hasOwnProperty("canBlockReload")||(e.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),na.call(this,this.manifest),e.canSkipDateranges&&!e.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint":function(){var e=this.manifest.segments.length,i=ra(t.attributes),r=i.type&&"PART"===i.type;s.preloadHints=s.preloadHints||[],s.preloadHints.push(i),i.byterange&&(i.byterange.hasOwnProperty("offset")||(i.byterange.offset=r?d:0,r&&(d=i.byterange.offset+i.byterange.length)));var n=s.preloadHints.length-1;if(this.warnOnMissingAttributes_("#EXT-X-PRELOAD-HINT #"+n+" for segment #"+e,t.attributes,["TYPE","URI"]),i.type)for(var a=0;a<s.preloadHints.length-1;a++){var o=s.preloadHints[a];o.type&&(o.type===i.type&&this.trigger("warn",{message:"#EXT-X-PRELOAD-HINT #"+n+" for segment #"+e+" has the same TYPE "+i.type+" as preload hint #"+a}))}},"rendition-report":function(){var e=ra(t.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(e);var i=this.manifest.renditionReports.length-1,r=["LAST-MSN","URI"];o&&r.push("LAST-PART"),this.warnOnMissingAttributes_("#EXT-X-RENDITION-REPORT #"+i,t.attributes,r)},"part-inf":function(){this.manifest.partInf=ra(t.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",t.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),na.call(this,this.manifest)}}[t.tagType]||u).call(n)},uri:function(){s.uri=t.uri,a.push(s),this.manifest.targetDuration&&!("duration"in s)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),s.duration=this.manifest.targetDuration),r&&(s.key=r),s.timeline=c,i&&(s.map=i),d=0,s={}},comment:function(){},custom:function(){t.segment?(s.custom=s.custom||{},s.custom[t.customType]=t.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[t.customType]=t.data)}})[t.type].call(n)})),e}Xn(e,t);var i=e.prototype;return i.warnOnMissingAttributes_=function(t,e,i){var r=[];i.forEach((function(t){e.hasOwnProperty(t)||r.push(t)})),r.length&&this.trigger("warn",{message:t+" lacks required attribute(s): "+r.join(", ")})},i.push=function(t){this.lineStream.push(t)},i.end=function(){this.lineStream.push("\n"),this.trigger("end")},i.addParser=function(t){this.parseStream.addParser(t)},i.addTagMapper=function(t){this.parseStream.addTagMapper(t)},e}(Hn),sa="undefined"!=typeof Symbol&&Symbol,oa=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),i=Object(e);if("string"==typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(i))return!1;for(e in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var r=Object.getOwnPropertySymbols(t);if(1!==r.length||r[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var n=Object.getOwnPropertyDescriptor(t,e);if(42!==n.value||!0!==n.enumerable)return!1}return!0},ua="Function.prototype.bind called on incompatible ",pa=Array.prototype.slice,ca=Object.prototype.toString,la=function(t){var e=this;if("function"!=typeof e||"[object Function]"!==ca.call(e))throw new TypeError(ua+e);for(var i,r=pa.call(arguments,1),n=function(){if(this instanceof i){var n=e.apply(this,r.concat(pa.call(arguments)));return Object(n)===n?n:this}return e.apply(t,r.concat(pa.call(arguments)))},a=Math.max(0,e.length-r.length),s=[],o=0;o<a;o++)s.push("$"+o);if(i=Function("binder","return function ("+s.join(",")+"){ return binder.apply(this,arguments); }")(n),e.prototype){var u=function(){};u.prototype=e.prototype,i.prototype=new u,u.prototype=null}return i},da=Function.prototype.bind||la,fa=da.call(Function.call,Object.prototype.hasOwnProperty),ha=SyntaxError,ga=Function,ma=TypeError,ya=function(t){try{return ga('"use strict"; return ('+t+").constructor;")()}catch(e){}},ba=Object.getOwnPropertyDescriptor;if(ba)try{ba({},"")}catch(To){ba=null}var va=function(){throw new ma},wa=ba?function(){try{return va}catch(t){try{return ba(arguments,"callee").get}catch(e){return va}}}():va,Sa="function"==typeof sa&&"function"==typeof Symbol&&"symbol"==typeof sa("foo")&&"symbol"==typeof Symbol("bar")&&oa(),Ta=Object.getPrototypeOf||function(t){return t.__proto__},_a={},Aa="undefined"==typeof Uint8Array?undefined:Ta(Uint8Array),Ea={"%AggregateError%":"undefined"==typeof AggregateError?undefined:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?undefined:ArrayBuffer,"%ArrayIteratorPrototype%":Sa?Ta([][Symbol.iterator]()):undefined,"%AsyncFromSyncIteratorPrototype%":undefined,"%AsyncFunction%":_a,"%AsyncGenerator%":_a,"%AsyncGeneratorFunction%":_a,"%AsyncIteratorPrototype%":_a,"%Atomics%":"undefined"==typeof Atomics?undefined:Atomics,"%BigInt%":"undefined"==typeof BigInt?undefined:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?undefined:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?undefined:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?undefined:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?undefined:FinalizationRegistry,"%Function%":ga,"%GeneratorFunction%":_a,"%Int8Array%":"undefined"==typeof Int8Array?undefined:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?undefined:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?undefined:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Sa?Ta(Ta([][Symbol.iterator]())):undefined,"%JSON%":"object"==typeof JSON?JSON:undefined,"%Map%":"undefined"==typeof Map?undefined:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&Sa?Ta((new Map)[Symbol.iterator]()):undefined,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?undefined:Promise,"%Proxy%":"undefined"==typeof Proxy?undefined:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?undefined:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?undefined:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&Sa?Ta((new Set)[Symbol.iterator]()):undefined,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?undefined:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Sa?Ta(""[Symbol.iterator]()):undefined,"%Symbol%":Sa?Symbol:undefined,"%SyntaxError%":ha,"%ThrowTypeError%":wa,"%TypedArray%":Aa,"%TypeError%":ma,"%Uint8Array%":"undefined"==typeof Uint8Array?undefined:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?undefined:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?undefined:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?undefined:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?undefined:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?undefined:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?undefined:WeakSet},ka=function t(e){var i;if("%AsyncFunction%"===e)i=ya("async function () {}");else if("%GeneratorFunction%"===e)i=ya("function* () {}");else if("%AsyncGeneratorFunction%"===e)i=ya("async function* () {}");else if("%AsyncGenerator%"===e){var r=t("%AsyncGeneratorFunction%");r&&(i=r.prototype)}else if("%AsyncIteratorPrototype%"===e){var n=t("%AsyncGenerator%");n&&(i=Ta(n.prototype))}return Ea[e]=i,i},Oa={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Pa=da,xa=fa,Ua=Pa.call(Function.call,Array.prototype.concat),Da=Pa.call(Function.apply,Array.prototype.splice),Ca=Pa.call(Function.call,String.prototype.replace),Ia=Pa.call(Function.call,String.prototype.slice),Ra=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,La=/\\(\\)?/g,Ma=function(t){var e=Ia(t,0,1),i=Ia(t,-1);if("%"===e&&"%"!==i)throw new ha("invalid intrinsic syntax, expected closing `%`");if("%"===i&&"%"!==e)throw new ha("invalid intrinsic syntax, expected opening `%`");var r=[];return Ca(t,Ra,(function(t,e,i,n){r[r.length]=i?Ca(n,La,"$1"):e||t})),r},Na=function(t,e){var i,r=t;if(xa(Oa,r)&&(r="%"+(i=Oa[r])[0]+"%"),xa(Ea,r)){var n=Ea[r];if(n===_a&&(n=ka(r)),void 0===n&&!e)throw new ma("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:i,name:r,value:n}}throw new ha("intrinsic "+t+" does not exist!")},ja=function(t,e){if("string"!=typeof t||0===t.length)throw new ma("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new ma('"allowMissing" argument must be a boolean');var i=Ma(t),r=i.length>0?i[0]:"",n=Na("%"+r+"%",e),a=n.name,s=n.value,o=!1,u=n.alias;u&&(r=u[0],Da(i,Ua([0,1],u)));for(var p=1,c=!0;p<i.length;p+=1){var l=i[p],d=Ia(l,0,1),f=Ia(l,-1);if(('"'===d||"'"===d||"`"===d||'"'===f||"'"===f||"`"===f)&&d!==f)throw new ha("property names with quotes must have matching quotes");if("constructor"!==l&&c||(o=!0),xa(Ea,a="%"+(r+="."+l)+"%"))s=Ea[a];else if(null!=s){if(!(l in s)){if(!e)throw new ma("base intrinsic for "+t+" exists, but the property is not available.");return}if(ba&&p+1>=i.length){var h=ba(s,l);s=(c=!!h)&&"get"in h&&!("originalValue"in h.get)?h.get:s[l]}else c=xa(s,l),s=s[l];c&&!o&&(Ea[a]=s)}}return s},Fa={exports:{}};!function(t){var e=da,i=ja,r=i("%Function.prototype.apply%"),n=i("%Function.prototype.call%"),a=i("%Reflect.apply%",!0)||e.call(n,r),s=i("%Object.getOwnPropertyDescriptor%",!0),o=i("%Object.defineProperty%",!0),u=i("%Math.max%");if(o)try{o({},"a",{value:1})}catch(To){o=null}t.exports=function(t){var i=a(e,n,arguments);if(s&&o){var r=s(i,"length");r.configurable&&o(i,"length",{value:1+u(0,t.length-(arguments.length-1))})}return i};var p=function(){return a(e,r,arguments)};o?o(t.exports,"apply",{value:p}):t.exports.apply=p}(Fa);var Ba=ja,za=Fa.exports,Ga=za(Ba("String.prototype.indexOf")),Va=new Proxy({},{get(){throw new Error('Module "" has been externalized for browser compatibility and cannot be accessed in client code.')}}),Wa=r(Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Va})),$a="function"==typeof Map&&Map.prototype,qa=Object.getOwnPropertyDescriptor&&$a?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Xa=$a&&qa&&"function"==typeof qa.get?qa.get:null,Ha=$a&&Map.prototype.forEach,Ya="function"==typeof Set&&Set.prototype,Ka=Object.getOwnPropertyDescriptor&&Ya?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Ja=Ya&&Ka&&"function"==typeof Ka.get?Ka.get:null,Qa=Ya&&Set.prototype.forEach,Za="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,ts="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,es="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,is=Boolean.prototype.valueOf,rs=Object.prototype.toString,ns=Function.prototype.toString,as=String.prototype.match,ss="function"==typeof BigInt?BigInt.prototype.valueOf:null,os=Object.getOwnPropertySymbols,us="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,ps="function"==typeof Symbol&&"object"==typeof Symbol.iterator,cs=Object.prototype.propertyIsEnumerable,ls=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null),ds=Wa.custom,fs=ds&&bs(ds)?ds:null,hs="function"==typeof Symbol&&void 0!==Symbol.toStringTag?Symbol.toStringTag:null;function gs(t,e,i){var r="double"===(i.quoteStyle||e)?'"':"'";return r+t+r}function ms(t){return String(t).replace(/"/g,"&quot;")}function ys(t){return!("[object Array]"!==Ss(t)||hs&&"object"==typeof t&&hs in t)}function bs(t){if(ps)return t&&"object"==typeof t&&t instanceof Symbol;if("symbol"==typeof t)return!0;if(!t||"object"!=typeof t||!us)return!1;try{return us.call(t),!0}catch(To){}return!1}var vs=Object.prototype.hasOwnProperty||function(t){return t in this};function ws(t,e){return vs.call(t,e)}function Ss(t){return rs.call(t)}function Ts(t,e){if(t.indexOf)return t.indexOf(e);for(var i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return-1}function _s(t,e){if(t.length>e.maxStringLength){var i=t.length-e.maxStringLength,r="... "+i+" more character"+(i>1?"s":"");return _s(t.slice(0,e.maxStringLength),e)+r}return gs(t.replace(/(['\\])/g,"\\$1").replace(/[\x00-\x1f]/g,As),"single",e)}function As(t){var e=t.charCodeAt(0),i={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return i?"\\"+i:"\\x"+(e<16?"0":"")+e.toString(16).toUpperCase()}function Es(t){return"Object("+t+")"}function ks(t){return t+" { ? }"}function Os(t,e,i,r){return t+" ("+e+") {"+(r?Ps(i,r):i.join(", "))+"}"}function Ps(t,e){if(0===t.length)return"";var i="\n"+e.prev+e.base;return i+t.join(","+i)+"\n"+e.prev}function xs(t,e){var i=ys(t),r=[];if(i){r.length=t.length;for(var n=0;n<t.length;n++)r[n]=ws(t,n)?e(t[n],t):""}var a,s="function"==typeof os?os(t):[];if(ps){a={};for(var o=0;o<s.length;o++)a["$"+s[o]]=s[o]}for(var u in t)ws(t,u)&&(i&&String(Number(u))===u&&u<t.length||ps&&a["$"+u]instanceof Symbol||(/[^\w$]/.test(u)?r.push(e(u,t)+": "+e(t[u],t)):r.push(u+": "+e(t[u],t))));if("function"==typeof os)for(var p=0;p<s.length;p++)cs.call(t,s[p])&&r.push("["+e(s[p])+"]: "+e(t[s[p]],t));return r}var Us,Ds=ja,Cs=function(t,e){var i=Ba(t,!!e);return"function"==typeof i&&Ga(t,".prototype.")>-1?za(i):i},Is=function t(e,i,r,n){var a=i||{};if(ws(a,"quoteStyle")&&"single"!==a.quoteStyle&&"double"!==a.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(ws(a,"maxStringLength")&&("number"==typeof a.maxStringLength?a.maxStringLength<0&&a.maxStringLength!==1/0:null!==a.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var s=!ws(a,"customInspect")||a.customInspect;if("boolean"!=typeof s&&"symbol"!==s)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(ws(a,"indent")&&null!==a.indent&&"\t"!==a.indent&&!(parseInt(a.indent,10)===a.indent&&a.indent>0))throw new TypeError('options "indent" must be "\\t", an integer > 0, or `null`');if(void 0===e)return"undefined";if(null===e)return"null";if("boolean"==typeof e)return e?"true":"false";if("string"==typeof e)return _s(e,a);if("number"==typeof e)return 0===e?1/0/e>0?"0":"-0":String(e);if("bigint"==typeof e)return String(e)+"n";var o=void 0===a.depth?5:a.depth;if(void 0===r&&(r=0),r>=o&&o>0&&"object"==typeof e)return ys(e)?"[Array]":"[Object]";var u=function(t,e){var i;if("\t"===t.indent)i="\t";else{if(!("number"==typeof t.indent&&t.indent>0))return null;i=Array(t.indent+1).join(" ")}return{base:i,prev:Array(e+1).join(i)}}(a,r);if(void 0===n)n=[];else if(Ts(n,e)>=0)return"[Circular]";function p(e,i,s){if(i&&(n=n.slice()).push(i),s){var o={depth:a.depth};return ws(a,"quoteStyle")&&(o.quoteStyle=a.quoteStyle),t(e,o,r+1,n)}return t(e,a,r+1,n)}if("function"==typeof e){var c=function(t){if(t.name)return t.name;var e=as.call(ns.call(t),/^function\s*([\w$]+)/);if(e)return e[1];return null}(e),l=xs(e,p);return"[Function"+(c?": "+c:" (anonymous)")+"]"+(l.length>0?" { "+l.join(", ")+" }":"")}if(bs(e)){var d=ps?String(e).replace(/^(Symbol\(.*\))_[^)]*$/,"$1"):us.call(e);return"object"!=typeof e||ps?d:Es(d)}if(function(t){if(!t||"object"!=typeof t)return!1;if("undefined"!=typeof HTMLElement&&t instanceof HTMLElement)return!0;return"string"==typeof t.nodeName&&"function"==typeof t.getAttribute}(e)){for(var f="<"+String(e.nodeName).toLowerCase(),h=e.attributes||[],g=0;g<h.length;g++)f+=" "+h[g].name+"="+gs(ms(h[g].value),"double",a);return f+=">",e.childNodes&&e.childNodes.length&&(f+="..."),f+="</"+String(e.nodeName).toLowerCase()+">"}if(ys(e)){if(0===e.length)return"[]";var m=xs(e,p);return u&&!function(t){for(var e=0;e<t.length;e++)if(Ts(t[e],"\n")>=0)return!1;return!0}(m)?"["+Ps(m,u)+"]":"[ "+m.join(", ")+" ]"}if(function(t){return!("[object Error]"!==Ss(t)||hs&&"object"==typeof t&&hs in t)}(e)){var y=xs(e,p);return 0===y.length?"["+String(e)+"]":"{ ["+String(e)+"] "+y.join(", ")+" }"}if("object"==typeof e&&s){if(fs&&"function"==typeof e[fs])return e[fs]();if("symbol"!==s&&"function"==typeof e.inspect)return e.inspect()}if(function(t){if(!Xa||!t||"object"!=typeof t)return!1;try{Xa.call(t);try{Ja.call(t)}catch(f){return!0}return t instanceof Map}catch(To){}return!1}(e)){var b=[];return Ha.call(e,(function(t,i){b.push(p(i,e,!0)+" => "+p(t,e))})),Os("Map",Xa.call(e),b,u)}if(function(t){if(!Ja||!t||"object"!=typeof t)return!1;try{Ja.call(t);try{Xa.call(t)}catch(e){return!0}return t instanceof Set}catch(To){}return!1}(e)){var v=[];return Qa.call(e,(function(t){v.push(p(t,e))})),Os("Set",Ja.call(e),v,u)}if(function(t){if(!Za||!t||"object"!=typeof t)return!1;try{Za.call(t,Za);try{ts.call(t,ts)}catch(f){return!0}return t instanceof WeakMap}catch(To){}return!1}(e))return ks("WeakMap");if(function(t){if(!ts||!t||"object"!=typeof t)return!1;try{ts.call(t,ts);try{Za.call(t,Za)}catch(f){return!0}return t instanceof WeakSet}catch(To){}return!1}(e))return ks("WeakSet");if(function(t){if(!es||!t||"object"!=typeof t)return!1;try{return es.call(t),!0}catch(To){}return!1}(e))return ks("WeakRef");if(function(t){return!("[object Number]"!==Ss(t)||hs&&"object"==typeof t&&hs in t)}(e))return Es(p(Number(e)));if(function(t){if(!t||"object"!=typeof t||!ss)return!1;try{return ss.call(t),!0}catch(To){}return!1}(e))return Es(p(ss.call(e)));if(function(t){return!("[object Boolean]"!==Ss(t)||hs&&"object"==typeof t&&hs in t)}(e))return Es(is.call(e));if(function(t){return!("[object String]"!==Ss(t)||hs&&"object"==typeof t&&hs in t)}(e))return Es(p(String(e)));if(!function(t){return!("[object Date]"!==Ss(t)||hs&&"object"==typeof t&&hs in t)}(e)&&!function(t){return!("[object RegExp]"!==Ss(t)||hs&&"object"==typeof t&&hs in t)}(e)){var w=xs(e,p),S=ls?ls(e)===Object.prototype:e instanceof Object||e.constructor===Object,T=e instanceof Object?"":"null prototype",_=!S&&hs&&Object(e)===e&&hs in e?Ss(e).slice(8,-1):T?"Object":"",A=(S||"function"!=typeof e.constructor?"":e.constructor.name?e.constructor.name+" ":"")+(_||T?"["+[].concat(_||[],T||[]).join(": ")+"] ":"");return 0===w.length?A+"{}":u?A+"{"+Ps(w,u)+"}":A+"{ "+w.join(", ")+" }"}return String(e)},Rs=Ds("%TypeError%"),Ls=Ds("%WeakMap%",!0),Ms=Ds("%Map%",!0),Ns=Cs("WeakMap.prototype.get",!0),js=Cs("WeakMap.prototype.set",!0),Fs=Cs("WeakMap.prototype.has",!0),Bs=Cs("Map.prototype.get",!0),zs=Cs("Map.prototype.set",!0),Gs=Cs("Map.prototype.has",!0),Vs=function(t,e){for(var i,r=t;null!==(i=r.next);r=i)if(i.key===e)return r.next=i.next,i.next=t.next,t.next=i,i},Ws=String.prototype.replace,$s=/%20/g,qs="RFC3986",Xs={default:qs,formatters:{RFC1738:function(t){return Ws.call(t,$s,"+")},RFC3986:function(t){return String(t)}},RFC1738:"RFC1738",RFC3986:qs},Hs=Xs,Ys=Object.prototype.hasOwnProperty,Ks=Array.isArray,Js=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),Qs=function(t,e){for(var i=e&&e.plainObjects?Object.create(null):{},r=0;r<t.length;++r)void 0!==t[r]&&(i[r]=t[r]);return i},Zs={arrayToObject:Qs,assign:function(t,e){return Object.keys(e).reduce((function(t,i){return t[i]=e[i],t}),t)},combine:function(t,e){return[].concat(t,e)},compact:function(t){for(var e=[{obj:{o:t},prop:"o"}],i=[],r=0;r<e.length;++r)for(var n=e[r],a=n.obj[n.prop],s=Object.keys(a),o=0;o<s.length;++o){var u=s[o],p=a[u];"object"==typeof p&&null!==p&&-1===i.indexOf(p)&&(e.push({obj:a,prop:u}),i.push(p))}return function(t){for(;t.length>1;){var e=t.pop(),i=e.obj[e.prop];if(Ks(i)){for(var r=[],n=0;n<i.length;++n)void 0!==i[n]&&r.push(i[n]);e.obj[e.prop]=r}}}(e),t},decode:function(t,e,i){var r=t.replace(/\+/g," ");if("iso-8859-1"===i)return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch(To){return r}},encode:function(t,e,i,r,n){if(0===t.length)return t;var a=t;if("symbol"==typeof t?a=Symbol.prototype.toString.call(t):"string"!=typeof t&&(a=String(t)),"iso-8859-1"===i)return escape(a).replace(/%u[0-9a-f]{4}/gi,(function(t){return"%26%23"+parseInt(t.slice(2),16)+"%3B"}));for(var s="",o=0;o<a.length;++o){var u=a.charCodeAt(o);45===u||46===u||95===u||126===u||u>=48&&u<=57||u>=65&&u<=90||u>=97&&u<=122||n===Hs.RFC1738&&(40===u||41===u)?s+=a.charAt(o):u<128?s+=Js[u]:u<2048?s+=Js[192|u>>6]+Js[128|63&u]:u<55296||u>=57344?s+=Js[224|u>>12]+Js[128|u>>6&63]+Js[128|63&u]:(o+=1,u=65536+((1023&u)<<10|1023&a.charCodeAt(o)),s+=Js[240|u>>18]+Js[128|u>>12&63]+Js[128|u>>6&63]+Js[128|63&u])}return s},isBuffer:function(t){return!(!t||"object"!=typeof t)&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},isRegExp:function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},maybeMap:function(t,e){if(Ks(t)){for(var i=[],r=0;r<t.length;r+=1)i.push(e(t[r]));return i}return e(t)},merge:function t(e,i,r){if(!i)return e;if("object"!=typeof i){if(Ks(e))e.push(i);else{if(!e||"object"!=typeof e)return[e,i];(r&&(r.plainObjects||r.allowPrototypes)||!Ys.call(Object.prototype,i))&&(e[i]=!0)}return e}if(!e||"object"!=typeof e)return[e].concat(i);var n=e;return Ks(e)&&!Ks(i)&&(n=Qs(e,r)),Ks(e)&&Ks(i)?(i.forEach((function(i,n){if(Ys.call(e,n)){var a=e[n];a&&"object"==typeof a&&i&&"object"==typeof i?e[n]=t(a,i,r):e.push(i)}else e[n]=i})),e):Object.keys(i).reduce((function(e,n){var a=i[n];return Ys.call(e,n)?e[n]=t(e[n],a,r):e[n]=a,e}),n)}},to=function(){var t,e,i,r={assert:function(t){if(!r.has(t))throw new Rs("Side channel does not contain "+Is(t))},get:function(r){if(Ls&&r&&("object"==typeof r||"function"==typeof r)){if(t)return Ns(t,r)}else if(Ms){if(e)return Bs(e,r)}else if(i)return function(t,e){var i=Vs(t,e);return i&&i.value}(i,r)},has:function(r){if(Ls&&r&&("object"==typeof r||"function"==typeof r)){if(t)return Fs(t,r)}else if(Ms){if(e)return Gs(e,r)}else if(i)return function(t,e){return!!Vs(t,e)}(i,r);return!1},set:function(r,n){Ls&&r&&("object"==typeof r||"function"==typeof r)?(t||(t=new Ls),js(t,r,n)):Ms?(e||(e=new Ms),zs(e,r,n)):(i||(i={key:{},next:null}),function(t,e,i){var r=Vs(t,e);r?r.value=i:t.next={key:e,next:t.next,value:i}}(i,r,n))}};return r},eo=Zs,io=Xs,ro=Object.prototype.hasOwnProperty,no={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},ao=Array.isArray,so=Array.prototype.push,oo=function(t,e){so.apply(t,ao(e)?e:[e])},uo=Date.prototype.toISOString,po=io.default,co={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:eo.encode,encodeValuesOnly:!1,format:po,formatter:io.formatters[po],indices:!1,serializeDate:function(t){return uo.call(t)},skipNulls:!1,strictNullHandling:!1},lo=function t(e,i,r,n,a,s,o,u,p,c,l,d,f,h,g){var m,y=e;if(g.has(e))throw new RangeError("Cyclic object value");if("function"==typeof o?y=o(i,y):y instanceof Date?y=c(y):"comma"===r&&ao(y)&&(y=eo.maybeMap(y,(function(t){return t instanceof Date?c(t):t}))),null===y){if(n)return s&&!f?s(i,co.encoder,h,"key",l):i;y=""}if("string"==typeof(m=y)||"number"==typeof m||"boolean"==typeof m||"symbol"==typeof m||"bigint"==typeof m||eo.isBuffer(y))return s?[d(f?i:s(i,co.encoder,h,"key",l))+"="+d(s(y,co.encoder,h,"value",l))]:[d(i)+"="+d(String(y))];var b,v=[];if(void 0===y)return v;if("comma"===r&&ao(y))b=[{value:y.length>0?y.join(",")||null:void 0}];else if(ao(o))b=o;else{var w=Object.keys(y);b=u?w.sort(u):w}for(var S=0;S<b.length;++S){var T=b[S],_="object"==typeof T&&void 0!==T.value?T.value:y[T];if(!a||null!==_){var A=ao(y)?"function"==typeof r?r(i,T):i:i+(p?"."+T:"["+T+"]");g.set(e,!0);var E=to();oo(v,t(_,A,r,n,a,s,o,u,p,c,l,d,f,h,E))}}return v},fo=Zs,ho=Object.prototype.hasOwnProperty,go=Array.isArray,mo={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:fo.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},yo=function(t){return t.replace(/&#(\d+);/g,(function(t,e){return String.fromCharCode(parseInt(e,10))}))},bo=function(t,e){return t&&"string"==typeof t&&e.comma&&t.indexOf(",")>-1?t.split(","):t},vo=function(t,e,i,r){if(t){var n=i.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,a=/(\[[^[\]]*])/g,s=i.depth>0&&/(\[[^[\]]*])/.exec(n),o=s?n.slice(0,s.index):n,u=[];if(o){if(!i.plainObjects&&ho.call(Object.prototype,o)&&!i.allowPrototypes)return;u.push(o)}for(var p=0;i.depth>0&&null!==(s=a.exec(n))&&p<i.depth;){if(p+=1,!i.plainObjects&&ho.call(Object.prototype,s[1].slice(1,-1))&&!i.allowPrototypes)return;u.push(s[1])}return s&&u.push("["+n.slice(s.index)+"]"),function(t,e,i,r){for(var n=r?e:bo(e,i),a=t.length-1;a>=0;--a){var s,o=t[a];if("[]"===o&&i.parseArrays)s=[].concat(n);else{s=i.plainObjects?Object.create(null):{};var u="["===o.charAt(0)&&"]"===o.charAt(o.length-1)?o.slice(1,-1):o,p=parseInt(u,10);i.parseArrays||""!==u?!isNaN(p)&&o!==u&&String(p)===u&&p>=0&&i.parseArrays&&p<=i.arrayLimit?(s=[])[p]=n:s[u]=n:s={0:n}}n=s}return n}(u,e,i,r)}},wo={formats:Xs,parse:function(t,e){var i=function(t){if(!t)return mo;if(null!==t.decoder&&void 0!==t.decoder&&"function"!=typeof t.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var e=void 0===t.charset?mo.charset:t.charset;return{allowDots:void 0===t.allowDots?mo.allowDots:!!t.allowDots,allowPrototypes:"boolean"==typeof t.allowPrototypes?t.allowPrototypes:mo.allowPrototypes,allowSparse:"boolean"==typeof t.allowSparse?t.allowSparse:mo.allowSparse,arrayLimit:"number"==typeof t.arrayLimit?t.arrayLimit:mo.arrayLimit,charset:e,charsetSentinel:"boolean"==typeof t.charsetSentinel?t.charsetSentinel:mo.charsetSentinel,comma:"boolean"==typeof t.comma?t.comma:mo.comma,decoder:"function"==typeof t.decoder?t.decoder:mo.decoder,delimiter:"string"==typeof t.delimiter||fo.isRegExp(t.delimiter)?t.delimiter:mo.delimiter,depth:"number"==typeof t.depth||!1===t.depth?+t.depth:mo.depth,ignoreQueryPrefix:!0===t.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof t.interpretNumericEntities?t.interpretNumericEntities:mo.interpretNumericEntities,parameterLimit:"number"==typeof t.parameterLimit?t.parameterLimit:mo.parameterLimit,parseArrays:!1!==t.parseArrays,plainObjects:"boolean"==typeof t.plainObjects?t.plainObjects:mo.plainObjects,strictNullHandling:"boolean"==typeof t.strictNullHandling?t.strictNullHandling:mo.strictNullHandling}}(e);if(""===t||null==t)return i.plainObjects?Object.create(null):{};for(var r="string"==typeof t?function(t,e){var i,r={},n=e.ignoreQueryPrefix?t.replace(/^\?/,""):t,a=e.parameterLimit===1/0?void 0:e.parameterLimit,s=n.split(e.delimiter,a),o=-1,u=e.charset;if(e.charsetSentinel)for(i=0;i<s.length;++i)0===s[i].indexOf("utf8=")&&("utf8=%E2%9C%93"===s[i]?u="utf-8":"utf8=%26%2310003%3B"===s[i]&&(u="iso-8859-1"),o=i,i=s.length);for(i=0;i<s.length;++i)if(i!==o){var p,c,l=s[i],d=l.indexOf("]="),f=-1===d?l.indexOf("="):d+1;-1===f?(p=e.decoder(l,mo.decoder,u,"key"),c=e.strictNullHandling?null:""):(p=e.decoder(l.slice(0,f),mo.decoder,u,"key"),c=fo.maybeMap(bo(l.slice(f+1),e),(function(t){return e.decoder(t,mo.decoder,u,"value")}))),c&&e.interpretNumericEntities&&"iso-8859-1"===u&&(c=yo(c)),l.indexOf("[]=")>-1&&(c=go(c)?[c]:c),ho.call(r,p)?r[p]=fo.combine(r[p],c):r[p]=c}return r}(t,i):t,n=i.plainObjects?Object.create(null):{},a=Object.keys(r),s=0;s<a.length;++s){var o=a[s],u=vo(o,r[o],i,"string"==typeof t);n=fo.merge(n,u,i)}return!0===i.allowSparse?n:fo.compact(n)},stringify:function(t,e){var i,r=t,n=function(t){if(!t)return co;if(null!==t.encoder&&void 0!==t.encoder&&"function"!=typeof t.encoder)throw new TypeError("Encoder has to be a function.");var e=t.charset||co.charset;if(void 0!==t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var i=io.default;if(void 0!==t.format){if(!ro.call(io.formatters,t.format))throw new TypeError("Unknown format option provided.");i=t.format}var r=io.formatters[i],n=co.filter;return("function"==typeof t.filter||ao(t.filter))&&(n=t.filter),{addQueryPrefix:"boolean"==typeof t.addQueryPrefix?t.addQueryPrefix:co.addQueryPrefix,allowDots:void 0===t.allowDots?co.allowDots:!!t.allowDots,charset:e,charsetSentinel:"boolean"==typeof t.charsetSentinel?t.charsetSentinel:co.charsetSentinel,delimiter:void 0===t.delimiter?co.delimiter:t.delimiter,encode:"boolean"==typeof t.encode?t.encode:co.encode,encoder:"function"==typeof t.encoder?t.encoder:co.encoder,encodeValuesOnly:"boolean"==typeof t.encodeValuesOnly?t.encodeValuesOnly:co.encodeValuesOnly,filter:n,format:i,formatter:r,serializeDate:"function"==typeof t.serializeDate?t.serializeDate:co.serializeDate,skipNulls:"boolean"==typeof t.skipNulls?t.skipNulls:co.skipNulls,sort:"function"==typeof t.sort?t.sort:null,strictNullHandling:"boolean"==typeof t.strictNullHandling?t.strictNullHandling:co.strictNullHandling}}(e);"function"==typeof n.filter?r=(0,n.filter)("",r):ao(n.filter)&&(i=n.filter);var a,s=[];if("object"!=typeof r||null===r)return"";a=e&&e.arrayFormat in no?e.arrayFormat:e&&"indices"in e?e.indices?"indices":"repeat":"indices";var o=no[a];i||(i=Object.keys(r)),n.sort&&i.sort(n.sort);for(var u=to(),p=0;p<i.length;++p){var c=i[p];n.skipNulls&&null===r[c]||oo(s,lo(r[c],c,o,n.strictNullHandling,n.skipNulls,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,u))}var l=s.join(n.delimiter),d=!0===n.addQueryPrefix?"?":"";return n.charsetSentinel&&("iso-8859-1"===n.charset?d+="utf8=%26%2310003%3B&":d+="utf8=%E2%9C%93&"),l.length>0?d+l:""}},So={};Us=function(t){t.version="1.2.0";var e=function(){for(var t=0,e=new Array(256),i=0;256!=i;++i)t=1&(t=1&(t=1&(t=1&(t=1&(t=1&(t=1&(t=1&(t=i)?-306674912^t>>>1:t>>>1)?-306674912^t>>>1:t>>>1)?-306674912^t>>>1:t>>>1)?-306674912^t>>>1:t>>>1)?-306674912^t>>>1:t>>>1)?-306674912^t>>>1:t>>>1)?-306674912^t>>>1:t>>>1)?-306674912^t>>>1:t>>>1,e[i]=t;return"undefined"!=typeof Int32Array?new Int32Array(e):e}();t.table=e,t.bstr=function(t,i){for(var r=-1^i,n=t.length-1,a=0;a<n;)r=(r=r>>>8^e[255&(r^t.charCodeAt(a++))])>>>8^e[255&(r^t.charCodeAt(a++))];return a===n&&(r=r>>>8^e[255&(r^t.charCodeAt(a))]),-1^r},t.buf=function(t,i){if(t.length>1e4)return function(t,i){for(var r=-1^i,n=t.length-7,a=0;a<n;)r=(r=(r=(r=(r=(r=(r=(r=r>>>8^e[255&(r^t[a++])])>>>8^e[255&(r^t[a++])])>>>8^e[255&(r^t[a++])])>>>8^e[255&(r^t[a++])])>>>8^e[255&(r^t[a++])])>>>8^e[255&(r^t[a++])])>>>8^e[255&(r^t[a++])])>>>8^e[255&(r^t[a++])];for(;a<n+7;)r=r>>>8^e[255&(r^t[a++])];return-1^r}(t,i);for(var r=-1^i,n=t.length-3,a=0;a<n;)r=(r=(r=(r=r>>>8^e[255&(r^t[a++])])>>>8^e[255&(r^t[a++])])>>>8^e[255&(r^t[a++])])>>>8^e[255&(r^t[a++])];for(;a<n+3;)r=r>>>8^e[255&(r^t[a++])];return-1^r},t.str=function(t,i){for(var r,n,a=-1^i,s=0,o=t.length;s<o;)(r=t.charCodeAt(s++))<128?a=a>>>8^e[255&(a^r)]:r<2048?a=(a=a>>>8^e[255&(a^(192|r>>6&31))])>>>8^e[255&(a^(128|63&r))]:r>=55296&&r<57344?(r=64+(1023&r),n=1023&t.charCodeAt(s++),a=(a=(a=(a=a>>>8^e[255&(a^(240|r>>8&7))])>>>8^e[255&(a^(128|r>>2&63))])>>>8^e[255&(a^(128|n>>6&15|(3&r)<<4))])>>>8^e[255&(a^(128|63&n))]):a=(a=(a=a>>>8^e[255&(a^(224|r>>12&15))])>>>8^e[255&(a^(128|r>>6&63))])>>>8^e[255&(a^(128|63&r))];return-1^a}},"undefined"==typeof DO_NOT_EXPORT_CRC?Us(So):Us({});export{H as E,aa as P,it as a,st as b,at as c,$n as d,D as e,So as f,x as i,wo as l,U as u,et as w};
